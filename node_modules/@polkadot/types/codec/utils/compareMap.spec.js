"use strict";

var _create = require("../../create");

var _primitive = require("../../primitive");

var _ = require(".");

// Copyright 2017-2020 @polkadot/types authors & contributors
// SPDX-License-Identifier: Apache-2.0
describe('compareMap', () => {
  const registry = new _create.TypeRegistry();
  const a = new Map([['decimals', new _primitive.U32(registry, 15)], ['missing', new _primitive.U32(registry, 10)], ['foobar', new _primitive.U32(registry, 5)]]);
  const b = new Map([['decimals', 15], ['missing', 10], ['foobar', 5]]);
  const c = new Map([['decimals', new _primitive.U32(registry, 15)], ['missing', new _primitive.U32(registry, 10)], ['foobar', new _primitive.U32(registry, 5)]]);
  it('compares Map<string, Codec> against Object', () => {
    expect((0, _.compareMap)(a, {
      decimals: 15,
      foobar: 5,
      missing: 10
    })).toBe(true);
  });
  it('compares Map<string, any> against entries array', () => {
    expect((0, _.compareMap)(b, [['missing', 10], ['decimals', 15], ['foobar', 5]])).toBe(true);
  });
  it('compares between 2 maps', () => {
    expect((0, _.compareMap)(a, b)).toBe(true);
  });
  it('compares between 2 maps (both codec)', () => {
    expect((0, _.compareMap)(a, c)).toBe(true);
  });
  it('returns false when second param is a non-map, non-array, non-object', () => {
    expect((0, _.compareMap)(a, 123)).toBe(false);
  });
  it('returns false when second param is a array with non-entries', () => {
    expect((0, _.compareMap)(a, [123, 456, 789])).toBe(false);
  });
  it('returns false when second param is a array with non-entries (only key)', () => {
    expect((0, _.compareMap)(a, [[123], [456], [789]])).toBe(false);
  });
  it('returns false when properties are missing', () => {
    expect((0, _.compareMap)(a, [['decimals', 15], ['wrong', 10], ['foobar', 5]])).toBe(false);
  });
  it('returns false when lengths do not match', () => {
    expect((0, _.compareMap)(a, [['decimals', 15]])).toBe(false);
  });
});