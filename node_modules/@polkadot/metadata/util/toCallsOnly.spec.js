"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _create = require("@polkadot/types/create");

var _static = _interopRequireDefault(require("../static"));

var _Metadata = require("../Metadata");

// Copyright 2017-2020 @polkadot/metadata authors & contributors
// SPDX-License-Identifier: Apache-2.0
describe('toCallsOnly', () => {
  const registry = new _create.TypeRegistry();
  it('creates a calls-only version of the  metadata', () => {
    const stripped = new _Metadata.Metadata(registry, _static.default).asCallsOnly;

    try {
      expect(stripped).toBeDefined();
    } catch (error) {
      console.error(JSON.stringify(stripped));
      throw error;
    }
  });
  it('can serialize from the input', () => {
    const s1 = new _Metadata.Metadata(registry, _static.default).asCallsOnly.toU8a();
    const s2 = new _Metadata.Metadata(registry, s1).asCallsOnly.toU8a();
    expect(s1).toEqual(s2);
  });
});