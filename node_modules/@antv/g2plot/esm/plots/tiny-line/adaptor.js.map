{"version":3,"file":"adaptor.js","sourceRoot":"","sources":["../../../src/plots/tiny-line/adaptor.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,IAAI,EAAE,UAAU,EAAE,MAAM,aAAa,CAAC;AAC/C,OAAO,EAAE,KAAK,EAAE,KAAK,EAAE,SAAS,EAAE,UAAU,EAAE,OAAO,EAAE,MAAM,sBAAsB,CAAC;AACpF,OAAO,EAAE,IAAI,EAAE,KAAK,EAAE,MAAM,0BAA0B,CAAC;AACvD,OAAO,EAAE,iBAAiB,EAAE,MAAM,kBAAkB,CAAC;AAErD,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,MAAM,aAAa,CAAC;AAE/C;;;GAGG;AACH,SAAS,QAAQ,CAAC,MAA+B;;IACvC,IAAA,KAAK,GAAc,MAAM,MAApB,EAAE,OAAO,GAAK,MAAM,QAAX,CAAY;IAC1B,IAAA,IAAI,GAA0D,OAAO,KAAjE,EAAE,KAAK,GAAmD,OAAO,MAA1D,EAAE,KAAK,GAA4C,OAAO,MAAnD,EAAE,KAAK,GAAqC,OAAO,MAA5C,EAAE,SAAS,GAA0B,OAAO,UAAjC,EAAS,YAAY,GAAK,OAAO,MAAZ,CAAa;IAE9E,IAAM,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC,UAAC,CAAS,EAAE,CAAS;QAC/C,OAAO,EAAE,CAAC,GAAA,EAAE,CAAC,GAAA,EAAE,CAAC;IAClB,CAAC,CAAC,CAAC;IAEH,KAAK,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;IAEvB,mBAAmB;IACnB,IAAM,CAAC,GAAG,UAAU,CAAC,EAAE,EAAE,MAAM,EAAE;QAC/B,OAAO,EAAE;YACP,MAAM,EAAE,OAAO;YACf,MAAM,EAAE,OAAO;YACf,IAAI,EAAE;gBACJ,KAAK,OAAA;gBACL,KAAK,EAAE,SAAS;aACjB;YACD,KAAK,EAAE,YAAY;SACpB;KACF,CAAC,CAAC;IAEH,IAAI,CAAC,CAAC,CAAC,CAAC;IACR,KAAK,CAAC,CAAC,CAAC,CAAC;IAET,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IAClB,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;IAEpB,QAAQ;IACR,KAAK;QAED,GAAC,OAAO,IAAG,KAAK;QAChB,GAAC,OAAO,IAAG,KAAK;;QAGhB,GAAC,OAAO,IAAG;YACT,IAAI,EAAE,KAAK;SACZ;QACD,GAAC,OAAO,IAAG,iBAAiB,CAAC,UAAU,EAAE,OAAO,CAAC;YAEpD,CAAC,MAAM,CAAC,CAAC;IAEV,OAAO,MAAM,CAAC;AAChB,CAAC;AAED;;;;GAIG;AACH,MAAM,UAAU,OAAO,CAAC,MAA+B;IACrD,OAAO,IAAI,CAAC,QAAQ,EAAE,KAAK,EAAE,OAAO,EAAE,SAAS,EAAE,UAAU,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC;AACzE,CAAC","sourcesContent":["import { Params } from '../../core/adaptor';\nimport { flow, deepAssign } from '../../utils';\nimport { scale, theme, animation, annotation, tooltip } from '../../adaptor/common';\nimport { line, point } from '../../adaptor/geometries';\nimport { adjustYMetaByZero } from '../../utils/data';\nimport { TinyLineOptions } from './types';\nimport { X_FIELD, Y_FIELD } from './constants';\n\n/**\n * 字段\n * @param params\n */\nfunction geometry(params: Params<TinyLineOptions>): Params<TinyLineOptions> {\n  const { chart, options } = params;\n  const { data, xAxis, yAxis, color, lineStyle, point: pointMapping } = options;\n\n  const seriesData = data.map((y: number, x: number) => {\n    return { x, y };\n  });\n\n  chart.data(seriesData);\n\n  // line geometry 处理\n  const p = deepAssign({}, params, {\n    options: {\n      xField: X_FIELD,\n      yField: Y_FIELD,\n      line: {\n        color,\n        style: lineStyle,\n      },\n      point: pointMapping,\n    },\n  });\n\n  line(p);\n  point(p);\n\n  chart.axis(false);\n  chart.legend(false);\n\n  // scale\n  scale(\n    {\n      [X_FIELD]: xAxis,\n      [Y_FIELD]: yAxis,\n    },\n    {\n      [X_FIELD]: {\n        type: 'cat',\n      },\n      [Y_FIELD]: adjustYMetaByZero(seriesData, Y_FIELD),\n    }\n  )(params);\n\n  return params;\n}\n\n/**\n * 迷你折线图适配器\n * @param chart\n * @param options\n */\nexport function adaptor(params: Params<TinyLineOptions>) {\n  return flow(geometry, theme, tooltip, animation, annotation())(params);\n}\n"]}