{"ast":null,"code":"var DEFAULT_TRIGGER = 'ctrl';\nvar ALLOW_EVENTS = ['shift', 'ctrl', 'alt', 'control'];\nvar DEFAULT_COMBINED_KEY = '1';\nexport default {\n  getDefaultCfg: function getDefaultCfg() {\n    return {\n      trigger: DEFAULT_TRIGGER,\n      combinedKey: DEFAULT_COMBINED_KEY,\n      functionName: 'fitView',\n      functionParams: []\n    };\n  },\n  getEvents: function getEvents() {\n    // 检测输入是否合法\n    if (!(ALLOW_EVENTS.indexOf(this.trigger.toLowerCase()) > -1)) {\n      this.trigger = DEFAULT_TRIGGER;\n      console.warn(\"Behavior shortcuts-fit-view \\u7684 trigger \\u53C2\\u6570 '\" + this.trigger + \"' \\u4E0D\\u5408\\u6CD5\\uFF0C\\u8BF7\\u8F93\\u5165 'drag'\\u3001'shift'\\u3001'ctrl' \\u6216 'alt'\");\n    }\n\n    if (this.combinedKey === this.trigger) {\n      this.combinedKey = undefined;\n    }\n\n    return {\n      keyup: 'onKeyUp',\n      keydown: 'onKeyDown'\n    };\n  },\n  onKeyDown: function onKeyDown(e) {\n    var code = e.key;\n\n    if (!code) {\n      return;\n    }\n\n    var triggerLowerCase = this.trigger.toLowerCase();\n    var codeLowerCase = code.toLowerCase(); // 按住 control 键时，允许用户设置 trigger 为 ctrl\n\n    if (!this.triggerKeydown) {\n      if (codeLowerCase === triggerLowerCase || codeLowerCase === 'control' && triggerLowerCase === 'ctrl' || codeLowerCase === 'ctrl' && triggerLowerCase === 'control') {\n        this.triggerKeydown = true;\n      } else {\n        this.triggerKeydown = false;\n      }\n    }\n\n    var graph = this.graph;\n\n    if (!graph[this.functionName]) {\n      console.warn(\"Behavior shortcuts-fit-view \\u7684 functionName \\u53C2\\u6570 '\" + this.functionName + \"' \\u4E0D\\u5408\\u6CD5\\uFF0C\\u5B83\\u4E0D\\u662F Graph \\u7684\\u4E00\\u4E2A\\u51FD\\u6570\\u540D\");\n      return {};\n    } // 未配置 combinedKey，直接 fitView\n\n\n    if (this.triggerKeydown && !this.combinedKey) {\n      if (this.functionParams && this.functionParams.length) graph[this.functionName].apply(graph, this.functionParams);else graph[this.functionName]();\n      return;\n    }\n\n    var combinedKeyLowerCase = this.combinedKey.toLowerCase();\n\n    if (this.triggerKeydown) {\n      if (codeLowerCase === combinedKeyLowerCase || codeLowerCase === 'control' && combinedKeyLowerCase === 'ctrl' || codeLowerCase === 'ctrl' && combinedKeyLowerCase === 'control') {\n        if (this.functionParams && this.functionParams.length) graph[this.functionName].apply(graph, this.functionParams);else graph[this.functionName]();\n      }\n    }\n  },\n  onKeyUp: function onKeyUp() {\n    if (this.brush) {\n      // 清除所有选中状态后，设置拖得动状态为false，并清除框选的brush\n      this.brush.remove(true);\n      this.brush = null;\n      this.dragging = false;\n    }\n\n    this.triggerKeydown = false;\n  }\n};","map":{"version":3,"sources":["/Users/wanglijie/wanglijie/clover-defi-wallet/node_modules/@antv/g6/es/behavior/shortcuts-call.js"],"names":["DEFAULT_TRIGGER","ALLOW_EVENTS","DEFAULT_COMBINED_KEY","getDefaultCfg","trigger","combinedKey","functionName","functionParams","getEvents","indexOf","toLowerCase","console","warn","undefined","keyup","keydown","onKeyDown","e","code","key","triggerLowerCase","codeLowerCase","triggerKeydown","graph","length","apply","combinedKeyLowerCase","onKeyUp","brush","remove","dragging"],"mappings":"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","sourcesContent":["var DEFAULT_TRIGGER = 'ctrl';\nvar ALLOW_EVENTS = ['shift', 'ctrl', 'alt', 'control'];\nvar DEFAULT_COMBINED_KEY = '1';\nexport default {\n  getDefaultCfg: function getDefaultCfg() {\n    return {\n      trigger: DEFAULT_TRIGGER,\n      combinedKey: DEFAULT_COMBINED_KEY,\n      functionName: 'fitView',\n      functionParams: []\n    };\n  },\n  getEvents: function getEvents() {\n    // 检测输入是否合法\n    if (!(ALLOW_EVENTS.indexOf(this.trigger.toLowerCase()) > -1)) {\n      this.trigger = DEFAULT_TRIGGER;\n      console.warn(\"Behavior shortcuts-fit-view \\u7684 trigger \\u53C2\\u6570 '\" + this.trigger + \"' \\u4E0D\\u5408\\u6CD5\\uFF0C\\u8BF7\\u8F93\\u5165 'drag'\\u3001'shift'\\u3001'ctrl' \\u6216 'alt'\");\n    }\n\n    if (this.combinedKey === this.trigger) {\n      this.combinedKey = undefined;\n    }\n\n    return {\n      keyup: 'onKeyUp',\n      keydown: 'onKeyDown'\n    };\n  },\n  onKeyDown: function onKeyDown(e) {\n    var code = e.key;\n\n    if (!code) {\n      return;\n    }\n\n    var triggerLowerCase = this.trigger.toLowerCase();\n    var codeLowerCase = code.toLowerCase(); // 按住 control 键时，允许用户设置 trigger 为 ctrl\n\n    if (!this.triggerKeydown) {\n      if (codeLowerCase === triggerLowerCase || codeLowerCase === 'control' && triggerLowerCase === 'ctrl' || codeLowerCase === 'ctrl' && triggerLowerCase === 'control') {\n        this.triggerKeydown = true;\n      } else {\n        this.triggerKeydown = false;\n      }\n    }\n\n    var graph = this.graph;\n\n    if (!graph[this.functionName]) {\n      console.warn(\"Behavior shortcuts-fit-view \\u7684 functionName \\u53C2\\u6570 '\" + this.functionName + \"' \\u4E0D\\u5408\\u6CD5\\uFF0C\\u5B83\\u4E0D\\u662F Graph \\u7684\\u4E00\\u4E2A\\u51FD\\u6570\\u540D\");\n      return {};\n    } // 未配置 combinedKey，直接 fitView\n\n\n    if (this.triggerKeydown && !this.combinedKey) {\n      if (this.functionParams && this.functionParams.length) graph[this.functionName].apply(graph, this.functionParams);else graph[this.functionName]();\n      return;\n    }\n\n    var combinedKeyLowerCase = this.combinedKey.toLowerCase();\n\n    if (this.triggerKeydown) {\n      if (codeLowerCase === combinedKeyLowerCase || codeLowerCase === 'control' && combinedKeyLowerCase === 'ctrl' || codeLowerCase === 'ctrl' && combinedKeyLowerCase === 'control') {\n        if (this.functionParams && this.functionParams.length) graph[this.functionName].apply(graph, this.functionParams);else graph[this.functionName]();\n      }\n    }\n  },\n  onKeyUp: function onKeyUp() {\n    if (this.brush) {\n      // 清除所有选中状态后，设置拖得动状态为false，并清除框选的brush\n      this.brush.remove(true);\n      this.brush = null;\n      this.dragging = false;\n    }\n\n    this.triggerKeydown = false;\n  }\n};"]},"metadata":{},"sourceType":"module"}