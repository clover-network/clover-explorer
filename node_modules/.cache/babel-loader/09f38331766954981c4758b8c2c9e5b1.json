{"ast":null,"code":"/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\"use strict\";\n\nexports.__esModule = true;\n\nvar tslib_1 = require(\"tslib\");\n\nvar numberUtil = require(\"../util/number\");\n\nvar time_1 = require(\"../util/time\");\n\nvar scaleHelper = require(\"./helper\");\n\nvar Interval_1 = require(\"./Interval\");\n\nvar Scale_1 = require(\"./Scale\");\n\nvar log_1 = require(\"../util/log\");\n\nvar util_1 = require(\"zrender/lib/core/util\");\n\nvar bisect = function (a, x, lo, hi) {\n  while (lo < hi) {\n    var mid = lo + hi >>> 1;\n\n    if (a[mid][1] < x) {\n      lo = mid + 1;\n    } else {\n      hi = mid;\n    }\n  }\n\n  return lo;\n};\n\nvar TimeScale = function (_super) {\n  tslib_1.__extends(TimeScale, _super);\n\n  function TimeScale(settings) {\n    var _this = _super.call(this, settings) || this;\n\n    _this.type = 'time';\n    return _this;\n  }\n\n  TimeScale.prototype.getLabel = function (tick) {\n    var useUTC = this.getSetting('useUTC');\n    return time_1.format(tick.value, time_1.fullLeveledFormatter[time_1.getDefaultFormatPrecisionOfInterval(time_1.getPrimaryTimeUnit(this._minLevelUnit))] || time_1.fullLeveledFormatter.second, useUTC, this.getSetting('locale'));\n  };\n\n  TimeScale.prototype.getFormattedLabel = function (tick, idx, labelFormatter) {\n    var isUTC = this.getSetting('useUTC');\n    var lang = this.getSetting('locale');\n    return time_1.leveledFormat(tick, idx, labelFormatter, lang, isUTC);\n  };\n\n  TimeScale.prototype.getTicks = function (expandToNicedExtent) {\n    var interval = this._interval;\n    var extent = this._extent;\n    var ticks = [];\n\n    if (!interval) {\n      return ticks;\n    }\n\n    ticks.push({\n      value: extent[0],\n      level: 0\n    });\n    var useUTC = this.getSetting('useUTC');\n    var innerTicks = getIntervalTicks(this._minLevelUnit, this._approxInterval, useUTC, extent);\n    ticks = ticks.concat(innerTicks);\n    ticks.push({\n      value: extent[1],\n      level: 0\n    });\n    return ticks;\n  };\n\n  TimeScale.prototype.niceExtent = function (opt) {\n    var extent = this._extent;\n\n    if (extent[0] === extent[1]) {\n      extent[0] -= time_1.ONE_DAY;\n      extent[1] += time_1.ONE_DAY;\n    }\n\n    if (extent[1] === -Infinity && extent[0] === Infinity) {\n      var d = new Date();\n      extent[1] = +new Date(d.getFullYear(), d.getMonth(), d.getDate());\n      extent[0] = extent[1] - time_1.ONE_DAY;\n    }\n\n    this.niceTicks(opt.splitNumber, opt.minInterval, opt.maxInterval);\n  };\n\n  TimeScale.prototype.niceTicks = function (approxTickNum, minInterval, maxInterval) {\n    approxTickNum = approxTickNum || 10;\n    var extent = this._extent;\n    var span = extent[1] - extent[0];\n    this._approxInterval = span / approxTickNum;\n\n    if (minInterval != null && this._approxInterval < minInterval) {\n      this._approxInterval = minInterval;\n    }\n\n    if (maxInterval != null && this._approxInterval > maxInterval) {\n      this._approxInterval = maxInterval;\n    }\n\n    var scaleIntervalsLen = scaleIntervals.length;\n    var idx = Math.min(bisect(scaleIntervals, this._approxInterval, 0, scaleIntervalsLen), scaleIntervalsLen - 1);\n    this._interval = scaleIntervals[idx][1];\n    this._minLevelUnit = scaleIntervals[Math.max(idx - 1, 0)][0];\n  };\n\n  TimeScale.prototype.parse = function (val) {\n    return typeof val === 'number' ? val : +numberUtil.parseDate(val);\n  };\n\n  TimeScale.prototype.contain = function (val) {\n    return scaleHelper.contain(this.parse(val), this._extent);\n  };\n\n  TimeScale.prototype.normalize = function (val) {\n    return scaleHelper.normalize(this.parse(val), this._extent);\n  };\n\n  TimeScale.prototype.scale = function (val) {\n    return scaleHelper.scale(val, this._extent);\n  };\n\n  TimeScale.type = 'time';\n  return TimeScale;\n}(Interval_1[\"default\"]);\n\nvar scaleIntervals = [['second', time_1.ONE_SECOND], ['minute', time_1.ONE_MINUTE], ['hour', time_1.ONE_HOUR], ['quarter-day', time_1.ONE_HOUR * 6], ['half-day', time_1.ONE_HOUR * 12], ['day', time_1.ONE_DAY * 1.2], ['half-week', time_1.ONE_DAY * 3.5], ['week', time_1.ONE_DAY * 7], ['month', time_1.ONE_DAY * 31], ['quarter', time_1.ONE_DAY * 95], ['half-year', time_1.ONE_YEAR / 2], ['year', time_1.ONE_YEAR]];\n\nfunction isUnitValueSame(unit, valueA, valueB, isUTC) {\n  var dateA = numberUtil.parseDate(valueA);\n  var dateB = numberUtil.parseDate(valueB);\n\n  var isSame = function (unit) {\n    return time_1.getUnitValue(dateA, unit, isUTC) === time_1.getUnitValue(dateB, unit, isUTC);\n  };\n\n  var isSameYear = function () {\n    return isSame('year');\n  };\n\n  var isSameMonth = function () {\n    return isSameYear() && isSame('month');\n  };\n\n  var isSameDay = function () {\n    return isSameMonth() && isSame('day');\n  };\n\n  var isSameHour = function () {\n    return isSameDay() && isSame('hour');\n  };\n\n  var isSameMinute = function () {\n    return isSameHour() && isSame('minute');\n  };\n\n  var isSameSecond = function () {\n    return isSameMinute() && isSame('second');\n  };\n\n  var isSameMilliSecond = function () {\n    return isSameSecond() && isSame('millisecond');\n  };\n\n  switch (unit) {\n    case 'year':\n      return isSameYear();\n\n    case 'month':\n      return isSameMonth();\n\n    case 'day':\n      return isSameDay();\n\n    case 'hour':\n      return isSameHour();\n\n    case 'minute':\n      return isSameMinute();\n\n    case 'second':\n      return isSameSecond();\n\n    case 'millisecond':\n      return isSameMilliSecond();\n  }\n}\n\nfunction getDateInterval(approxInterval, daysInMonth) {\n  approxInterval /= time_1.ONE_DAY;\n  return approxInterval > 16 ? 16 : approxInterval > 7.5 ? 7 : approxInterval > 3.5 ? 4 : approxInterval > 1.5 ? 2 : 1;\n}\n\nfunction getMonthInterval(approxInterval) {\n  var APPROX_ONE_MONTH = 30 * time_1.ONE_DAY;\n  approxInterval /= APPROX_ONE_MONTH;\n  return approxInterval > 6 ? 6 : approxInterval > 3 ? 3 : approxInterval > 2 ? 2 : 1;\n}\n\nfunction getHourInterval(approxInterval) {\n  approxInterval /= time_1.ONE_HOUR;\n  return approxInterval > 12 ? 12 : approxInterval > 6 ? 6 : approxInterval > 3.5 ? 4 : approxInterval > 2 ? 2 : 1;\n}\n\nfunction getMinutesAndSecondsInterval(approxInterval, isMinutes) {\n  approxInterval /= isMinutes ? time_1.ONE_MINUTE : time_1.ONE_SECOND;\n  return approxInterval > 30 ? 30 : approxInterval > 20 ? 20 : approxInterval > 15 ? 15 : approxInterval > 10 ? 10 : approxInterval > 5 ? 5 : approxInterval > 2 ? 2 : 1;\n}\n\nfunction getMillisecondsInterval(approxInterval) {\n  return numberUtil.nice(approxInterval, true);\n}\n\nfunction getFirstTimestampOfUnit(date, unitName, isUTC) {\n  var outDate = new Date(date);\n\n  switch (time_1.getPrimaryTimeUnit(unitName)) {\n    case 'year':\n    case 'month':\n      outDate[time_1.monthSetterName(isUTC)](0);\n\n    case 'day':\n      outDate[time_1.dateSetterName(isUTC)](1);\n\n    case 'hour':\n      outDate[time_1.hoursSetterName(isUTC)](0);\n\n    case 'minute':\n      outDate[time_1.minutesSetterName(isUTC)](0);\n\n    case 'second':\n      outDate[time_1.secondsSetterName(isUTC)](0);\n      outDate[time_1.millisecondsSetterName(isUTC)](0);\n  }\n\n  return outDate.getTime();\n}\n\nfunction getIntervalTicks(bottomUnitName, approxInterval, isUTC, extent) {\n  var safeLimit = 10000;\n  var unitNames = time_1.timeUnits;\n  var iter = 0;\n\n  function addTicksInSpan(interval, minTimestamp, maxTimestamp, getMethodName, setMethodName, isDate, out) {\n    var date = new Date(minTimestamp);\n    var dateTime = minTimestamp;\n    var d = date[getMethodName]();\n\n    while (dateTime < maxTimestamp && dateTime <= extent[1]) {\n      out.push({\n        value: dateTime\n      });\n      d += interval;\n      date[setMethodName](d);\n      dateTime = date.getTime();\n    }\n\n    out.push({\n      value: dateTime,\n      notAdd: true\n    });\n  }\n\n  function addLevelTicks(unitName, lastLevelTicks, levelTicks) {\n    var newAddedTicks = [];\n    var isFirstLevel = !lastLevelTicks.length;\n\n    if (isUnitValueSame(time_1.getPrimaryTimeUnit(unitName), extent[0], extent[1], isUTC)) {\n      return;\n    }\n\n    if (isFirstLevel) {\n      lastLevelTicks = [{\n        value: getFirstTimestampOfUnit(new Date(extent[0]), unitName, isUTC)\n      }, {\n        value: extent[1]\n      }];\n    }\n\n    for (var i = 0; i < lastLevelTicks.length - 1; i++) {\n      var startTick = lastLevelTicks[i].value;\n      var endTick = lastLevelTicks[i + 1].value;\n\n      if (startTick === endTick) {\n        continue;\n      }\n\n      var interval = void 0;\n      var getterName = void 0;\n      var setterName = void 0;\n      var isDate = false;\n\n      switch (unitName) {\n        case 'year':\n          interval = Math.max(1, Math.round(approxInterval / time_1.ONE_DAY / 365));\n          getterName = time_1.fullYearGetterName(isUTC);\n          setterName = time_1.fullYearSetterName(isUTC);\n          break;\n\n        case 'half-year':\n        case 'quarter':\n        case 'month':\n          interval = getMonthInterval(approxInterval);\n          getterName = time_1.monthGetterName(isUTC);\n          setterName = time_1.monthSetterName(isUTC);\n          break;\n\n        case 'week':\n        case 'half-week':\n        case 'day':\n          interval = getDateInterval(approxInterval, 31);\n          getterName = time_1.dateGetterName(isUTC);\n          setterName = time_1.dateSetterName(isUTC);\n          isDate = true;\n          break;\n\n        case 'half-day':\n        case 'quarter-day':\n        case 'hour':\n          interval = getHourInterval(approxInterval);\n          getterName = time_1.hoursGetterName(isUTC);\n          setterName = time_1.hoursSetterName(isUTC);\n          break;\n\n        case 'minute':\n          interval = getMinutesAndSecondsInterval(approxInterval, true);\n          getterName = time_1.minutesGetterName(isUTC);\n          setterName = time_1.minutesSetterName(isUTC);\n          break;\n\n        case 'second':\n          interval = getMinutesAndSecondsInterval(approxInterval, false);\n          getterName = time_1.secondsGetterName(isUTC);\n          setterName = time_1.secondsSetterName(isUTC);\n          break;\n\n        case 'millisecond':\n          interval = getMillisecondsInterval(approxInterval);\n          getterName = time_1.millisecondsGetterName(isUTC);\n          setterName = time_1.millisecondsSetterName(isUTC);\n          break;\n      }\n\n      addTicksInSpan(interval, startTick, endTick, getterName, setterName, isDate, newAddedTicks);\n\n      if (unitName === 'year' && levelTicks.length > 1 && i === 0) {\n        levelTicks.unshift({\n          value: levelTicks[0].value - interval\n        });\n      }\n    }\n\n    for (var i = 0; i < newAddedTicks.length; i++) {\n      levelTicks.push(newAddedTicks[i]);\n    }\n\n    return newAddedTicks;\n  }\n\n  var levelsTicks = [];\n  var currentLevelTicks = [];\n  var tickCount = 0;\n  var lastLevelTickCount = 0;\n\n  for (var i = 0; i < unitNames.length && iter++ < safeLimit; ++i) {\n    var primaryTimeUnit = time_1.getPrimaryTimeUnit(unitNames[i]);\n\n    if (!time_1.isPrimaryTimeUnit(unitNames[i])) {\n      continue;\n    }\n\n    addLevelTicks(unitNames[i], levelsTicks[levelsTicks.length - 1] || [], currentLevelTicks);\n    var nextPrimaryTimeUnit = unitNames[i + 1] ? time_1.getPrimaryTimeUnit(unitNames[i + 1]) : null;\n\n    if (primaryTimeUnit !== nextPrimaryTimeUnit) {\n      if (currentLevelTicks.length) {\n        lastLevelTickCount = tickCount;\n        currentLevelTicks.sort(function (a, b) {\n          return a.value - b.value;\n        });\n        var levelTicksRemoveDuplicated = [];\n\n        for (var i_1 = 0; i_1 < currentLevelTicks.length; ++i_1) {\n          var tickValue = currentLevelTicks[i_1].value;\n\n          if (i_1 === 0 || currentLevelTicks[i_1 - 1].value !== tickValue) {\n            levelTicksRemoveDuplicated.push(currentLevelTicks[i_1]);\n\n            if (tickValue >= extent[0] && tickValue <= extent[1]) {\n              tickCount++;\n            }\n          }\n        }\n\n        var targetTickNum = (extent[1] - extent[0]) / approxInterval;\n\n        if (tickCount > targetTickNum * 1.5 && lastLevelTickCount > targetTickNum / 1.5) {\n          break;\n        }\n\n        levelsTicks.push(levelTicksRemoveDuplicated);\n\n        if (tickCount > targetTickNum || bottomUnitName === unitNames[i]) {\n          break;\n        }\n      }\n\n      currentLevelTicks = [];\n    }\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (iter >= safeLimit) {\n      log_1.warn('Exceed safe limit.');\n    }\n  }\n\n  var levelsTicksInExtent = util_1.filter(util_1.map(levelsTicks, function (levelTicks) {\n    return util_1.filter(levelTicks, function (tick) {\n      return tick.value >= extent[0] && tick.value <= extent[1] && !tick.notAdd;\n    });\n  }), function (levelTicks) {\n    return levelTicks.length > 0;\n  });\n  var ticks = [];\n  var maxLevel = levelsTicksInExtent.length - 1;\n\n  for (var i = 0; i < levelsTicksInExtent.length; ++i) {\n    var levelTicks = levelsTicksInExtent[i];\n\n    for (var k = 0; k < levelTicks.length; ++k) {\n      ticks.push({\n        value: levelTicks[k].value,\n        level: maxLevel - i\n      });\n    }\n  }\n\n  ticks.sort(function (a, b) {\n    return a.value - b.value;\n  });\n  var result = [];\n\n  for (var i = 0; i < ticks.length; ++i) {\n    if (i === 0 || ticks[i].value !== ticks[i - 1].value) {\n      result.push(ticks[i]);\n    }\n  }\n\n  return result;\n}\n\nScale_1[\"default\"].registerClass(TimeScale);\nexports[\"default\"] = TimeScale;","map":{"version":3,"sources":["/Users/wanglijie/wanglijie/clover-defi-wallet/node_modules/echarts/lib/scale/Time.js"],"names":["exports","__esModule","tslib_1","require","numberUtil","time_1","scaleHelper","Interval_1","Scale_1","log_1","util_1","bisect","a","x","lo","hi","mid","TimeScale","_super","__extends","settings","_this","call","type","prototype","getLabel","tick","useUTC","getSetting","format","value","fullLeveledFormatter","getDefaultFormatPrecisionOfInterval","getPrimaryTimeUnit","_minLevelUnit","second","getFormattedLabel","idx","labelFormatter","isUTC","lang","leveledFormat","getTicks","expandToNicedExtent","interval","_interval","extent","_extent","ticks","push","level","innerTicks","getIntervalTicks","_approxInterval","concat","niceExtent","opt","ONE_DAY","Infinity","d","Date","getFullYear","getMonth","getDate","niceTicks","splitNumber","minInterval","maxInterval","approxTickNum","span","scaleIntervalsLen","scaleIntervals","length","Math","min","max","parse","val","parseDate","contain","normalize","scale","ONE_SECOND","ONE_MINUTE","ONE_HOUR","ONE_YEAR","isUnitValueSame","unit","valueA","valueB","dateA","dateB","isSame","getUnitValue","isSameYear","isSameMonth","isSameDay","isSameHour","isSameMinute","isSameSecond","isSameMilliSecond","getDateInterval","approxInterval","daysInMonth","getMonthInterval","APPROX_ONE_MONTH","getHourInterval","getMinutesAndSecondsInterval","isMinutes","getMillisecondsInterval","nice","getFirstTimestampOfUnit","date","unitName","outDate","monthSetterName","dateSetterName","hoursSetterName","minutesSetterName","secondsSetterName","millisecondsSetterName","getTime","bottomUnitName","safeLimit","unitNames","timeUnits","iter","addTicksInSpan","minTimestamp","maxTimestamp","getMethodName","setMethodName","isDate","out","dateTime","notAdd","addLevelTicks","lastLevelTicks","levelTicks","newAddedTicks","isFirstLevel","i","startTick","endTick","getterName","setterName","round","fullYearGetterName","fullYearSetterName","monthGetterName","dateGetterName","hoursGetterName","minutesGetterName","secondsGetterName","millisecondsGetterName","unshift","levelsTicks","currentLevelTicks","tickCount","lastLevelTickCount","primaryTimeUnit","isPrimaryTimeUnit","nextPrimaryTimeUnit","sort","b","levelTicksRemoveDuplicated","i_1","tickValue","targetTickNum","process","env","NODE_ENV","warn","levelsTicksInExtent","filter","map","maxLevel","k","result","registerClass"],"mappings":"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","sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n\"use strict\";\n\nexports.__esModule = true;\n\nvar tslib_1 = require(\"tslib\");\n\nvar numberUtil = require(\"../util/number\");\n\nvar time_1 = require(\"../util/time\");\n\nvar scaleHelper = require(\"./helper\");\n\nvar Interval_1 = require(\"./Interval\");\n\nvar Scale_1 = require(\"./Scale\");\n\nvar log_1 = require(\"../util/log\");\n\nvar util_1 = require(\"zrender/lib/core/util\");\n\nvar bisect = function (a, x, lo, hi) {\n  while (lo < hi) {\n    var mid = lo + hi >>> 1;\n\n    if (a[mid][1] < x) {\n      lo = mid + 1;\n    } else {\n      hi = mid;\n    }\n  }\n\n  return lo;\n};\n\nvar TimeScale = function (_super) {\n  tslib_1.__extends(TimeScale, _super);\n\n  function TimeScale(settings) {\n    var _this = _super.call(this, settings) || this;\n\n    _this.type = 'time';\n    return _this;\n  }\n\n  TimeScale.prototype.getLabel = function (tick) {\n    var useUTC = this.getSetting('useUTC');\n    return time_1.format(tick.value, time_1.fullLeveledFormatter[time_1.getDefaultFormatPrecisionOfInterval(time_1.getPrimaryTimeUnit(this._minLevelUnit))] || time_1.fullLeveledFormatter.second, useUTC, this.getSetting('locale'));\n  };\n\n  TimeScale.prototype.getFormattedLabel = function (tick, idx, labelFormatter) {\n    var isUTC = this.getSetting('useUTC');\n    var lang = this.getSetting('locale');\n    return time_1.leveledFormat(tick, idx, labelFormatter, lang, isUTC);\n  };\n\n  TimeScale.prototype.getTicks = function (expandToNicedExtent) {\n    var interval = this._interval;\n    var extent = this._extent;\n    var ticks = [];\n\n    if (!interval) {\n      return ticks;\n    }\n\n    ticks.push({\n      value: extent[0],\n      level: 0\n    });\n    var useUTC = this.getSetting('useUTC');\n    var innerTicks = getIntervalTicks(this._minLevelUnit, this._approxInterval, useUTC, extent);\n    ticks = ticks.concat(innerTicks);\n    ticks.push({\n      value: extent[1],\n      level: 0\n    });\n    return ticks;\n  };\n\n  TimeScale.prototype.niceExtent = function (opt) {\n    var extent = this._extent;\n\n    if (extent[0] === extent[1]) {\n      extent[0] -= time_1.ONE_DAY;\n      extent[1] += time_1.ONE_DAY;\n    }\n\n    if (extent[1] === -Infinity && extent[0] === Infinity) {\n      var d = new Date();\n      extent[1] = +new Date(d.getFullYear(), d.getMonth(), d.getDate());\n      extent[0] = extent[1] - time_1.ONE_DAY;\n    }\n\n    this.niceTicks(opt.splitNumber, opt.minInterval, opt.maxInterval);\n  };\n\n  TimeScale.prototype.niceTicks = function (approxTickNum, minInterval, maxInterval) {\n    approxTickNum = approxTickNum || 10;\n    var extent = this._extent;\n    var span = extent[1] - extent[0];\n    this._approxInterval = span / approxTickNum;\n\n    if (minInterval != null && this._approxInterval < minInterval) {\n      this._approxInterval = minInterval;\n    }\n\n    if (maxInterval != null && this._approxInterval > maxInterval) {\n      this._approxInterval = maxInterval;\n    }\n\n    var scaleIntervalsLen = scaleIntervals.length;\n    var idx = Math.min(bisect(scaleIntervals, this._approxInterval, 0, scaleIntervalsLen), scaleIntervalsLen - 1);\n    this._interval = scaleIntervals[idx][1];\n    this._minLevelUnit = scaleIntervals[Math.max(idx - 1, 0)][0];\n  };\n\n  TimeScale.prototype.parse = function (val) {\n    return typeof val === 'number' ? val : +numberUtil.parseDate(val);\n  };\n\n  TimeScale.prototype.contain = function (val) {\n    return scaleHelper.contain(this.parse(val), this._extent);\n  };\n\n  TimeScale.prototype.normalize = function (val) {\n    return scaleHelper.normalize(this.parse(val), this._extent);\n  };\n\n  TimeScale.prototype.scale = function (val) {\n    return scaleHelper.scale(val, this._extent);\n  };\n\n  TimeScale.type = 'time';\n  return TimeScale;\n}(Interval_1[\"default\"]);\n\nvar scaleIntervals = [['second', time_1.ONE_SECOND], ['minute', time_1.ONE_MINUTE], ['hour', time_1.ONE_HOUR], ['quarter-day', time_1.ONE_HOUR * 6], ['half-day', time_1.ONE_HOUR * 12], ['day', time_1.ONE_DAY * 1.2], ['half-week', time_1.ONE_DAY * 3.5], ['week', time_1.ONE_DAY * 7], ['month', time_1.ONE_DAY * 31], ['quarter', time_1.ONE_DAY * 95], ['half-year', time_1.ONE_YEAR / 2], ['year', time_1.ONE_YEAR]];\n\nfunction isUnitValueSame(unit, valueA, valueB, isUTC) {\n  var dateA = numberUtil.parseDate(valueA);\n  var dateB = numberUtil.parseDate(valueB);\n\n  var isSame = function (unit) {\n    return time_1.getUnitValue(dateA, unit, isUTC) === time_1.getUnitValue(dateB, unit, isUTC);\n  };\n\n  var isSameYear = function () {\n    return isSame('year');\n  };\n\n  var isSameMonth = function () {\n    return isSameYear() && isSame('month');\n  };\n\n  var isSameDay = function () {\n    return isSameMonth() && isSame('day');\n  };\n\n  var isSameHour = function () {\n    return isSameDay() && isSame('hour');\n  };\n\n  var isSameMinute = function () {\n    return isSameHour() && isSame('minute');\n  };\n\n  var isSameSecond = function () {\n    return isSameMinute() && isSame('second');\n  };\n\n  var isSameMilliSecond = function () {\n    return isSameSecond() && isSame('millisecond');\n  };\n\n  switch (unit) {\n    case 'year':\n      return isSameYear();\n\n    case 'month':\n      return isSameMonth();\n\n    case 'day':\n      return isSameDay();\n\n    case 'hour':\n      return isSameHour();\n\n    case 'minute':\n      return isSameMinute();\n\n    case 'second':\n      return isSameSecond();\n\n    case 'millisecond':\n      return isSameMilliSecond();\n  }\n}\n\nfunction getDateInterval(approxInterval, daysInMonth) {\n  approxInterval /= time_1.ONE_DAY;\n  return approxInterval > 16 ? 16 : approxInterval > 7.5 ? 7 : approxInterval > 3.5 ? 4 : approxInterval > 1.5 ? 2 : 1;\n}\n\nfunction getMonthInterval(approxInterval) {\n  var APPROX_ONE_MONTH = 30 * time_1.ONE_DAY;\n  approxInterval /= APPROX_ONE_MONTH;\n  return approxInterval > 6 ? 6 : approxInterval > 3 ? 3 : approxInterval > 2 ? 2 : 1;\n}\n\nfunction getHourInterval(approxInterval) {\n  approxInterval /= time_1.ONE_HOUR;\n  return approxInterval > 12 ? 12 : approxInterval > 6 ? 6 : approxInterval > 3.5 ? 4 : approxInterval > 2 ? 2 : 1;\n}\n\nfunction getMinutesAndSecondsInterval(approxInterval, isMinutes) {\n  approxInterval /= isMinutes ? time_1.ONE_MINUTE : time_1.ONE_SECOND;\n  return approxInterval > 30 ? 30 : approxInterval > 20 ? 20 : approxInterval > 15 ? 15 : approxInterval > 10 ? 10 : approxInterval > 5 ? 5 : approxInterval > 2 ? 2 : 1;\n}\n\nfunction getMillisecondsInterval(approxInterval) {\n  return numberUtil.nice(approxInterval, true);\n}\n\nfunction getFirstTimestampOfUnit(date, unitName, isUTC) {\n  var outDate = new Date(date);\n\n  switch (time_1.getPrimaryTimeUnit(unitName)) {\n    case 'year':\n    case 'month':\n      outDate[time_1.monthSetterName(isUTC)](0);\n\n    case 'day':\n      outDate[time_1.dateSetterName(isUTC)](1);\n\n    case 'hour':\n      outDate[time_1.hoursSetterName(isUTC)](0);\n\n    case 'minute':\n      outDate[time_1.minutesSetterName(isUTC)](0);\n\n    case 'second':\n      outDate[time_1.secondsSetterName(isUTC)](0);\n      outDate[time_1.millisecondsSetterName(isUTC)](0);\n  }\n\n  return outDate.getTime();\n}\n\nfunction getIntervalTicks(bottomUnitName, approxInterval, isUTC, extent) {\n  var safeLimit = 10000;\n  var unitNames = time_1.timeUnits;\n  var iter = 0;\n\n  function addTicksInSpan(interval, minTimestamp, maxTimestamp, getMethodName, setMethodName, isDate, out) {\n    var date = new Date(minTimestamp);\n    var dateTime = minTimestamp;\n    var d = date[getMethodName]();\n\n    while (dateTime < maxTimestamp && dateTime <= extent[1]) {\n      out.push({\n        value: dateTime\n      });\n      d += interval;\n      date[setMethodName](d);\n      dateTime = date.getTime();\n    }\n\n    out.push({\n      value: dateTime,\n      notAdd: true\n    });\n  }\n\n  function addLevelTicks(unitName, lastLevelTicks, levelTicks) {\n    var newAddedTicks = [];\n    var isFirstLevel = !lastLevelTicks.length;\n\n    if (isUnitValueSame(time_1.getPrimaryTimeUnit(unitName), extent[0], extent[1], isUTC)) {\n      return;\n    }\n\n    if (isFirstLevel) {\n      lastLevelTicks = [{\n        value: getFirstTimestampOfUnit(new Date(extent[0]), unitName, isUTC)\n      }, {\n        value: extent[1]\n      }];\n    }\n\n    for (var i = 0; i < lastLevelTicks.length - 1; i++) {\n      var startTick = lastLevelTicks[i].value;\n      var endTick = lastLevelTicks[i + 1].value;\n\n      if (startTick === endTick) {\n        continue;\n      }\n\n      var interval = void 0;\n      var getterName = void 0;\n      var setterName = void 0;\n      var isDate = false;\n\n      switch (unitName) {\n        case 'year':\n          interval = Math.max(1, Math.round(approxInterval / time_1.ONE_DAY / 365));\n          getterName = time_1.fullYearGetterName(isUTC);\n          setterName = time_1.fullYearSetterName(isUTC);\n          break;\n\n        case 'half-year':\n        case 'quarter':\n        case 'month':\n          interval = getMonthInterval(approxInterval);\n          getterName = time_1.monthGetterName(isUTC);\n          setterName = time_1.monthSetterName(isUTC);\n          break;\n\n        case 'week':\n        case 'half-week':\n        case 'day':\n          interval = getDateInterval(approxInterval, 31);\n          getterName = time_1.dateGetterName(isUTC);\n          setterName = time_1.dateSetterName(isUTC);\n          isDate = true;\n          break;\n\n        case 'half-day':\n        case 'quarter-day':\n        case 'hour':\n          interval = getHourInterval(approxInterval);\n          getterName = time_1.hoursGetterName(isUTC);\n          setterName = time_1.hoursSetterName(isUTC);\n          break;\n\n        case 'minute':\n          interval = getMinutesAndSecondsInterval(approxInterval, true);\n          getterName = time_1.minutesGetterName(isUTC);\n          setterName = time_1.minutesSetterName(isUTC);\n          break;\n\n        case 'second':\n          interval = getMinutesAndSecondsInterval(approxInterval, false);\n          getterName = time_1.secondsGetterName(isUTC);\n          setterName = time_1.secondsSetterName(isUTC);\n          break;\n\n        case 'millisecond':\n          interval = getMillisecondsInterval(approxInterval);\n          getterName = time_1.millisecondsGetterName(isUTC);\n          setterName = time_1.millisecondsSetterName(isUTC);\n          break;\n      }\n\n      addTicksInSpan(interval, startTick, endTick, getterName, setterName, isDate, newAddedTicks);\n\n      if (unitName === 'year' && levelTicks.length > 1 && i === 0) {\n        levelTicks.unshift({\n          value: levelTicks[0].value - interval\n        });\n      }\n    }\n\n    for (var i = 0; i < newAddedTicks.length; i++) {\n      levelTicks.push(newAddedTicks[i]);\n    }\n\n    return newAddedTicks;\n  }\n\n  var levelsTicks = [];\n  var currentLevelTicks = [];\n  var tickCount = 0;\n  var lastLevelTickCount = 0;\n\n  for (var i = 0; i < unitNames.length && iter++ < safeLimit; ++i) {\n    var primaryTimeUnit = time_1.getPrimaryTimeUnit(unitNames[i]);\n\n    if (!time_1.isPrimaryTimeUnit(unitNames[i])) {\n      continue;\n    }\n\n    addLevelTicks(unitNames[i], levelsTicks[levelsTicks.length - 1] || [], currentLevelTicks);\n    var nextPrimaryTimeUnit = unitNames[i + 1] ? time_1.getPrimaryTimeUnit(unitNames[i + 1]) : null;\n\n    if (primaryTimeUnit !== nextPrimaryTimeUnit) {\n      if (currentLevelTicks.length) {\n        lastLevelTickCount = tickCount;\n        currentLevelTicks.sort(function (a, b) {\n          return a.value - b.value;\n        });\n        var levelTicksRemoveDuplicated = [];\n\n        for (var i_1 = 0; i_1 < currentLevelTicks.length; ++i_1) {\n          var tickValue = currentLevelTicks[i_1].value;\n\n          if (i_1 === 0 || currentLevelTicks[i_1 - 1].value !== tickValue) {\n            levelTicksRemoveDuplicated.push(currentLevelTicks[i_1]);\n\n            if (tickValue >= extent[0] && tickValue <= extent[1]) {\n              tickCount++;\n            }\n          }\n        }\n\n        var targetTickNum = (extent[1] - extent[0]) / approxInterval;\n\n        if (tickCount > targetTickNum * 1.5 && lastLevelTickCount > targetTickNum / 1.5) {\n          break;\n        }\n\n        levelsTicks.push(levelTicksRemoveDuplicated);\n\n        if (tickCount > targetTickNum || bottomUnitName === unitNames[i]) {\n          break;\n        }\n      }\n\n      currentLevelTicks = [];\n    }\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (iter >= safeLimit) {\n      log_1.warn('Exceed safe limit.');\n    }\n  }\n\n  var levelsTicksInExtent = util_1.filter(util_1.map(levelsTicks, function (levelTicks) {\n    return util_1.filter(levelTicks, function (tick) {\n      return tick.value >= extent[0] && tick.value <= extent[1] && !tick.notAdd;\n    });\n  }), function (levelTicks) {\n    return levelTicks.length > 0;\n  });\n  var ticks = [];\n  var maxLevel = levelsTicksInExtent.length - 1;\n\n  for (var i = 0; i < levelsTicksInExtent.length; ++i) {\n    var levelTicks = levelsTicksInExtent[i];\n\n    for (var k = 0; k < levelTicks.length; ++k) {\n      ticks.push({\n        value: levelTicks[k].value,\n        level: maxLevel - i\n      });\n    }\n  }\n\n  ticks.sort(function (a, b) {\n    return a.value - b.value;\n  });\n  var result = [];\n\n  for (var i = 0; i < ticks.length; ++i) {\n    if (i === 0 || ticks[i].value !== ticks[i - 1].value) {\n      result.push(ticks[i]);\n    }\n  }\n\n  return result;\n}\n\nScale_1[\"default\"].registerClass(TimeScale);\nexports[\"default\"] = TimeScale;"]},"metadata":{},"sourceType":"script"}