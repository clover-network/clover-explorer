{"ast":null,"code":"import { __extends } from \"tslib\";\nimport { Plot } from '../../core/plot';\nimport { adaptor } from './adaptor';\n/**\n *  桑基图 Sankey\n */\n\nvar Sankey =\n/** @class */\nfunction (_super) {\n  __extends(Sankey, _super);\n\n  function Sankey() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    /** 图表类型 */\n\n\n    _this.type = 'sankey';\n    return _this;\n  }\n\n  Sankey.prototype.getDefaultOptions = function () {\n    return {\n      appendPadding: 8,\n      syncViewPadding: true,\n      nodeStyle: {\n        opacity: 1,\n        fillOpacity: 1,\n        lineWidth: 1\n      },\n      edgeStyle: {\n        opacity: 0.3,\n        lineWidth: 0\n      },\n      label: {\n        fields: ['x', 'name'],\n        callback: function (x, name) {\n          var isLast = x[1] === 1; // 最后一列靠边的节点\n\n          return {\n            style: {\n              fill: '#545454',\n              textAlign: isLast ? 'end' : 'start'\n            },\n            offsetX: isLast ? -8 : 8,\n            content: name\n          };\n        }\n      },\n      tooltip: {\n        showTitle: false,\n        showMarkers: false,\n        fields: ['source', 'target', 'value'],\n        formatter: function (datum) {\n          var source = datum.source,\n              target = datum.target,\n              value = datum.value;\n          return {\n            name: source + ' -> ' + target,\n            value: value\n          };\n        }\n      },\n      nodeWidthRatio: 0.008,\n      nodePaddingRatio: 0.01\n    };\n  };\n  /**\n   * 获取适配器\n   */\n\n\n  Sankey.prototype.getSchemaAdaptor = function () {\n    return adaptor;\n  };\n\n  return Sankey;\n}(Plot);\n\nexport { Sankey };","map":{"version":3,"sources":["../../../src/plots/sankey/index.ts"],"names":[],"mappings":";AAAA,SAAS,IAAT,QAAqB,iBAArB;AAIA,SAAS,OAAT,QAAwB,WAAxB;AAIA;;AAEG;;AACH,IAAA,MAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAA4B,EAAA,SAAA,CAAA,MAAA,EAAA,MAAA,CAAA;;AAA5B,WAAA,MAAA,GAAA;AAAA,QAAA,KAAA,GAAA,MAAA,KAAA,IAAA,IAAA,MAAA,CAAA,KAAA,CAAA,IAAA,EAAA,SAAA,CAAA,IAAA,IAAA;AACE;;;AACO,IAAA,KAAA,CAAA,IAAA,GAAe,QAAf;;AAoDR;;AAlDW,EAAA,MAAA,CAAA,SAAA,CAAA,iBAAA,GAAV,YAAA;AACE,WAAO;AACL,MAAA,aAAa,EAAE,CADV;AAEL,MAAA,eAAe,EAAE,IAFZ;AAGL,MAAA,SAAS,EAAE;AACT,QAAA,OAAO,EAAE,CADA;AAET,QAAA,WAAW,EAAE,CAFJ;AAGT,QAAA,SAAS,EAAE;AAHF,OAHN;AAQL,MAAA,SAAS,EAAE;AACT,QAAA,OAAO,EAAE,GADA;AAET,QAAA,SAAS,EAAE;AAFF,OARN;AAYL,MAAA,KAAK,EAAE;AACL,QAAA,MAAM,EAAE,CAAC,GAAD,EAAM,MAAN,CADH;AAEL,QAAA,QAAQ,EAAE,UAAC,CAAD,EAAc,IAAd,EAA0B;AAClC,cAAM,MAAM,GAAG,CAAC,CAAC,CAAD,CAAD,KAAS,CAAxB,CADkC,CACP;;AAC3B,iBAAO;AACL,YAAA,KAAK,EAAE;AACL,cAAA,IAAI,EAAE,SADD;AAEL,cAAA,SAAS,EAAE,MAAM,GAAG,KAAH,GAAW;AAFvB,aADF;AAKL,YAAA,OAAO,EAAE,MAAM,GAAG,CAAC,CAAJ,GAAQ,CALlB;AAML,YAAA,OAAO,EAAE;AANJ,WAAP;AAQD;AAZI,OAZF;AA0BL,MAAA,OAAO,EAAE;AACP,QAAA,SAAS,EAAE,KADJ;AAEP,QAAA,WAAW,EAAE,KAFN;AAGP,QAAA,MAAM,EAAE,CAAC,QAAD,EAAW,QAAX,EAAqB,OAArB,CAHD;AAIP,QAAA,SAAS,EAAE,UAAC,KAAD,EAAa;AACd,cAAA,MAAM,GAAoB,KAAK,CAAzB,MAAN;AAAA,cAAQ,MAAM,GAAY,KAAK,CAAjB,MAAd;AAAA,cAAgB,KAAK,GAAK,KAAK,CAAV,KAArB;AACR,iBAAO;AACL,YAAA,IAAI,EAAE,MAAM,GAAG,MAAT,GAAkB,MADnB;AAEL,YAAA,KAAK,EAAA;AAFA,WAAP;AAID;AAVM,OA1BJ;AAsCL,MAAA,cAAc,EAAE,KAtCX;AAuCL,MAAA,gBAAgB,EAAE;AAvCb,KAAP;AAyCD,GA1CS;AA4CV;;AAEG;;;AACO,EAAA,MAAA,CAAA,SAAA,CAAA,gBAAA,GAAV,YAAA;AACE,WAAO,OAAP;AACD,GAFS;;AAGZ,SAAA,MAAA;AAAC,CAtDD,CAA4B,IAA5B,CAAA","sourcesContent":["import { Plot } from '../../core/plot';\nimport { Adaptor } from '../../core/adaptor';\nimport { Datum } from '../../types';\nimport { SankeyOptions } from './types';\nimport { adaptor } from './adaptor';\n\nexport { SankeyOptions };\n\n/**\n *  桑基图 Sankey\n */\nexport class Sankey extends Plot<SankeyOptions> {\n  /** 图表类型 */\n  public type: string = 'sankey';\n\n  protected getDefaultOptions() {\n    return {\n      appendPadding: 8,\n      syncViewPadding: true,\n      nodeStyle: {\n        opacity: 1,\n        fillOpacity: 1,\n        lineWidth: 1,\n      },\n      edgeStyle: {\n        opacity: 0.3,\n        lineWidth: 0,\n      },\n      label: {\n        fields: ['x', 'name'],\n        callback: (x: number[], name: string) => {\n          const isLast = x[1] === 1; // 最后一列靠边的节点\n          return {\n            style: {\n              fill: '#545454',\n              textAlign: isLast ? 'end' : 'start',\n            },\n            offsetX: isLast ? -8 : 8,\n            content: name,\n          };\n        },\n      },\n      tooltip: {\n        showTitle: false,\n        showMarkers: false,\n        fields: ['source', 'target', 'value'],\n        formatter: (datum: Datum) => {\n          const { source, target, value } = datum;\n          return {\n            name: source + ' -> ' + target,\n            value,\n          };\n        },\n      },\n      nodeWidthRatio: 0.008,\n      nodePaddingRatio: 0.01,\n    };\n  }\n\n  /**\n   * 获取适配器\n   */\n  protected getSchemaAdaptor(): Adaptor<SankeyOptions> {\n    return adaptor;\n  }\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}