{"ast":null,"code":"import { registerInteraction } from '@antv/g2';\nvar INTERACTION_MAP = {\n  hover: '__interval-connected-area-hover__',\n  click: '__interval-connected-area-click__'\n};\n/** hover 触发的连通区域交互 */\n\nregisterInteraction(INTERACTION_MAP.hover, {\n  start: [{\n    trigger: \"interval:mouseenter\",\n    action: ['element-highlight-by-color:highlight', 'element-link-by-color:link']\n  }],\n  end: [{\n    trigger: 'interval:mouseleave',\n    action: ['element-highlight-by-color:reset', 'element-link-by-color:unlink']\n  }]\n});\n/** click 触发的联通区域交互 */\n\nregisterInteraction(INTERACTION_MAP.click, {\n  start: [{\n    trigger: \"interval:click\",\n    action: ['element-highlight-by-color:clear', 'element-highlight-by-color:highlight', 'element-link-by-color:clear', 'element-link-by-color:unlink', 'element-link-by-color:link']\n  }],\n  end: [{\n    trigger: 'document:mousedown',\n    action: ['element-highlight-by-color:clear', 'element-link-by-color:clear']\n  }]\n});\n/**\n * 返回支持联通区域组件交互的 adaptor，适用于堆叠柱形图/堆叠条形图\n * @param disable\n */\n\nexport function connectedArea(disable) {\n  if (disable === void 0) {\n    disable = false;\n  }\n\n  return function (params) {\n    var chart = params.chart,\n        options = params.options;\n    var connectedArea = options.connectedArea;\n\n    var clear = function () {\n      chart.removeInteraction(INTERACTION_MAP.hover);\n      chart.removeInteraction(INTERACTION_MAP.click);\n    };\n\n    if (!disable && connectedArea) {\n      var trigger = connectedArea.trigger || 'hover';\n      clear();\n      chart.interaction(INTERACTION_MAP[trigger]);\n    } else {\n      clear();\n    }\n\n    return params;\n  };\n}","map":{"version":3,"sources":["../../src/adaptor/connected-area.ts"],"names":[],"mappings":"AAAA,SAAS,mBAAT,QAAoC,UAApC;AAaA,IAAM,eAAe,GAAG;AACtB,EAAA,KAAK,EAAE,mCADe;AAEtB,EAAA,KAAK,EAAE;AAFe,CAAxB;AAKA;;AACA,mBAAmB,CAAC,eAAe,CAAC,KAAjB,EAAwB;AACzC,EAAA,KAAK,EAAE,CACL;AACE,IAAA,OAAO,EAAE,qBADX;AAEE,IAAA,MAAM,EAAE,CAAC,sCAAD,EAAyC,4BAAzC;AAFV,GADK,CADkC;AAOzC,EAAA,GAAG,EAAE,CACH;AACE,IAAA,OAAO,EAAE,qBADX;AAEE,IAAA,MAAM,EAAE,CAAC,kCAAD,EAAqC,8BAArC;AAFV,GADG;AAPoC,CAAxB,CAAnB;AAeA;;AACA,mBAAmB,CAAC,eAAe,CAAC,KAAjB,EAAwB;AACzC,EAAA,KAAK,EAAE,CACL;AACE,IAAA,OAAO,EAAE,gBADX;AAEE,IAAA,MAAM,EAAE,CACN,kCADM,EAEN,sCAFM,EAGN,6BAHM,EAIN,8BAJM,EAKN,4BALM;AAFV,GADK,CADkC;AAazC,EAAA,GAAG,EAAE,CACH;AACE,IAAA,OAAO,EAAE,oBADX;AAEE,IAAA,MAAM,EAAE,CAAC,kCAAD,EAAqC,6BAArC;AAFV,GADG;AAboC,CAAxB,CAAnB;AAqBA;;;AAGG;;AACH,OAAM,SAAU,aAAV,CAA2D,OAA3D,EAA0E;AAAf,MAAA,OAAA,KAAA,KAAA,CAAA,EAAA;AAAA,IAAA,OAAA,GAAA,KAAA;AAAe;;AAC9E,SAAO,UAAU,MAAV,EAA2B;AACxB,QAAA,KAAK,GAAc,MAAM,CAApB,KAAL;AAAA,QAAO,OAAO,GAAK,MAAM,CAAX,OAAd;AACA,QAAA,aAAa,GAAK,OAAO,CAAZ,aAAb;;AAER,QAAM,KAAK,GAAG,YAAA;AACZ,MAAA,KAAK,CAAC,iBAAN,CAAwB,eAAe,CAAC,KAAxC;AACA,MAAA,KAAK,CAAC,iBAAN,CAAwB,eAAe,CAAC,KAAxC;AACD,KAHD;;AAKA,QAAI,CAAC,OAAD,IAAY,aAAhB,EAA+B;AAC7B,UAAM,OAAO,GAAG,aAAa,CAAC,OAAd,IAAyB,OAAzC;AACA,MAAA,KAAK;AACL,MAAA,KAAK,CAAC,WAAN,CAAkB,eAAe,CAAC,OAAD,CAAjC;AACD,KAJD,MAIO;AACL,MAAA,KAAK;AACN;;AAED,WAAO,MAAP;AACD,GAlBD;AAmBD","sourcesContent":["import { registerInteraction } from '@antv/g2';\nimport { Params } from '../core/adaptor';\n\nexport interface ConnectedAreaOptions {\n  /** 触发方式, 默认 hover */\n  trigger?: 'hover' | 'click';\n}\n\n/** 联通区域组件：使用于堆叠柱形图、堆叠条形图 */\nexport interface OptionWithConnectedArea {\n  connectedArea?: ConnectedAreaOptions | false;\n}\n\nconst INTERACTION_MAP = {\n  hover: '__interval-connected-area-hover__',\n  click: '__interval-connected-area-click__',\n};\n\n/** hover 触发的连通区域交互 */\nregisterInteraction(INTERACTION_MAP.hover, {\n  start: [\n    {\n      trigger: `interval:mouseenter`,\n      action: ['element-highlight-by-color:highlight', 'element-link-by-color:link'],\n    },\n  ],\n  end: [\n    {\n      trigger: 'interval:mouseleave',\n      action: ['element-highlight-by-color:reset', 'element-link-by-color:unlink'],\n    },\n  ],\n});\n\n/** click 触发的联通区域交互 */\nregisterInteraction(INTERACTION_MAP.click, {\n  start: [\n    {\n      trigger: `interval:click`,\n      action: [\n        'element-highlight-by-color:clear',\n        'element-highlight-by-color:highlight',\n        'element-link-by-color:clear',\n        'element-link-by-color:unlink',\n        'element-link-by-color:link',\n      ],\n    },\n  ],\n  end: [\n    {\n      trigger: 'document:mousedown',\n      action: ['element-highlight-by-color:clear', 'element-link-by-color:clear'],\n    },\n  ],\n});\n\n/**\n * 返回支持联通区域组件交互的 adaptor，适用于堆叠柱形图/堆叠条形图\n * @param disable\n */\nexport function connectedArea<O extends OptionWithConnectedArea>(disable = false) {\n  return function (params: Params<O>): Params<O> {\n    const { chart, options } = params;\n    const { connectedArea } = options;\n\n    const clear = () => {\n      chart.removeInteraction(INTERACTION_MAP.hover);\n      chart.removeInteraction(INTERACTION_MAP.click);\n    };\n\n    if (!disable && connectedArea) {\n      const trigger = connectedArea.trigger || 'hover';\n      clear();\n      chart.interaction(INTERACTION_MAP[trigger]);\n    } else {\n      clear();\n    }\n\n    return params;\n  };\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}