{"ast":null,"code":"/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\nimport * as echarts from '../../echarts';\nimport RoamController from '../../component/helper/RoamController';\nimport * as throttleUtil from '../../util/throttle';\nimport { makeInner } from '../../util/model';\nimport { each, curry, createHashMap } from 'zrender/esm/core/util';\nimport { collectReferCoordSysModelInfo } from './helper';\nvar inner = makeInner();\necharts.registerProcessor(echarts.PRIORITY.PROCESSOR.FILTER, function (ecModel, api) {\n  var apiInner = inner(api);\n  var coordSysRecordMap = apiInner.coordSysRecordMap || (apiInner.coordSysRecordMap = createHashMap());\n  coordSysRecordMap.each(function (coordSysRecord) {\n    coordSysRecord.dataZoomInfoMap = null;\n  });\n  ecModel.eachComponent({\n    mainType: 'dataZoom',\n    subType: 'inside'\n  }, function (dataZoomModel) {\n    var dzReferCoordSysWrap = collectReferCoordSysModelInfo(dataZoomModel);\n    each(dzReferCoordSysWrap.infoList, function (dzCoordSysInfo) {\n      var coordSysUid = dzCoordSysInfo.model.uid;\n      var coordSysRecord = coordSysRecordMap.get(coordSysUid) || coordSysRecordMap.set(coordSysUid, createCoordSysRecord(api, dzCoordSysInfo.model));\n      var dataZoomInfoMap = coordSysRecord.dataZoomInfoMap || (coordSysRecord.dataZoomInfoMap = createHashMap());\n      dataZoomInfoMap.set(dataZoomModel.uid, {\n        dzReferCoordSysInfo: dzCoordSysInfo,\n        model: dataZoomModel,\n        getRange: null\n      });\n    });\n  });\n  coordSysRecordMap.each(function (coordSysRecord) {\n    var controller = coordSysRecord.controller;\n    var firstDzInfo;\n    var dataZoomInfoMap = coordSysRecord.dataZoomInfoMap;\n\n    if (dataZoomInfoMap) {\n      var firstDzKey = dataZoomInfoMap.keys()[0];\n\n      if (firstDzKey != null) {\n        firstDzInfo = dataZoomInfoMap.get(firstDzKey);\n      }\n    }\n\n    if (!firstDzInfo) {\n      disposeCoordSysRecord(coordSysRecordMap, coordSysRecord);\n      return;\n    }\n\n    var controllerParams = mergeControllerParams(dataZoomInfoMap);\n    controller.enable(controllerParams.controlType, controllerParams.opt);\n    controller.setPointerChecker(coordSysRecord.containsPoint);\n    throttleUtil.createOrUpdate(coordSysRecord, 'dispatchAction', firstDzInfo.model.get('throttle', true), 'fixRate');\n  });\n});\nexport function setViewInfoToCoordSysRecord(api, dataZoomModel, getRange) {\n  inner(api).coordSysRecordMap.each(function (coordSysRecord) {\n    var dzInfo = coordSysRecord.dataZoomInfoMap.get(dataZoomModel.uid);\n\n    if (dzInfo) {\n      dzInfo.getRange = getRange;\n    }\n  });\n}\nexport function disposeCoordSysRecordIfNeeded(api, dataZoomModel) {\n  var coordSysRecordMap = inner(api).coordSysRecordMap;\n  var coordSysKeyArr = coordSysRecordMap.keys();\n\n  for (var i = 0; i < coordSysKeyArr.length; i++) {\n    var coordSysKey = coordSysKeyArr[i];\n    var coordSysRecord = coordSysRecordMap.get(coordSysKey);\n    var dataZoomInfoMap = coordSysRecord.dataZoomInfoMap;\n\n    if (dataZoomInfoMap) {\n      var dzUid = dataZoomModel.uid;\n      var dzInfo = dataZoomInfoMap.get(dzUid);\n\n      if (dzInfo) {\n        dataZoomInfoMap.removeKey(dzUid);\n\n        if (!dataZoomInfoMap.keys().length) {\n          disposeCoordSysRecord(coordSysRecordMap, coordSysRecord);\n        }\n      }\n    }\n  }\n}\n\nfunction disposeCoordSysRecord(coordSysRecordMap, coordSysRecord) {\n  if (coordSysRecord) {\n    coordSysRecordMap.removeKey(coordSysRecord.model.uid);\n    var controller = coordSysRecord.controller;\n    controller && controller.dispose();\n  }\n}\n\nfunction createCoordSysRecord(api, coordSysModel) {\n  var coordSysRecord = {\n    model: coordSysModel,\n    containsPoint: curry(containsPoint, coordSysModel),\n    dispatchAction: curry(dispatchAction, api),\n    dataZoomInfoMap: null,\n    controller: null\n  };\n  var controller = coordSysRecord.controller = new RoamController(api.getZr());\n  each(['pan', 'zoom', 'scrollMove'], function (eventName) {\n    controller.on(eventName, function (event) {\n      var batch = [];\n      coordSysRecord.dataZoomInfoMap.each(function (dzInfo) {\n        if (!event.isAvailableBehavior(dzInfo.model.option)) {\n          return;\n        }\n\n        var method = (dzInfo.getRange || {})[eventName];\n        var range = method && method(dzInfo.dzReferCoordSysInfo, coordSysRecord.model.mainType, coordSysRecord.controller, event);\n        !dzInfo.model.get('disabled', true) && range && batch.push({\n          dataZoomId: dzInfo.model.id,\n          start: range[0],\n          end: range[1]\n        });\n      });\n      batch.length && coordSysRecord.dispatchAction(batch);\n    });\n  });\n  return coordSysRecord;\n}\n\nfunction dispatchAction(api, batch) {\n  api.dispatchAction({\n    type: 'dataZoom',\n    animation: {\n      easing: 'cubicOut',\n      duration: 100\n    },\n    batch: batch\n  });\n}\n\nfunction containsPoint(coordSysModel, e, x, y) {\n  return coordSysModel.coordinateSystem.containPoint([x, y]);\n}\n\nfunction mergeControllerParams(dataZoomInfoMap) {\n  var controlType;\n  var prefix = 'type_';\n  var typePriority = {\n    'type_true': 2,\n    'type_move': 1,\n    'type_false': 0,\n    'type_undefined': -1\n  };\n  var preventDefaultMouseMove = true;\n  dataZoomInfoMap.each(function (dataZoomInfo) {\n    var dataZoomModel = dataZoomInfo.model;\n    var oneType = dataZoomModel.get('disabled', true) ? false : dataZoomModel.get('zoomLock', true) ? 'move' : true;\n\n    if (typePriority[prefix + oneType] > typePriority[prefix + controlType]) {\n      controlType = oneType;\n    }\n\n    preventDefaultMouseMove = preventDefaultMouseMove && dataZoomModel.get('preventDefaultMouseMove', true);\n  });\n  return {\n    controlType: controlType,\n    opt: {\n      zoomOnMouseWheel: true,\n      moveOnMouseMove: true,\n      moveOnMouseWheel: true,\n      preventDefaultMouseMove: !!preventDefaultMouseMove\n    }\n  };\n}","map":{"version":3,"sources":["/Users/wanglijie/wanglijie/clover-defi-wallet/node_modules/echarts/esm/component/dataZoom/roams.js"],"names":["echarts","RoamController","throttleUtil","makeInner","each","curry","createHashMap","collectReferCoordSysModelInfo","inner","registerProcessor","PRIORITY","PROCESSOR","FILTER","ecModel","api","apiInner","coordSysRecordMap","coordSysRecord","dataZoomInfoMap","eachComponent","mainType","subType","dataZoomModel","dzReferCoordSysWrap","infoList","dzCoordSysInfo","coordSysUid","model","uid","get","set","createCoordSysRecord","dzReferCoordSysInfo","getRange","controller","firstDzInfo","firstDzKey","keys","disposeCoordSysRecord","controllerParams","mergeControllerParams","enable","controlType","opt","setPointerChecker","containsPoint","createOrUpdate","setViewInfoToCoordSysRecord","dzInfo","disposeCoordSysRecordIfNeeded","coordSysKeyArr","i","length","coordSysKey","dzUid","removeKey","dispose","coordSysModel","dispatchAction","getZr","eventName","on","event","batch","isAvailableBehavior","option","method","range","push","dataZoomId","id","start","end","type","animation","easing","duration","e","x","y","coordinateSystem","containPoint","prefix","typePriority","preventDefaultMouseMove","dataZoomInfo","oneType","zoomOnMouseWheel","moveOnMouseMove","moveOnMouseWheel"],"mappings":"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","sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\nimport * as echarts from '../../echarts';\nimport RoamController from '../../component/helper/RoamController';\nimport * as throttleUtil from '../../util/throttle';\nimport { makeInner } from '../../util/model';\nimport { each, curry, createHashMap } from 'zrender/esm/core/util';\nimport { collectReferCoordSysModelInfo } from './helper';\nvar inner = makeInner();\necharts.registerProcessor(echarts.PRIORITY.PROCESSOR.FILTER, function (ecModel, api) {\n  var apiInner = inner(api);\n  var coordSysRecordMap = apiInner.coordSysRecordMap || (apiInner.coordSysRecordMap = createHashMap());\n  coordSysRecordMap.each(function (coordSysRecord) {\n    coordSysRecord.dataZoomInfoMap = null;\n  });\n  ecModel.eachComponent({\n    mainType: 'dataZoom',\n    subType: 'inside'\n  }, function (dataZoomModel) {\n    var dzReferCoordSysWrap = collectReferCoordSysModelInfo(dataZoomModel);\n    each(dzReferCoordSysWrap.infoList, function (dzCoordSysInfo) {\n      var coordSysUid = dzCoordSysInfo.model.uid;\n      var coordSysRecord = coordSysRecordMap.get(coordSysUid) || coordSysRecordMap.set(coordSysUid, createCoordSysRecord(api, dzCoordSysInfo.model));\n      var dataZoomInfoMap = coordSysRecord.dataZoomInfoMap || (coordSysRecord.dataZoomInfoMap = createHashMap());\n      dataZoomInfoMap.set(dataZoomModel.uid, {\n        dzReferCoordSysInfo: dzCoordSysInfo,\n        model: dataZoomModel,\n        getRange: null\n      });\n    });\n  });\n  coordSysRecordMap.each(function (coordSysRecord) {\n    var controller = coordSysRecord.controller;\n    var firstDzInfo;\n    var dataZoomInfoMap = coordSysRecord.dataZoomInfoMap;\n\n    if (dataZoomInfoMap) {\n      var firstDzKey = dataZoomInfoMap.keys()[0];\n\n      if (firstDzKey != null) {\n        firstDzInfo = dataZoomInfoMap.get(firstDzKey);\n      }\n    }\n\n    if (!firstDzInfo) {\n      disposeCoordSysRecord(coordSysRecordMap, coordSysRecord);\n      return;\n    }\n\n    var controllerParams = mergeControllerParams(dataZoomInfoMap);\n    controller.enable(controllerParams.controlType, controllerParams.opt);\n    controller.setPointerChecker(coordSysRecord.containsPoint);\n    throttleUtil.createOrUpdate(coordSysRecord, 'dispatchAction', firstDzInfo.model.get('throttle', true), 'fixRate');\n  });\n});\nexport function setViewInfoToCoordSysRecord(api, dataZoomModel, getRange) {\n  inner(api).coordSysRecordMap.each(function (coordSysRecord) {\n    var dzInfo = coordSysRecord.dataZoomInfoMap.get(dataZoomModel.uid);\n\n    if (dzInfo) {\n      dzInfo.getRange = getRange;\n    }\n  });\n}\nexport function disposeCoordSysRecordIfNeeded(api, dataZoomModel) {\n  var coordSysRecordMap = inner(api).coordSysRecordMap;\n  var coordSysKeyArr = coordSysRecordMap.keys();\n\n  for (var i = 0; i < coordSysKeyArr.length; i++) {\n    var coordSysKey = coordSysKeyArr[i];\n    var coordSysRecord = coordSysRecordMap.get(coordSysKey);\n    var dataZoomInfoMap = coordSysRecord.dataZoomInfoMap;\n\n    if (dataZoomInfoMap) {\n      var dzUid = dataZoomModel.uid;\n      var dzInfo = dataZoomInfoMap.get(dzUid);\n\n      if (dzInfo) {\n        dataZoomInfoMap.removeKey(dzUid);\n\n        if (!dataZoomInfoMap.keys().length) {\n          disposeCoordSysRecord(coordSysRecordMap, coordSysRecord);\n        }\n      }\n    }\n  }\n}\n\nfunction disposeCoordSysRecord(coordSysRecordMap, coordSysRecord) {\n  if (coordSysRecord) {\n    coordSysRecordMap.removeKey(coordSysRecord.model.uid);\n    var controller = coordSysRecord.controller;\n    controller && controller.dispose();\n  }\n}\n\nfunction createCoordSysRecord(api, coordSysModel) {\n  var coordSysRecord = {\n    model: coordSysModel,\n    containsPoint: curry(containsPoint, coordSysModel),\n    dispatchAction: curry(dispatchAction, api),\n    dataZoomInfoMap: null,\n    controller: null\n  };\n  var controller = coordSysRecord.controller = new RoamController(api.getZr());\n  each(['pan', 'zoom', 'scrollMove'], function (eventName) {\n    controller.on(eventName, function (event) {\n      var batch = [];\n      coordSysRecord.dataZoomInfoMap.each(function (dzInfo) {\n        if (!event.isAvailableBehavior(dzInfo.model.option)) {\n          return;\n        }\n\n        var method = (dzInfo.getRange || {})[eventName];\n        var range = method && method(dzInfo.dzReferCoordSysInfo, coordSysRecord.model.mainType, coordSysRecord.controller, event);\n        !dzInfo.model.get('disabled', true) && range && batch.push({\n          dataZoomId: dzInfo.model.id,\n          start: range[0],\n          end: range[1]\n        });\n      });\n      batch.length && coordSysRecord.dispatchAction(batch);\n    });\n  });\n  return coordSysRecord;\n}\n\nfunction dispatchAction(api, batch) {\n  api.dispatchAction({\n    type: 'dataZoom',\n    animation: {\n      easing: 'cubicOut',\n      duration: 100\n    },\n    batch: batch\n  });\n}\n\nfunction containsPoint(coordSysModel, e, x, y) {\n  return coordSysModel.coordinateSystem.containPoint([x, y]);\n}\n\nfunction mergeControllerParams(dataZoomInfoMap) {\n  var controlType;\n  var prefix = 'type_';\n  var typePriority = {\n    'type_true': 2,\n    'type_move': 1,\n    'type_false': 0,\n    'type_undefined': -1\n  };\n  var preventDefaultMouseMove = true;\n  dataZoomInfoMap.each(function (dataZoomInfo) {\n    var dataZoomModel = dataZoomInfo.model;\n    var oneType = dataZoomModel.get('disabled', true) ? false : dataZoomModel.get('zoomLock', true) ? 'move' : true;\n\n    if (typePriority[prefix + oneType] > typePriority[prefix + controlType]) {\n      controlType = oneType;\n    }\n\n    preventDefaultMouseMove = preventDefaultMouseMove && dataZoomModel.get('preventDefaultMouseMove', true);\n  });\n  return {\n    controlType: controlType,\n    opt: {\n      zoomOnMouseWheel: true,\n      moveOnMouseMove: true,\n      moveOnMouseWheel: true,\n      preventDefaultMouseMove: !!preventDefaultMouseMove\n    }\n  };\n}"]},"metadata":{},"sourceType":"module"}