{"ast":null,"code":"\"use strict\";\n/*!\n* ZRender, a high performance 2d drawing library.\n*\n* Copyright (c) 2013, Baidu Inc.\n* All rights reserved.\n*\n* LICENSE\n* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt\n*/\n\nexports.__esModule = true;\n\nvar env_1 = require(\"./core/env\");\n\nvar zrUtil = require(\"./core/util\");\n\nvar Handler_1 = require(\"./Handler\");\n\nvar Storage_1 = require(\"./Storage\");\n\nvar Animation_1 = require(\"./animation/Animation\");\n\nvar HandlerProxy_1 = require(\"./dom/HandlerProxy\");\n\nvar export_1 = require(\"./export\");\n\nvar color_1 = require(\"./tool/color\");\n\nvar config_1 = require(\"./config\");\n\nvar useVML = !env_1[\"default\"].canvasSupported;\nvar painterCtors = {};\nvar instances = {};\n\nfunction delInstance(id) {\n  delete instances[id];\n}\n\nfunction isDarkMode(backgroundColor) {\n  if (!backgroundColor) {\n    return false;\n  }\n\n  if (typeof backgroundColor === 'string') {\n    return color_1.lum(backgroundColor, 1) < config_1.DARK_MODE_THRESHOLD;\n  } else if (backgroundColor.colorStops) {\n    var colorStops = backgroundColor.colorStops;\n    var totalLum = 0;\n    var len = colorStops.length;\n\n    for (var i = 0; i < len; i++) {\n      totalLum += color_1.lum(colorStops[i].color, 1);\n    }\n\n    totalLum /= len;\n    return totalLum < config_1.DARK_MODE_THRESHOLD;\n  }\n\n  return false;\n}\n\nvar ZRender = function () {\n  function ZRender(id, dom, opts) {\n    var _this = this;\n\n    this._sleepAfterStill = 10;\n    this._stillFrameAccum = 0;\n    this._needsRefresh = true;\n    this._needsRefreshHover = true;\n    this._darkMode = false;\n    opts = opts || {};\n    this.dom = dom;\n    this.id = id;\n    var self = this;\n    var storage = new Storage_1[\"default\"]();\n    var rendererType = opts.renderer;\n\n    if (useVML) {\n      if (!painterCtors.vml) {\n        throw new Error('You need to require \\'zrender/vml/vml\\' to support IE8');\n      }\n\n      rendererType = 'vml';\n    } else if (!rendererType) {\n      rendererType = 'canvas';\n    }\n\n    if (!painterCtors[rendererType]) {\n      throw new Error(\"Renderer '\" + rendererType + \"' is not imported. Please import it first.\");\n    }\n\n    opts.useDirtyRect = opts.useDirtyRect == null ? false : opts.useDirtyRect;\n    var painter = new painterCtors[rendererType](dom, storage, opts, id);\n    this.storage = storage;\n    this.painter = painter;\n    var handerProxy = !env_1[\"default\"].node && !env_1[\"default\"].worker ? new HandlerProxy_1[\"default\"](painter.getViewportRoot(), painter.root) : null;\n    this.handler = new Handler_1[\"default\"](storage, painter, handerProxy, painter.root);\n    this.animation = new Animation_1[\"default\"]({\n      stage: {\n        update: function () {\n          return _this._flush(true);\n        }\n      }\n    });\n    this.animation.start();\n  }\n\n  ZRender.prototype.add = function (el) {\n    if (!el) {\n      return;\n    }\n\n    this.storage.addRoot(el);\n    el.addSelfToZr(this);\n    this.refresh();\n  };\n\n  ZRender.prototype.remove = function (el) {\n    if (!el) {\n      return;\n    }\n\n    this.storage.delRoot(el);\n    el.removeSelfFromZr(this);\n    this.refresh();\n  };\n\n  ZRender.prototype.configLayer = function (zLevel, config) {\n    if (this.painter.configLayer) {\n      this.painter.configLayer(zLevel, config);\n    }\n\n    this.refresh();\n  };\n\n  ZRender.prototype.setBackgroundColor = function (backgroundColor) {\n    if (this.painter.setBackgroundColor) {\n      this.painter.setBackgroundColor(backgroundColor);\n    }\n\n    this.refresh();\n    this._backgroundColor = backgroundColor;\n    this._darkMode = isDarkMode(backgroundColor);\n  };\n\n  ZRender.prototype.getBackgroundColor = function () {\n    return this._backgroundColor;\n  };\n\n  ZRender.prototype.setDarkMode = function (darkMode) {\n    this._darkMode = darkMode;\n  };\n\n  ZRender.prototype.isDarkMode = function () {\n    return this._darkMode;\n  };\n\n  ZRender.prototype.refreshImmediately = function (fromInside) {\n    if (!fromInside) {\n      this.animation.update(true);\n    }\n\n    this._needsRefresh = false;\n    this.painter.refresh();\n    this._needsRefresh = false;\n  };\n\n  ZRender.prototype.refresh = function () {\n    this._needsRefresh = true;\n    this.animation.start();\n  };\n\n  ZRender.prototype.flush = function () {\n    this._flush(false);\n  };\n\n  ZRender.prototype._flush = function (fromInside) {\n    var triggerRendered;\n    var start = new Date().getTime();\n\n    if (this._needsRefresh) {\n      triggerRendered = true;\n      this.refreshImmediately(fromInside);\n    }\n\n    if (this._needsRefreshHover) {\n      triggerRendered = true;\n      this.refreshHoverImmediately();\n    }\n\n    var end = new Date().getTime();\n\n    if (triggerRendered) {\n      this._stillFrameAccum = 0;\n      this.trigger('rendered', {\n        elapsedTime: end - start\n      });\n    } else if (this._sleepAfterStill > 0) {\n      this._stillFrameAccum++;\n\n      if (this._stillFrameAccum > this._sleepAfterStill) {\n        this.animation.stop();\n      }\n    }\n  };\n\n  ZRender.prototype.setSleepAfterStill = function (stillFramesCount) {\n    this._sleepAfterStill = stillFramesCount;\n  };\n\n  ZRender.prototype.wakeUp = function () {\n    this.animation.start();\n    this._stillFrameAccum = 0;\n  };\n\n  ZRender.prototype.addHover = function (el) {};\n\n  ZRender.prototype.removeHover = function (el) {};\n\n  ZRender.prototype.clearHover = function () {};\n\n  ZRender.prototype.refreshHover = function () {\n    this._needsRefreshHover = true;\n  };\n\n  ZRender.prototype.refreshHoverImmediately = function () {\n    this._needsRefreshHover = false;\n\n    if (this.painter.refreshHover && this.painter.getType() === 'canvas') {\n      this.painter.refreshHover();\n    }\n  };\n\n  ZRender.prototype.resize = function (opts) {\n    opts = opts || {};\n    this.painter.resize(opts.width, opts.height);\n    this.handler.resize();\n  };\n\n  ZRender.prototype.clearAnimation = function () {\n    this.animation.clear();\n  };\n\n  ZRender.prototype.getWidth = function () {\n    return this.painter.getWidth();\n  };\n\n  ZRender.prototype.getHeight = function () {\n    return this.painter.getHeight();\n  };\n\n  ZRender.prototype.pathToImage = function (e, dpr) {\n    if (this.painter.pathToImage) {\n      return this.painter.pathToImage(e, dpr);\n    }\n  };\n\n  ZRender.prototype.setCursorStyle = function (cursorStyle) {\n    this.handler.setCursorStyle(cursorStyle);\n  };\n\n  ZRender.prototype.findHover = function (x, y) {\n    return this.handler.findHover(x, y);\n  };\n\n  ZRender.prototype.on = function (eventName, eventHandler, context) {\n    this.handler.on(eventName, eventHandler, context);\n    return this;\n  };\n\n  ZRender.prototype.off = function (eventName, eventHandler) {\n    this.handler.off(eventName, eventHandler);\n  };\n\n  ZRender.prototype.trigger = function (eventName, event) {\n    this.handler.trigger(eventName, event);\n  };\n\n  ZRender.prototype.clear = function () {\n    var roots = this.storage.getRoots();\n\n    for (var i = 0; i < roots.length; i++) {\n      if (roots[i] instanceof export_1.Group) {\n        roots[i].removeSelfFromZr(this);\n      }\n    }\n\n    this.storage.delAllRoots();\n    this.painter.clear();\n  };\n\n  ZRender.prototype.dispose = function () {\n    this.animation.stop();\n    this.clear();\n    this.storage.dispose();\n    this.painter.dispose();\n    this.handler.dispose();\n    this.animation = this.storage = this.painter = this.handler = null;\n    delInstance(this.id);\n  };\n\n  return ZRender;\n}();\n\nfunction init(dom, opts) {\n  var zr = new ZRender(zrUtil.guid(), dom, opts);\n  instances[zr.id] = zr;\n  return zr;\n}\n\nexports.init = init;\n\nfunction dispose(zr) {\n  zr.dispose();\n}\n\nexports.dispose = dispose;\n\nfunction disposeAll() {\n  for (var key in instances) {\n    if (instances.hasOwnProperty(key)) {\n      instances[key].dispose();\n    }\n  }\n\n  instances = {};\n}\n\nexports.disposeAll = disposeAll;\n\nfunction getInstance(id) {\n  return instances[id];\n}\n\nexports.getInstance = getInstance;\n\nfunction registerPainter(name, Ctor) {\n  painterCtors[name] = Ctor;\n}\n\nexports.registerPainter = registerPainter;\nexports.version = '5.0.1';\n;","map":{"version":3,"sources":["/Users/wanglijie/wanglijie/clover-defi-wallet/node_modules/zrender/lib/zrender.js"],"names":["exports","__esModule","env_1","require","zrUtil","Handler_1","Storage_1","Animation_1","HandlerProxy_1","export_1","color_1","config_1","useVML","canvasSupported","painterCtors","instances","delInstance","id","isDarkMode","backgroundColor","lum","DARK_MODE_THRESHOLD","colorStops","totalLum","len","length","i","color","ZRender","dom","opts","_this","_sleepAfterStill","_stillFrameAccum","_needsRefresh","_needsRefreshHover","_darkMode","self","storage","rendererType","renderer","vml","Error","useDirtyRect","painter","handerProxy","node","worker","getViewportRoot","root","handler","animation","stage","update","_flush","start","prototype","add","el","addRoot","addSelfToZr","refresh","remove","delRoot","removeSelfFromZr","configLayer","zLevel","config","setBackgroundColor","_backgroundColor","getBackgroundColor","setDarkMode","darkMode","refreshImmediately","fromInside","flush","triggerRendered","Date","getTime","refreshHoverImmediately","end","trigger","elapsedTime","stop","setSleepAfterStill","stillFramesCount","wakeUp","addHover","removeHover","clearHover","refreshHover","getType","resize","width","height","clearAnimation","clear","getWidth","getHeight","pathToImage","e","dpr","setCursorStyle","cursorStyle","findHover","x","y","on","eventName","eventHandler","context","off","event","roots","getRoots","Group","delAllRoots","dispose","init","zr","guid","disposeAll","key","hasOwnProperty","getInstance","registerPainter","name","Ctor","version"],"mappings":"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","sourcesContent":["\"use strict\";\n/*!\n* ZRender, a high performance 2d drawing library.\n*\n* Copyright (c) 2013, Baidu Inc.\n* All rights reserved.\n*\n* LICENSE\n* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt\n*/\nexports.__esModule = true;\nvar env_1 = require(\"./core/env\");\nvar zrUtil = require(\"./core/util\");\nvar Handler_1 = require(\"./Handler\");\nvar Storage_1 = require(\"./Storage\");\nvar Animation_1 = require(\"./animation/Animation\");\nvar HandlerProxy_1 = require(\"./dom/HandlerProxy\");\nvar export_1 = require(\"./export\");\nvar color_1 = require(\"./tool/color\");\nvar config_1 = require(\"./config\");\nvar useVML = !env_1[\"default\"].canvasSupported;\nvar painterCtors = {};\nvar instances = {};\nfunction delInstance(id) {\n    delete instances[id];\n}\nfunction isDarkMode(backgroundColor) {\n    if (!backgroundColor) {\n        return false;\n    }\n    if (typeof backgroundColor === 'string') {\n        return color_1.lum(backgroundColor, 1) < config_1.DARK_MODE_THRESHOLD;\n    }\n    else if (backgroundColor.colorStops) {\n        var colorStops = backgroundColor.colorStops;\n        var totalLum = 0;\n        var len = colorStops.length;\n        for (var i = 0; i < len; i++) {\n            totalLum += color_1.lum(colorStops[i].color, 1);\n        }\n        totalLum /= len;\n        return totalLum < config_1.DARK_MODE_THRESHOLD;\n    }\n    return false;\n}\nvar ZRender = (function () {\n    function ZRender(id, dom, opts) {\n        var _this = this;\n        this._sleepAfterStill = 10;\n        this._stillFrameAccum = 0;\n        this._needsRefresh = true;\n        this._needsRefreshHover = true;\n        this._darkMode = false;\n        opts = opts || {};\n        this.dom = dom;\n        this.id = id;\n        var self = this;\n        var storage = new Storage_1[\"default\"]();\n        var rendererType = opts.renderer;\n        if (useVML) {\n            if (!painterCtors.vml) {\n                throw new Error('You need to require \\'zrender/vml/vml\\' to support IE8');\n            }\n            rendererType = 'vml';\n        }\n        else if (!rendererType) {\n            rendererType = 'canvas';\n        }\n        if (!painterCtors[rendererType]) {\n            throw new Error(\"Renderer '\" + rendererType + \"' is not imported. Please import it first.\");\n        }\n        opts.useDirtyRect = opts.useDirtyRect == null\n            ? false\n            : opts.useDirtyRect;\n        var painter = new painterCtors[rendererType](dom, storage, opts, id);\n        this.storage = storage;\n        this.painter = painter;\n        var handerProxy = (!env_1[\"default\"].node && !env_1[\"default\"].worker)\n            ? new HandlerProxy_1[\"default\"](painter.getViewportRoot(), painter.root)\n            : null;\n        this.handler = new Handler_1[\"default\"](storage, painter, handerProxy, painter.root);\n        this.animation = new Animation_1[\"default\"]({\n            stage: {\n                update: function () { return _this._flush(true); }\n            }\n        });\n        this.animation.start();\n    }\n    ZRender.prototype.add = function (el) {\n        if (!el) {\n            return;\n        }\n        this.storage.addRoot(el);\n        el.addSelfToZr(this);\n        this.refresh();\n    };\n    ZRender.prototype.remove = function (el) {\n        if (!el) {\n            return;\n        }\n        this.storage.delRoot(el);\n        el.removeSelfFromZr(this);\n        this.refresh();\n    };\n    ZRender.prototype.configLayer = function (zLevel, config) {\n        if (this.painter.configLayer) {\n            this.painter.configLayer(zLevel, config);\n        }\n        this.refresh();\n    };\n    ZRender.prototype.setBackgroundColor = function (backgroundColor) {\n        if (this.painter.setBackgroundColor) {\n            this.painter.setBackgroundColor(backgroundColor);\n        }\n        this.refresh();\n        this._backgroundColor = backgroundColor;\n        this._darkMode = isDarkMode(backgroundColor);\n    };\n    ZRender.prototype.getBackgroundColor = function () {\n        return this._backgroundColor;\n    };\n    ZRender.prototype.setDarkMode = function (darkMode) {\n        this._darkMode = darkMode;\n    };\n    ZRender.prototype.isDarkMode = function () {\n        return this._darkMode;\n    };\n    ZRender.prototype.refreshImmediately = function (fromInside) {\n        if (!fromInside) {\n            this.animation.update(true);\n        }\n        this._needsRefresh = false;\n        this.painter.refresh();\n        this._needsRefresh = false;\n    };\n    ZRender.prototype.refresh = function () {\n        this._needsRefresh = true;\n        this.animation.start();\n    };\n    ZRender.prototype.flush = function () {\n        this._flush(false);\n    };\n    ZRender.prototype._flush = function (fromInside) {\n        var triggerRendered;\n        var start = new Date().getTime();\n        if (this._needsRefresh) {\n            triggerRendered = true;\n            this.refreshImmediately(fromInside);\n        }\n        if (this._needsRefreshHover) {\n            triggerRendered = true;\n            this.refreshHoverImmediately();\n        }\n        var end = new Date().getTime();\n        if (triggerRendered) {\n            this._stillFrameAccum = 0;\n            this.trigger('rendered', {\n                elapsedTime: end - start\n            });\n        }\n        else if (this._sleepAfterStill > 0) {\n            this._stillFrameAccum++;\n            if (this._stillFrameAccum > this._sleepAfterStill) {\n                this.animation.stop();\n            }\n        }\n    };\n    ZRender.prototype.setSleepAfterStill = function (stillFramesCount) {\n        this._sleepAfterStill = stillFramesCount;\n    };\n    ZRender.prototype.wakeUp = function () {\n        this.animation.start();\n        this._stillFrameAccum = 0;\n    };\n    ZRender.prototype.addHover = function (el) {\n    };\n    ZRender.prototype.removeHover = function (el) {\n    };\n    ZRender.prototype.clearHover = function () {\n    };\n    ZRender.prototype.refreshHover = function () {\n        this._needsRefreshHover = true;\n    };\n    ZRender.prototype.refreshHoverImmediately = function () {\n        this._needsRefreshHover = false;\n        if (this.painter.refreshHover && this.painter.getType() === 'canvas') {\n            this.painter.refreshHover();\n        }\n    };\n    ZRender.prototype.resize = function (opts) {\n        opts = opts || {};\n        this.painter.resize(opts.width, opts.height);\n        this.handler.resize();\n    };\n    ZRender.prototype.clearAnimation = function () {\n        this.animation.clear();\n    };\n    ZRender.prototype.getWidth = function () {\n        return this.painter.getWidth();\n    };\n    ZRender.prototype.getHeight = function () {\n        return this.painter.getHeight();\n    };\n    ZRender.prototype.pathToImage = function (e, dpr) {\n        if (this.painter.pathToImage) {\n            return this.painter.pathToImage(e, dpr);\n        }\n    };\n    ZRender.prototype.setCursorStyle = function (cursorStyle) {\n        this.handler.setCursorStyle(cursorStyle);\n    };\n    ZRender.prototype.findHover = function (x, y) {\n        return this.handler.findHover(x, y);\n    };\n    ZRender.prototype.on = function (eventName, eventHandler, context) {\n        this.handler.on(eventName, eventHandler, context);\n        return this;\n    };\n    ZRender.prototype.off = function (eventName, eventHandler) {\n        this.handler.off(eventName, eventHandler);\n    };\n    ZRender.prototype.trigger = function (eventName, event) {\n        this.handler.trigger(eventName, event);\n    };\n    ZRender.prototype.clear = function () {\n        var roots = this.storage.getRoots();\n        for (var i = 0; i < roots.length; i++) {\n            if (roots[i] instanceof export_1.Group) {\n                roots[i].removeSelfFromZr(this);\n            }\n        }\n        this.storage.delAllRoots();\n        this.painter.clear();\n    };\n    ZRender.prototype.dispose = function () {\n        this.animation.stop();\n        this.clear();\n        this.storage.dispose();\n        this.painter.dispose();\n        this.handler.dispose();\n        this.animation =\n            this.storage =\n                this.painter =\n                    this.handler = null;\n        delInstance(this.id);\n    };\n    return ZRender;\n}());\nfunction init(dom, opts) {\n    var zr = new ZRender(zrUtil.guid(), dom, opts);\n    instances[zr.id] = zr;\n    return zr;\n}\nexports.init = init;\nfunction dispose(zr) {\n    zr.dispose();\n}\nexports.dispose = dispose;\nfunction disposeAll() {\n    for (var key in instances) {\n        if (instances.hasOwnProperty(key)) {\n            instances[key].dispose();\n        }\n    }\n    instances = {};\n}\nexports.disposeAll = disposeAll;\nfunction getInstance(id) {\n    return instances[id];\n}\nexports.getInstance = getInstance;\nfunction registerPainter(name, Ctor) {\n    painterCtors[name] = Ctor;\n}\nexports.registerPainter = registerPainter;\nexports.version = '5.0.1';\n;\n"]},"metadata":{},"sourceType":"script"}