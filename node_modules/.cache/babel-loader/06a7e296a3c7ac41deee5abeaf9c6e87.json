{"ast":null,"code":"import { __assign } from \"tslib\";\nimport { adaptor as columnAdaptor } from '../column/adaptor';\n/**\n * 柱形图适配器\n * @param params\n */\n\nexport function adaptor(params) {\n  var chart = params.chart,\n      options = params.options;\n  var xField = options.xField,\n      yField = options.yField,\n      xAxis = options.xAxis,\n      yAxis = options.yAxis,\n      barStyle = options.barStyle,\n      barWidthRatio = options.barWidthRatio,\n      label = options.label,\n      data = options.data,\n      seriesField = options.seriesField,\n      isStack = options.isStack; // label of bar charts default position is left, if plot has label\n\n  if (label && !label.position) {\n    label.position = 'left'; // 配置默认的 label layout： 如果用户没有指定 layout 和 position， 则自动配置 layout\n\n    if (!label.layout) {\n      label.layout = [{\n        type: 'interval-adjust-position'\n      }, {\n        type: 'interval-hide-overlap'\n      }, {\n        type: 'adjust-color'\n      }, {\n        type: 'limit-in-plot',\n        cfg: {\n          action: 'hide'\n        }\n      }];\n    }\n  } // 默认 legend 位置\n\n\n  var legend = options.legend;\n\n  if (seriesField) {\n    if (legend !== false) {\n      legend = __assign({\n        position: isStack ? 'top-left' : 'right-top',\n        reversed: isStack ? false : true\n      }, legend || {});\n    }\n  } else {\n    legend = false;\n  } // @ts-ignore 直接改值\n\n\n  params.options.legend = legend; // 默认 tooltip 配置\n\n  var tooltip = options.tooltip;\n\n  if (seriesField) {\n    if (tooltip !== false) {\n      tooltip = __assign({\n        reversed: isStack ? false : true\n      }, tooltip || {});\n    }\n  } // @ts-ignore 直接改值\n\n\n  params.options.tooltip = tooltip; // transpose column to bar\n\n  chart.coordinate().transpose();\n  return columnAdaptor({\n    chart: chart,\n    options: __assign(__assign({}, options), {\n      label: label,\n      // switch xField and yField\n      xField: yField,\n      yField: xField,\n      xAxis: yAxis,\n      yAxis: xAxis,\n      // rename attrs as column\n      columnStyle: barStyle,\n      columnWidthRatio: barWidthRatio,\n      // bar 调整数据顺序\n      data: data ? data.slice().reverse() : data\n    })\n  }, true);\n}","map":{"version":3,"sources":["../../../src/plots/bar/adaptor.ts"],"names":[],"mappings":"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","sourcesContent":["import {} from '@antv/util';\nimport { Params } from '../../core/adaptor';\nimport { adaptor as columnAdaptor } from '../column/adaptor';\nimport { BarOptions } from './types';\n\n/**\n * 柱形图适配器\n * @param params\n */\nexport function adaptor(params: Params<BarOptions>) {\n  const { chart, options } = params;\n  const { xField, yField, xAxis, yAxis, barStyle, barWidthRatio, label, data, seriesField, isStack } = options;\n\n  // label of bar charts default position is left, if plot has label\n  if (label && !label.position) {\n    label.position = 'left';\n    // 配置默认的 label layout： 如果用户没有指定 layout 和 position， 则自动配置 layout\n    if (!label.layout) {\n      label.layout = [\n        { type: 'interval-adjust-position' },\n        { type: 'interval-hide-overlap' },\n        { type: 'adjust-color' },\n        { type: 'limit-in-plot', cfg: { action: 'hide' } },\n      ];\n    }\n  }\n\n  // 默认 legend 位置\n  let { legend } = options;\n  if (seriesField) {\n    if (legend !== false) {\n      legend = {\n        position: isStack ? 'top-left' : 'right-top',\n        reversed: isStack ? false : true,\n        ...(legend || {}),\n      };\n    }\n  } else {\n    legend = false;\n  }\n  // @ts-ignore 直接改值\n  params.options.legend = legend;\n\n  // 默认 tooltip 配置\n  let { tooltip } = options;\n  if (seriesField) {\n    if (tooltip !== false) {\n      tooltip = {\n        reversed: isStack ? false : true,\n        ...(tooltip || {}),\n      };\n    }\n  }\n  // @ts-ignore 直接改值\n  params.options.tooltip = tooltip;\n\n  // transpose column to bar\n  chart.coordinate().transpose();\n\n  return columnAdaptor(\n    {\n      chart,\n      options: {\n        ...options,\n        label,\n        // switch xField and yField\n        xField: yField,\n        yField: xField,\n        xAxis: yAxis,\n        yAxis: xAxis,\n        // rename attrs as column\n        columnStyle: barStyle,\n        columnWidthRatio: barWidthRatio,\n        // bar 调整数据顺序\n        data: data ? data.slice().reverse() : data,\n      },\n    },\n    true\n  );\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}