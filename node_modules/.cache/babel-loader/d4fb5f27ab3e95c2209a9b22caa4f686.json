{"ast":null,"code":"/**\n * @fileoverview web worker for layout\n * @author changzhe.zb@antfin.com\n */\nimport Layout from '../index';\nimport { LAYOUT_MESSAGE } from './layoutConst';\nvar ctx = self;\n\nfunction isLayoutMessage(event) {\n  var type = event.data.type;\n  return type === LAYOUT_MESSAGE.RUN;\n}\n\nfunction handleLayoutMessage(event) {\n  var type = event.data.type;\n\n  switch (type) {\n    case LAYOUT_MESSAGE.RUN:\n      {\n        var _a = event.data,\n            nodes = _a.nodes,\n            edges = _a.edges,\n            _b = _a.layoutCfg,\n            layoutCfg = _b === void 0 ? {} : _b;\n        var layoutType = layoutCfg.type;\n        var LayoutClass = Layout[layoutType];\n\n        if (!LayoutClass) {\n          ctx.postMessage({\n            type: LAYOUT_MESSAGE.ERROR,\n            message: \"layout \" + layoutType + \" not found\"\n          });\n          break;\n        }\n\n        var layoutMethod = new LayoutClass(layoutCfg);\n        layoutMethod.init({\n          nodes: nodes,\n          edges: edges\n        });\n        layoutMethod.execute();\n        ctx.postMessage({\n          type: LAYOUT_MESSAGE.END,\n          nodes: nodes\n        });\n        layoutMethod.destroy();\n        break;\n      }\n\n    default:\n      break;\n  }\n} // listen to message posted to web worker\n\n\nctx.onmessage = function (event) {\n  if (isLayoutMessage(event)) {\n    handleLayoutMessage(event);\n  }\n}; // https://stackoverflow.com/questions/50210416/webpack-worker-loader-fails-to-compile-typescript-worker\n\n\nexport default null;","map":{"version":3,"sources":["/Users/wanglijie/wanglijie/clover-defi-wallet/node_modules/@antv/g6/es/layout/worker/layout.worker.js"],"names":["Layout","LAYOUT_MESSAGE","ctx","self","isLayoutMessage","event","type","data","RUN","handleLayoutMessage","_a","nodes","edges","_b","layoutCfg","layoutType","LayoutClass","postMessage","ERROR","message","layoutMethod","init","execute","END","destroy","onmessage"],"mappings":"AAAA;AACA;AACA;AACA;AACA,OAAOA,MAAP,MAAmB,UAAnB;AACA,SAASC,cAAT,QAA+B,eAA/B;AACA,IAAIC,GAAG,GAAGC,IAAV;;AAEA,SAASC,eAAT,CAAyBC,KAAzB,EAAgC;AAC9B,MAAIC,IAAI,GAAGD,KAAK,CAACE,IAAN,CAAWD,IAAtB;AACA,SAAOA,IAAI,KAAKL,cAAc,CAACO,GAA/B;AACD;;AAED,SAASC,mBAAT,CAA6BJ,KAA7B,EAAoC;AAClC,MAAIC,IAAI,GAAGD,KAAK,CAACE,IAAN,CAAWD,IAAtB;;AAEA,UAAQA,IAAR;AACE,SAAKL,cAAc,CAACO,GAApB;AACE;AACE,YAAIE,EAAE,GAAGL,KAAK,CAACE,IAAf;AAAA,YACII,KAAK,GAAGD,EAAE,CAACC,KADf;AAAA,YAEIC,KAAK,GAAGF,EAAE,CAACE,KAFf;AAAA,YAGIC,EAAE,GAAGH,EAAE,CAACI,SAHZ;AAAA,YAIIA,SAAS,GAAGD,EAAE,KAAK,KAAK,CAAZ,GAAgB,EAAhB,GAAqBA,EAJrC;AAKA,YAAIE,UAAU,GAAGD,SAAS,CAACR,IAA3B;AACA,YAAIU,WAAW,GAAGhB,MAAM,CAACe,UAAD,CAAxB;;AAEA,YAAI,CAACC,WAAL,EAAkB;AAChBd,UAAAA,GAAG,CAACe,WAAJ,CAAgB;AACdX,YAAAA,IAAI,EAAEL,cAAc,CAACiB,KADP;AAEdC,YAAAA,OAAO,EAAE,YAAYJ,UAAZ,GAAyB;AAFpB,WAAhB;AAIA;AACD;;AAED,YAAIK,YAAY,GAAG,IAAIJ,WAAJ,CAAgBF,SAAhB,CAAnB;AACAM,QAAAA,YAAY,CAACC,IAAb,CAAkB;AAChBV,UAAAA,KAAK,EAAEA,KADS;AAEhBC,UAAAA,KAAK,EAAEA;AAFS,SAAlB;AAIAQ,QAAAA,YAAY,CAACE,OAAb;AACApB,QAAAA,GAAG,CAACe,WAAJ,CAAgB;AACdX,UAAAA,IAAI,EAAEL,cAAc,CAACsB,GADP;AAEdZ,UAAAA,KAAK,EAAEA;AAFO,SAAhB;AAIAS,QAAAA,YAAY,CAACI,OAAb;AACA;AACD;;AAEH;AACE;AAlCJ;AAoCD,C,CAAC;;;AAGFtB,GAAG,CAACuB,SAAJ,GAAgB,UAAUpB,KAAV,EAAiB;AAC/B,MAAID,eAAe,CAACC,KAAD,CAAnB,EAA4B;AAC1BI,IAAAA,mBAAmB,CAACJ,KAAD,CAAnB;AACD;AACF,CAJD,C,CAIG;;;AAGH,eAAe,IAAf","sourcesContent":["/**\n * @fileoverview web worker for layout\n * @author changzhe.zb@antfin.com\n */\nimport Layout from '../index';\nimport { LAYOUT_MESSAGE } from './layoutConst';\nvar ctx = self;\n\nfunction isLayoutMessage(event) {\n  var type = event.data.type;\n  return type === LAYOUT_MESSAGE.RUN;\n}\n\nfunction handleLayoutMessage(event) {\n  var type = event.data.type;\n\n  switch (type) {\n    case LAYOUT_MESSAGE.RUN:\n      {\n        var _a = event.data,\n            nodes = _a.nodes,\n            edges = _a.edges,\n            _b = _a.layoutCfg,\n            layoutCfg = _b === void 0 ? {} : _b;\n        var layoutType = layoutCfg.type;\n        var LayoutClass = Layout[layoutType];\n\n        if (!LayoutClass) {\n          ctx.postMessage({\n            type: LAYOUT_MESSAGE.ERROR,\n            message: \"layout \" + layoutType + \" not found\"\n          });\n          break;\n        }\n\n        var layoutMethod = new LayoutClass(layoutCfg);\n        layoutMethod.init({\n          nodes: nodes,\n          edges: edges\n        });\n        layoutMethod.execute();\n        ctx.postMessage({\n          type: LAYOUT_MESSAGE.END,\n          nodes: nodes\n        });\n        layoutMethod.destroy();\n        break;\n      }\n\n    default:\n      break;\n  }\n} // listen to message posted to web worker\n\n\nctx.onmessage = function (event) {\n  if (isLayoutMessage(event)) {\n    handleLayoutMessage(event);\n  }\n}; // https://stackoverflow.com/questions/50210416/webpack-worker-loader-fails-to-compile-typescript-worker\n\n\nexport default null;"]},"metadata":{},"sourceType":"module"}