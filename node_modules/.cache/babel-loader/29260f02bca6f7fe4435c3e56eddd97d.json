{"ast":null,"code":"import _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport treeFilter from 'array-tree-filter';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { WithTheme } from '../style';\nimport { getComponentLocale } from '../_util/getLocale';\nimport RMCCascader from './cascader';\nimport RMCPopupCascader from './cascader/Popup';\nimport MultiPicker from './MultiPicker';\nimport RMCPicker from './Picker';\nimport PickerStyles from './style';\nexport function getDefaultProps() {\n  var defaultFormat = function defaultFormat(values) {\n    return values.join(',');\n  };\n\n  return {\n    triggerType: 'onPress',\n    prefixCls: 'am-picker',\n    pickerPrefixCls: 'am-picker-col',\n    popupPrefixCls: 'am-picker-popup',\n    format: defaultFormat,\n    cols: 3,\n    cascade: true,\n    title: ''\n  };\n}\n\nvar Picker = function (_React$Component) {\n  _inherits(Picker, _React$Component);\n\n  function Picker() {\n    _classCallCheck(this, Picker);\n\n    var _this = _possibleConstructorReturn(this, (Picker.__proto__ || Object.getPrototypeOf(Picker)).apply(this, arguments));\n\n    _this.getSel = function () {\n      var value = _this.props.value || [];\n      var treeChildren = void 0;\n      var data = _this.props.data;\n\n      if (_this.props.cascade) {\n        treeChildren = treeFilter(data, function (c, level) {\n          return c.value === value[level];\n        });\n      } else {\n        treeChildren = value.map(function (v, i) {\n          return data[i].filter(function (d) {\n            return d.value === v;\n          })[0];\n        });\n      }\n\n      return _this.props.format && _this.props.format(treeChildren.map(function (v) {\n        return v.label;\n      }));\n    };\n\n    _this.getPickerCol = function () {\n      var _this$props = _this.props,\n          data = _this$props.data,\n          itemStyle = _this$props.itemStyle,\n          indicatorStyle = _this$props.indicatorStyle;\n      return (Array.isArray(data[0]) ? data : [data]).map(function (col, index) {\n        return React.createElement(RMCPicker, {\n          key: index,\n          style: {\n            flex: 1\n          },\n          itemStyle: itemStyle,\n          indicatorStyle: indicatorStyle\n        }, col.map(function (item) {\n          return React.createElement(RMCPicker.Item, {\n            key: item.value,\n            value: item.value\n          }, item.label);\n        }));\n      });\n    };\n\n    _this.onOk = function (v) {\n      if (_this.scrollValue !== undefined) {\n        v = _this.scrollValue;\n      }\n\n      if (_this.props.onChange) {\n        _this.props.onChange(v);\n      }\n\n      if (_this.props.onOk) {\n        _this.props.onOk(v);\n      }\n    };\n\n    _this.setScrollValue = function (v) {\n      _this.scrollValue = v;\n    };\n\n    _this.setCasecadeScrollValue = function (v) {\n      // 级联情况下保证数据正确性，滚动过程中只有当最后一级变化时才变更数据\n      if (v && _this.scrollValue) {\n        var length = _this.scrollValue.length;\n\n        if (length === v.length && _this.scrollValue[length - 1] === v[length - 1]) {\n          return;\n        }\n      }\n\n      _this.setScrollValue(v);\n    };\n\n    _this.fixOnOk = function (cascader) {\n      if (cascader && cascader.onOk !== _this.onOk) {\n        cascader.onOk = _this.onOk;\n        cascader.forceUpdate();\n      }\n    };\n\n    _this.onPickerChange = function (v) {\n      _this.setScrollValue(v);\n\n      if (_this.props.onPickerChange) {\n        _this.props.onPickerChange(v);\n      }\n    };\n\n    _this.onVisibleChange = function (visible) {\n      _this.setScrollValue(undefined);\n\n      if (_this.props.onVisibleChange) {\n        _this.props.onVisibleChange(visible);\n      }\n    };\n\n    _this.getCascade = function (cascade, data, cols, itemStyle, indicatorStyle) {\n      var cascader = void 0;\n      var popupMoreProps = {};\n\n      if (cascade) {\n        cascader = React.createElement(RMCCascader, {\n          data: Array.isArray(data[0]) ? data[0] : data,\n          cols: cols,\n          onChange: _this.onPickerChange,\n          onScrollChange: _this.setCasecadeScrollValue,\n          pickerItemStyle: itemStyle,\n          indicatorStyle: indicatorStyle\n        });\n      } else {\n        cascader = React.createElement(MultiPicker, {\n          style: {\n            flexDirection: 'row',\n            alignItems: 'center'\n          },\n          onScrollChange: _this.setScrollValue,\n          onValueChange: _this.onPickerChange\n        }, _this.getPickerCol());\n        popupMoreProps = {\n          pickerValueProp: 'selectedValue',\n          pickerValueChangeProp: 'onValueChange'\n        };\n      }\n\n      return {\n        cascader: cascader,\n        popupMoreProps: popupMoreProps\n      };\n    };\n\n    return _this;\n  }\n\n  _createClass(Picker, [{\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      var _a = this.props,\n          children = _a.children,\n          _a$value = _a.value,\n          value = _a$value === undefined ? [] : _a$value,\n          popupPrefixCls = _a.popupPrefixCls,\n          itemStyle = _a.itemStyle,\n          indicatorStyle = _a.indicatorStyle,\n          okText = _a.okText,\n          dismissText = _a.dismissText,\n          extra = _a.extra,\n          cascade = _a.cascade,\n          data = _a.data,\n          cols = _a.cols,\n          onOk = _a.onOk,\n          restProps = __rest(_a, [\"children\", \"value\", \"popupPrefixCls\", \"itemStyle\", \"indicatorStyle\", \"okText\", \"dismissText\", \"extra\", \"cascade\", \"data\", \"cols\", \"onOk\"]); // tslint:disable-next-line:variable-name\n\n\n      var _locale = getComponentLocale(this.props, this.context, 'Picker', function () {\n        return require('./locale/zh_CN');\n      });\n\n      var _getCascade = this.getCascade(cascade, data, cols, itemStyle, indicatorStyle),\n          cascader = _getCascade.cascader,\n          popupMoreProps = _getCascade.popupMoreProps;\n\n      return React.createElement(WithTheme, {\n        styles: restProps.styles,\n        themeStyles: PickerStyles\n      }, function (styles) {\n        return React.createElement(RMCPopupCascader, _extends({\n          cascader: cascader\n        }, _this2.popupProps, restProps, {\n          styles: styles,\n          value: value,\n          dismissText: dismissText || _locale.dismissText,\n          okText: okText || _locale.okText\n        }, popupMoreProps, {\n          ref: _this2.fixOnOk,\n          onVisibleChange: _this2.onVisibleChange\n        }), children && typeof children !== 'string' && React.isValidElement(children) && React.cloneElement(children, {\n          extra: _this2.getSel() || extra || _locale.extra\n        }));\n      });\n    }\n  }]);\n\n  return Picker;\n}(React.Component);\n\nexport default Picker;\nPicker.contextTypes = {\n  antLocale: PropTypes.object\n};\nPicker.defaultProps = getDefaultProps();","map":{"version":3,"sources":["/Users/wanglijie/wanglijie/clover-defi-wallet/node_modules/@ant-design/react-native/es/picker/index.js"],"names":["_extends","_classCallCheck","_createClass","_possibleConstructorReturn","_inherits","__rest","s","e","t","p","Object","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","i","length","propertyIsEnumerable","treeFilter","PropTypes","React","WithTheme","getComponentLocale","RMCCascader","RMCPopupCascader","MultiPicker","RMCPicker","PickerStyles","getDefaultProps","defaultFormat","values","join","triggerType","prefixCls","pickerPrefixCls","popupPrefixCls","format","cols","cascade","title","Picker","_React$Component","_this","__proto__","getPrototypeOf","apply","arguments","getSel","value","props","treeChildren","data","c","level","map","v","filter","d","label","getPickerCol","_this$props","itemStyle","indicatorStyle","Array","isArray","col","index","createElement","key","style","flex","item","Item","onOk","scrollValue","undefined","onChange","setScrollValue","setCasecadeScrollValue","fixOnOk","cascader","forceUpdate","onPickerChange","onVisibleChange","visible","getCascade","popupMoreProps","onScrollChange","pickerItemStyle","flexDirection","alignItems","onValueChange","pickerValueProp","pickerValueChangeProp","render","_this2","_a","children","_a$value","okText","dismissText","extra","restProps","_locale","context","require","_getCascade","styles","themeStyles","popupProps","ref","isValidElement","cloneElement","Component","contextTypes","antLocale","object","defaultProps"],"mappings":"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","sourcesContent":["import _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nvar __rest = this && this.__rest || function (s, e) {\n    var t = {};\n    for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n    }if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n        if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n    }\n    return t;\n};\nimport treeFilter from 'array-tree-filter';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { WithTheme } from '../style';\nimport { getComponentLocale } from '../_util/getLocale';\nimport RMCCascader from './cascader';\nimport RMCPopupCascader from './cascader/Popup';\nimport MultiPicker from './MultiPicker';\nimport RMCPicker from './Picker';\nimport PickerStyles from './style';\nexport function getDefaultProps() {\n    var defaultFormat = function defaultFormat(values) {\n        return values.join(',');\n    };\n    return {\n        triggerType: 'onPress',\n        prefixCls: 'am-picker',\n        pickerPrefixCls: 'am-picker-col',\n        popupPrefixCls: 'am-picker-popup',\n        format: defaultFormat,\n        cols: 3,\n        cascade: true,\n        title: ''\n    };\n}\n\nvar Picker = function (_React$Component) {\n    _inherits(Picker, _React$Component);\n\n    function Picker() {\n        _classCallCheck(this, Picker);\n\n        var _this = _possibleConstructorReturn(this, (Picker.__proto__ || Object.getPrototypeOf(Picker)).apply(this, arguments));\n\n        _this.getSel = function () {\n            var value = _this.props.value || [];\n            var treeChildren = void 0;\n            var data = _this.props.data;\n\n            if (_this.props.cascade) {\n                treeChildren = treeFilter(data, function (c, level) {\n                    return c.value === value[level];\n                });\n            } else {\n                treeChildren = value.map(function (v, i) {\n                    return data[i].filter(function (d) {\n                        return d.value === v;\n                    })[0];\n                });\n            }\n            return _this.props.format && _this.props.format(treeChildren.map(function (v) {\n                return v.label;\n            }));\n        };\n        _this.getPickerCol = function () {\n            var _this$props = _this.props,\n                data = _this$props.data,\n                itemStyle = _this$props.itemStyle,\n                indicatorStyle = _this$props.indicatorStyle;\n\n            return (Array.isArray(data[0]) ? data : [data]).map(function (col, index) {\n                return React.createElement(\n                    RMCPicker,\n                    { key: index, style: { flex: 1 }, itemStyle: itemStyle, indicatorStyle: indicatorStyle },\n                    col.map(function (item) {\n                        return React.createElement(\n                            RMCPicker.Item,\n                            { key: item.value, value: item.value },\n                            item.label\n                        );\n                    })\n                );\n            });\n        };\n        _this.onOk = function (v) {\n            if (_this.scrollValue !== undefined) {\n                v = _this.scrollValue;\n            }\n            if (_this.props.onChange) {\n                _this.props.onChange(v);\n            }\n            if (_this.props.onOk) {\n                _this.props.onOk(v);\n            }\n        };\n        _this.setScrollValue = function (v) {\n            _this.scrollValue = v;\n        };\n        _this.setCasecadeScrollValue = function (v) {\n            // 级联情况下保证数据正确性，滚动过程中只有当最后一级变化时才变更数据\n            if (v && _this.scrollValue) {\n                var length = _this.scrollValue.length;\n                if (length === v.length && _this.scrollValue[length - 1] === v[length - 1]) {\n                    return;\n                }\n            }\n            _this.setScrollValue(v);\n        };\n        _this.fixOnOk = function (cascader) {\n            if (cascader && cascader.onOk !== _this.onOk) {\n                cascader.onOk = _this.onOk;\n                cascader.forceUpdate();\n            }\n        };\n        _this.onPickerChange = function (v) {\n            _this.setScrollValue(v);\n            if (_this.props.onPickerChange) {\n                _this.props.onPickerChange(v);\n            }\n        };\n        _this.onVisibleChange = function (visible) {\n            _this.setScrollValue(undefined);\n            if (_this.props.onVisibleChange) {\n                _this.props.onVisibleChange(visible);\n            }\n        };\n        _this.getCascade = function (cascade, data, cols, itemStyle, indicatorStyle) {\n            var cascader = void 0;\n            var popupMoreProps = {};\n            if (cascade) {\n                cascader = React.createElement(RMCCascader, { data: Array.isArray(data[0]) ? data[0] : data, cols: cols, onChange: _this.onPickerChange, onScrollChange: _this.setCasecadeScrollValue, pickerItemStyle: itemStyle, indicatorStyle: indicatorStyle });\n            } else {\n                cascader = React.createElement(\n                    MultiPicker,\n                    { style: { flexDirection: 'row', alignItems: 'center' }, onScrollChange: _this.setScrollValue, onValueChange: _this.onPickerChange },\n                    _this.getPickerCol()\n                );\n                popupMoreProps = {\n                    pickerValueProp: 'selectedValue',\n                    pickerValueChangeProp: 'onValueChange'\n                };\n            }\n            return { cascader: cascader, popupMoreProps: popupMoreProps };\n        };\n        return _this;\n    }\n\n    _createClass(Picker, [{\n        key: 'render',\n        value: function render() {\n            var _this2 = this;\n\n            var _a = this.props,\n                children = _a.children,\n                _a$value = _a.value,\n                value = _a$value === undefined ? [] : _a$value,\n                popupPrefixCls = _a.popupPrefixCls,\n                itemStyle = _a.itemStyle,\n                indicatorStyle = _a.indicatorStyle,\n                okText = _a.okText,\n                dismissText = _a.dismissText,\n                extra = _a.extra,\n                cascade = _a.cascade,\n                data = _a.data,\n                cols = _a.cols,\n                onOk = _a.onOk,\n                restProps = __rest(_a, [\"children\", \"value\", \"popupPrefixCls\", \"itemStyle\", \"indicatorStyle\", \"okText\", \"dismissText\", \"extra\", \"cascade\", \"data\", \"cols\", \"onOk\"]);\n            // tslint:disable-next-line:variable-name\n            var _locale = getComponentLocale(this.props, this.context, 'Picker', function () {\n                return require('./locale/zh_CN');\n            });\n\n            var _getCascade = this.getCascade(cascade, data, cols, itemStyle, indicatorStyle),\n                cascader = _getCascade.cascader,\n                popupMoreProps = _getCascade.popupMoreProps;\n\n            return React.createElement(\n                WithTheme,\n                { styles: restProps.styles, themeStyles: PickerStyles },\n                function (styles) {\n                    return React.createElement(\n                        RMCPopupCascader,\n                        _extends({ cascader: cascader }, _this2.popupProps, restProps, { styles: styles, value: value, dismissText: dismissText || _locale.dismissText, okText: okText || _locale.okText }, popupMoreProps, { ref: _this2.fixOnOk, onVisibleChange: _this2.onVisibleChange }),\n                        children && typeof children !== 'string' && React.isValidElement(children) && React.cloneElement(children, {\n                            extra: _this2.getSel() || extra || _locale.extra\n                        })\n                    );\n                }\n            );\n        }\n    }]);\n\n    return Picker;\n}(React.Component);\n\nexport default Picker;\n\nPicker.contextTypes = {\n    antLocale: PropTypes.object\n};\nPicker.defaultProps = getDefaultProps();"]},"metadata":{},"sourceType":"module"}