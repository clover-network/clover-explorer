{"ast":null,"code":"import { G6Event } from '../types';\nimport { cloneEvent, isNaN } from '../util/base';\nvar abs = Math.abs;\nvar DRAG_OFFSET = 10;\nvar ALLOW_EVENTS = ['shift', 'ctrl', 'alt', 'control'];\nexport default {\n  getDefaultCfg: function getDefaultCfg() {\n    return {\n      direction: 'both',\n      enableOptimize: false,\n      // drag-canvas 可拖动的扩展范围，默认为 0，即最多可以拖动一屏的位置\n      // 当设置的值大于 0 时，即拖动可以超过一屏\n      // 当设置的值小于 0 时，相当于缩小了可拖动范围\n      // 具体实例可参考：https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*IFfoS67_HssAAAAAAAAAAAAAARQnAQ\n      scalableRange: 0\n    };\n  },\n  getEvents: function getEvents() {\n    return {\n      dragstart: 'onMouseDown',\n      mousedown: 'onMouseDown',\n      drag: 'onMouseMove',\n      dragend: 'onMouseUp',\n      mouseup: 'onMouseUp',\n      'canvas:click': 'onMouseUp',\n      keyup: 'onKeyUp',\n      focus: 'onKeyUp',\n      keydown: 'onKeyDown',\n      touchstart: 'onMouseDown',\n      touchmove: 'onMouseMove',\n      touchend: 'onMouseUp'\n    };\n  },\n  updateViewport: function updateViewport(e) {\n    var origin = this.origin;\n    var clientX = +e.clientX;\n    var clientY = +e.clientY;\n\n    if (isNaN(clientX) || isNaN(clientY)) {\n      return;\n    }\n\n    var dx = clientX - origin.x;\n    var dy = clientY - origin.y;\n\n    if (this.get('direction') === 'x') {\n      dy = 0;\n    } else if (this.get('direction') === 'y') {\n      dx = 0;\n    }\n\n    this.origin = {\n      x: clientX,\n      y: clientY\n    };\n    var width = this.graph.get('width');\n    var height = this.graph.get('height');\n    var graphCanvasBBox = this.graph.get('canvas').getCanvasBBox();\n\n    if (graphCanvasBBox.minX <= width + this.scalableRange && graphCanvasBBox.minX + dx > width + this.scalableRange || graphCanvasBBox.maxX + this.scalableRange >= 0 && graphCanvasBBox.maxX + this.scalableRange + dx < 0) {\n      dx = 0;\n    }\n\n    if (graphCanvasBBox.minY <= height + this.scalableRange && graphCanvasBBox.minY + dy > height + this.scalableRange || graphCanvasBBox.maxY + this.scalableRange >= 0 && graphCanvasBBox.maxY + this.scalableRange + dy < 0) {\n      dy = 0;\n    }\n\n    this.graph.translate(dx, dy);\n  },\n  onMouseDown: function onMouseDown(e) {\n    var self = this;\n    var event = e.originalEvent;\n\n    if (event && event.button !== 0) {\n      return;\n    }\n\n    if (e.name !== G6Event.TOUCHSTART && window && window.event && typeof window !== 'undefined' && !window.event.buttons && !window.event.button) {\n      return;\n    }\n\n    if (self.keydown || e.shape) {\n      return;\n    }\n\n    self.origin = {\n      x: e.clientX,\n      y: e.clientY\n    };\n    self.dragging = false;\n\n    if (this.enableOptimize) {\n      // 拖动 canvas 过程中隐藏所有的边及label\n      var graph = this.graph;\n      var edges = graph.getEdges();\n\n      for (var i = 0, len = edges.length; i < len; i++) {\n        var shapes = edges[i].get('group').get('children');\n        if (!shapes) continue;\n        shapes.forEach(function (shape) {\n          shape.hide();\n        });\n      }\n\n      var nodes = graph.getNodes();\n\n      for (var j = 0, nodeLen = nodes.length; j < nodeLen; j++) {\n        var container = nodes[j].getContainer();\n        var children = container.get('children');\n\n        for (var _i = 0, children_1 = children; _i < children_1.length; _i++) {\n          var child = children_1[_i];\n          var isKeyShape = child.get('isKeyShape');\n\n          if (!isKeyShape) {\n            child.hide();\n          }\n        }\n      }\n    }\n  },\n  onMouseMove: function onMouseMove(e) {\n    var graph = this.graph;\n\n    if (this.keydown || e.shape) {\n      return;\n    }\n\n    e = cloneEvent(e);\n\n    if (!this.origin) {\n      return;\n    }\n\n    if (!this.dragging) {\n      if (abs(this.origin.x - e.clientX) + abs(this.origin.y - e.clientY) < DRAG_OFFSET) {\n        return;\n      }\n\n      if (this.shouldBegin.call(this, e)) {\n        e.type = 'dragstart';\n        graph.emit('canvas:dragstart', e);\n        this.dragging = true;\n      }\n    } else {\n      e.type = 'drag';\n      graph.emit('canvas:drag', e);\n    }\n\n    if (this.shouldUpdate.call(this, e)) {\n      this.updateViewport(e);\n    }\n  },\n  onMouseUp: function onMouseUp(e) {\n    var graph = this.graph;\n\n    if (this.keydown || e.shape) {\n      return;\n    }\n\n    if (this.enableOptimize) {\n      // 拖动结束后显示所有的边\n      var edges = graph.getEdges();\n\n      for (var i = 0, len = edges.length; i < len; i++) {\n        var shapes = edges[i].get('group').get('children');\n        if (!shapes) continue;\n        shapes.forEach(function (shape) {\n          shape.show();\n        });\n      }\n\n      var nodes = graph.getNodes();\n\n      for (var j = 0, nodeLen = nodes.length; j < nodeLen; j++) {\n        var container = nodes[j].getContainer();\n        var children = container.get('children');\n\n        for (var _i = 0, children_2 = children; _i < children_2.length; _i++) {\n          var child = children_2[_i];\n          var isKeyShape = child.get('isKeyShape');\n\n          if (!isKeyShape) {\n            child.show();\n          }\n        }\n      }\n    }\n\n    if (!this.dragging) {\n      this.origin = null;\n      return;\n    }\n\n    e = cloneEvent(e);\n\n    if (this.shouldEnd.call(this, e)) {\n      this.updateViewport(e);\n    }\n\n    e.type = 'dragend';\n    graph.emit('canvas:dragend', e);\n    this.endDrag();\n  },\n  endDrag: function endDrag() {\n    this.origin = null;\n    this.dragging = false;\n    this.dragbegin = false;\n  },\n  onKeyDown: function onKeyDown(e) {\n    var self = this;\n    var code = e.key;\n\n    if (!code) {\n      return;\n    }\n\n    if (ALLOW_EVENTS.indexOf(code.toLowerCase()) > -1) {\n      self.keydown = true;\n    } else {\n      self.keydown = false;\n    }\n  },\n  onKeyUp: function onKeyUp() {\n    this.keydown = false;\n    this.origin = null;\n    this.dragging = false;\n    this.dragbegin = false;\n  }\n};","map":{"version":3,"sources":["/Users/wanglijie/wanglijie/clover-defi-wallet/node_modules/@antv/g6/es/behavior/drag-canvas.js"],"names":["G6Event","cloneEvent","isNaN","abs","Math","DRAG_OFFSET","ALLOW_EVENTS","getDefaultCfg","direction","enableOptimize","scalableRange","getEvents","dragstart","mousedown","drag","dragend","mouseup","keyup","focus","keydown","touchstart","touchmove","touchend","updateViewport","e","origin","clientX","clientY","dx","x","dy","y","get","width","graph","height","graphCanvasBBox","getCanvasBBox","minX","maxX","minY","maxY","translate","onMouseDown","self","event","originalEvent","button","name","TOUCHSTART","window","buttons","shape","dragging","edges","getEdges","i","len","length","shapes","forEach","hide","nodes","getNodes","j","nodeLen","container","getContainer","children","_i","children_1","child","isKeyShape","onMouseMove","shouldBegin","call","type","emit","shouldUpdate","onMouseUp","show","children_2","shouldEnd","endDrag","dragbegin","onKeyDown","code","key","indexOf","toLowerCase","onKeyUp"],"mappings":"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","sourcesContent":["import { G6Event } from '../types';\nimport { cloneEvent, isNaN } from '../util/base';\nvar abs = Math.abs;\nvar DRAG_OFFSET = 10;\nvar ALLOW_EVENTS = ['shift', 'ctrl', 'alt', 'control'];\nexport default {\n  getDefaultCfg: function getDefaultCfg() {\n    return {\n      direction: 'both',\n      enableOptimize: false,\n      // drag-canvas 可拖动的扩展范围，默认为 0，即最多可以拖动一屏的位置\n      // 当设置的值大于 0 时，即拖动可以超过一屏\n      // 当设置的值小于 0 时，相当于缩小了可拖动范围\n      // 具体实例可参考：https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*IFfoS67_HssAAAAAAAAAAAAAARQnAQ\n      scalableRange: 0\n    };\n  },\n  getEvents: function getEvents() {\n    return {\n      dragstart: 'onMouseDown',\n      mousedown: 'onMouseDown',\n      drag: 'onMouseMove',\n      dragend: 'onMouseUp',\n      mouseup: 'onMouseUp',\n      'canvas:click': 'onMouseUp',\n      keyup: 'onKeyUp',\n      focus: 'onKeyUp',\n      keydown: 'onKeyDown',\n      touchstart: 'onMouseDown',\n      touchmove: 'onMouseMove',\n      touchend: 'onMouseUp'\n    };\n  },\n  updateViewport: function updateViewport(e) {\n    var origin = this.origin;\n    var clientX = +e.clientX;\n    var clientY = +e.clientY;\n\n    if (isNaN(clientX) || isNaN(clientY)) {\n      return;\n    }\n\n    var dx = clientX - origin.x;\n    var dy = clientY - origin.y;\n\n    if (this.get('direction') === 'x') {\n      dy = 0;\n    } else if (this.get('direction') === 'y') {\n      dx = 0;\n    }\n\n    this.origin = {\n      x: clientX,\n      y: clientY\n    };\n    var width = this.graph.get('width');\n    var height = this.graph.get('height');\n    var graphCanvasBBox = this.graph.get('canvas').getCanvasBBox();\n\n    if (graphCanvasBBox.minX <= width + this.scalableRange && graphCanvasBBox.minX + dx > width + this.scalableRange || graphCanvasBBox.maxX + this.scalableRange >= 0 && graphCanvasBBox.maxX + this.scalableRange + dx < 0) {\n      dx = 0;\n    }\n\n    if (graphCanvasBBox.minY <= height + this.scalableRange && graphCanvasBBox.minY + dy > height + this.scalableRange || graphCanvasBBox.maxY + this.scalableRange >= 0 && graphCanvasBBox.maxY + this.scalableRange + dy < 0) {\n      dy = 0;\n    }\n\n    this.graph.translate(dx, dy);\n  },\n  onMouseDown: function onMouseDown(e) {\n    var self = this;\n    var event = e.originalEvent;\n\n    if (event && event.button !== 0) {\n      return;\n    }\n\n    if (e.name !== G6Event.TOUCHSTART && window && window.event && typeof window !== 'undefined' && !window.event.buttons && !window.event.button) {\n      return;\n    }\n\n    if (self.keydown || e.shape) {\n      return;\n    }\n\n    self.origin = {\n      x: e.clientX,\n      y: e.clientY\n    };\n    self.dragging = false;\n\n    if (this.enableOptimize) {\n      // 拖动 canvas 过程中隐藏所有的边及label\n      var graph = this.graph;\n      var edges = graph.getEdges();\n\n      for (var i = 0, len = edges.length; i < len; i++) {\n        var shapes = edges[i].get('group').get('children');\n        if (!shapes) continue;\n        shapes.forEach(function (shape) {\n          shape.hide();\n        });\n      }\n\n      var nodes = graph.getNodes();\n\n      for (var j = 0, nodeLen = nodes.length; j < nodeLen; j++) {\n        var container = nodes[j].getContainer();\n        var children = container.get('children');\n\n        for (var _i = 0, children_1 = children; _i < children_1.length; _i++) {\n          var child = children_1[_i];\n          var isKeyShape = child.get('isKeyShape');\n\n          if (!isKeyShape) {\n            child.hide();\n          }\n        }\n      }\n    }\n  },\n  onMouseMove: function onMouseMove(e) {\n    var graph = this.graph;\n\n    if (this.keydown || e.shape) {\n      return;\n    }\n\n    e = cloneEvent(e);\n\n    if (!this.origin) {\n      return;\n    }\n\n    if (!this.dragging) {\n      if (abs(this.origin.x - e.clientX) + abs(this.origin.y - e.clientY) < DRAG_OFFSET) {\n        return;\n      }\n\n      if (this.shouldBegin.call(this, e)) {\n        e.type = 'dragstart';\n        graph.emit('canvas:dragstart', e);\n        this.dragging = true;\n      }\n    } else {\n      e.type = 'drag';\n      graph.emit('canvas:drag', e);\n    }\n\n    if (this.shouldUpdate.call(this, e)) {\n      this.updateViewport(e);\n    }\n  },\n  onMouseUp: function onMouseUp(e) {\n    var graph = this.graph;\n\n    if (this.keydown || e.shape) {\n      return;\n    }\n\n    if (this.enableOptimize) {\n      // 拖动结束后显示所有的边\n      var edges = graph.getEdges();\n\n      for (var i = 0, len = edges.length; i < len; i++) {\n        var shapes = edges[i].get('group').get('children');\n        if (!shapes) continue;\n        shapes.forEach(function (shape) {\n          shape.show();\n        });\n      }\n\n      var nodes = graph.getNodes();\n\n      for (var j = 0, nodeLen = nodes.length; j < nodeLen; j++) {\n        var container = nodes[j].getContainer();\n        var children = container.get('children');\n\n        for (var _i = 0, children_2 = children; _i < children_2.length; _i++) {\n          var child = children_2[_i];\n          var isKeyShape = child.get('isKeyShape');\n\n          if (!isKeyShape) {\n            child.show();\n          }\n        }\n      }\n    }\n\n    if (!this.dragging) {\n      this.origin = null;\n      return;\n    }\n\n    e = cloneEvent(e);\n\n    if (this.shouldEnd.call(this, e)) {\n      this.updateViewport(e);\n    }\n\n    e.type = 'dragend';\n    graph.emit('canvas:dragend', e);\n    this.endDrag();\n  },\n  endDrag: function endDrag() {\n    this.origin = null;\n    this.dragging = false;\n    this.dragbegin = false;\n  },\n  onKeyDown: function onKeyDown(e) {\n    var self = this;\n    var code = e.key;\n\n    if (!code) {\n      return;\n    }\n\n    if (ALLOW_EVENTS.indexOf(code.toLowerCase()) > -1) {\n      self.keydown = true;\n    } else {\n      self.keydown = false;\n    }\n  },\n  onKeyUp: function onKeyUp() {\n    this.keydown = false;\n    this.origin = null;\n    this.dragging = false;\n    this.dragbegin = false;\n  }\n};"]},"metadata":{},"sourceType":"module"}