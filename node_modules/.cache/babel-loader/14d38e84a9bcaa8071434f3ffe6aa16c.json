{"ast":null,"code":"import { __assign } from \"tslib\";\nimport { isArray, isNil, clone } from '@antv/util';\nimport Global from '../global';\nimport Shape from './shape';\nimport { shapeBase } from './shapeBase';\nvar singleCombo = {\n  itemType: 'combo',\n  // 单个图形的类型\n  shapeType: 'single-combo',\n\n  /**\n   * Combo 标题文本相对图形的位置，默认为 top\n   * 位置包括： top, bottom, left, right, center\n   * @type {String}\n   */\n  labelPosition: 'top',\n\n  /**\n   * 标题文本相对偏移，当 labelPosition 不为 center 时有效\n   * @type {Number}\n   */\n  refX: Global.comboLabel.refX,\n  refY: Global.comboLabel.refY,\n  options: {\n    style: {\n      stroke: Global.defaultCombo.style.stroke,\n      fill: Global.defaultCombo.style.fill,\n      lineWidth: Global.defaultCombo.style.lineWidth\n    },\n    labelCfg: {\n      style: {\n        fill: Global.comboLabel.style.fill,\n        fontSize: Global.comboLabel.style.fontSize\n      }\n    },\n    stateStyles: __assign({}, Global.comboStateStyles)\n  },\n\n  /**\n   * 获取 Combo 宽高\n   * @internal 返回 Combo 的大小，以 [width, height] 的方式维护\n   * @param  {Object} cfg Combo 的配置项\n   * @return {Array} 宽高\n   */\n  getSize: function getSize(cfg) {\n    var size = clone(cfg.size || this.options.size || Global.defaultCombo.size); // size 是数组，若长度为 1，则补长度为 2\n\n    if (isArray(size) && size.length === 1) {\n      size = [size[0], size[0]];\n    } // size 为数字，则转换为数组\n\n\n    if (!isArray(size)) {\n      size = [size, size];\n    }\n\n    return size;\n  },\n  // 私有方法，不希望扩展的 Combo 复写这个方法\n  getLabelStyleByPosition: function getLabelStyleByPosition(cfg, labelCfg) {\n    var labelPosition = labelCfg.position || this.labelPosition;\n    var cfgStyle = cfg.style;\n    var padding = cfg.padding || this.options.padding;\n    if (isArray(padding)) padding = padding[0];\n    var refX = labelCfg.refX,\n        refY = labelCfg.refY; // 考虑 refX 和 refY = 0 的场景，不用用 labelCfg.refX || Global.nodeLabel.refX\n\n    if (isNil(refX)) {\n      refX = this.refX; // 不居中时的偏移量\n    }\n\n    if (isNil(refY)) {\n      refY = this.refY; // 不居中时的偏移量\n    }\n\n    var size = this.getSize(cfg);\n    var r = Math.max(cfgStyle.r, size[0] / 2) || size[0] / 2;\n    var dis = r + padding;\n    var style;\n\n    switch (labelPosition) {\n      case 'top':\n        style = {\n          x: 0,\n          y: -dis - refY,\n          textBaseline: 'bottom',\n          textAlign: 'center'\n        };\n        break;\n\n      case 'bottom':\n        style = {\n          x: 0,\n          y: dis + refY,\n          textBaseline: 'bottom',\n          textAlign: 'center'\n        };\n        break;\n\n      case 'left':\n        style = {\n          x: -dis + refX,\n          y: 0,\n          textAlign: 'left'\n        };\n        break;\n\n      case 'center':\n        style = {\n          x: 0,\n          y: 0,\n          text: cfg.label,\n          textAlign: 'center'\n        };\n        break;\n\n      default:\n        style = {\n          x: dis + refX,\n          y: 0,\n          textAlign: 'right'\n        };\n        break;\n    }\n\n    style.text = cfg.label;\n    return style;\n  },\n  drawShape: function drawShape(cfg, group) {\n    var shapeType = this.shapeType; // || this.type，都已经加了 shapeType\n\n    var style = this.getShapeStyle(cfg);\n    var shape = group.addShape(shapeType, {\n      attrs: style,\n      draggable: true,\n      name: 'combo-shape'\n    });\n    return shape;\n  },\n  updateShape: function updateShape(cfg, item, keyShapeStyle) {\n    var keyShape = item.get('keyShape');\n    var animate = cfg.animate === undefined ? this.options.animate : cfg.animate;\n\n    if (animate && keyShape.animate) {\n      keyShape.animate(keyShapeStyle, {\n        duration: 200,\n        easing: 'easeLinear'\n      });\n    } else {\n      keyShape.attr(__assign({}, keyShapeStyle));\n    }\n\n    this.updateLabel(cfg, item); // special for some types of nodes\n  }\n};\n\nvar singleComboDef = __assign(__assign({}, shapeBase), singleCombo);\n\nShape.registerCombo('single-combo', singleComboDef);","map":{"version":3,"sources":["/Users/wanglijie/wanglijie/clover-defi-wallet/node_modules/@antv/g6/es/shape/combo.js"],"names":["__assign","isArray","isNil","clone","Global","Shape","shapeBase","singleCombo","itemType","shapeType","labelPosition","refX","comboLabel","refY","options","style","stroke","defaultCombo","fill","lineWidth","labelCfg","fontSize","stateStyles","comboStateStyles","getSize","cfg","size","length","getLabelStyleByPosition","position","cfgStyle","padding","r","Math","max","dis","x","y","textBaseline","textAlign","text","label","drawShape","group","getShapeStyle","shape","addShape","attrs","draggable","name","updateShape","item","keyShapeStyle","keyShape","get","animate","undefined","duration","easing","attr","updateLabel","singleComboDef","registerCombo"],"mappings":"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","sourcesContent":["import { __assign } from \"tslib\";\nimport { isArray, isNil, clone } from '@antv/util';\nimport Global from '../global';\nimport Shape from './shape';\nimport { shapeBase } from './shapeBase';\nvar singleCombo = {\n  itemType: 'combo',\n  // 单个图形的类型\n  shapeType: 'single-combo',\n\n  /**\n   * Combo 标题文本相对图形的位置，默认为 top\n   * 位置包括： top, bottom, left, right, center\n   * @type {String}\n   */\n  labelPosition: 'top',\n\n  /**\n   * 标题文本相对偏移，当 labelPosition 不为 center 时有效\n   * @type {Number}\n   */\n  refX: Global.comboLabel.refX,\n  refY: Global.comboLabel.refY,\n  options: {\n    style: {\n      stroke: Global.defaultCombo.style.stroke,\n      fill: Global.defaultCombo.style.fill,\n      lineWidth: Global.defaultCombo.style.lineWidth\n    },\n    labelCfg: {\n      style: {\n        fill: Global.comboLabel.style.fill,\n        fontSize: Global.comboLabel.style.fontSize\n      }\n    },\n    stateStyles: __assign({}, Global.comboStateStyles)\n  },\n\n  /**\n   * 获取 Combo 宽高\n   * @internal 返回 Combo 的大小，以 [width, height] 的方式维护\n   * @param  {Object} cfg Combo 的配置项\n   * @return {Array} 宽高\n   */\n  getSize: function getSize(cfg) {\n    var size = clone(cfg.size || this.options.size || Global.defaultCombo.size); // size 是数组，若长度为 1，则补长度为 2\n\n    if (isArray(size) && size.length === 1) {\n      size = [size[0], size[0]];\n    } // size 为数字，则转换为数组\n\n\n    if (!isArray(size)) {\n      size = [size, size];\n    }\n\n    return size;\n  },\n  // 私有方法，不希望扩展的 Combo 复写这个方法\n  getLabelStyleByPosition: function getLabelStyleByPosition(cfg, labelCfg) {\n    var labelPosition = labelCfg.position || this.labelPosition;\n    var cfgStyle = cfg.style;\n    var padding = cfg.padding || this.options.padding;\n    if (isArray(padding)) padding = padding[0];\n    var refX = labelCfg.refX,\n        refY = labelCfg.refY; // 考虑 refX 和 refY = 0 的场景，不用用 labelCfg.refX || Global.nodeLabel.refX\n\n    if (isNil(refX)) {\n      refX = this.refX; // 不居中时的偏移量\n    }\n\n    if (isNil(refY)) {\n      refY = this.refY; // 不居中时的偏移量\n    }\n\n    var size = this.getSize(cfg);\n    var r = Math.max(cfgStyle.r, size[0] / 2) || size[0] / 2;\n    var dis = r + padding;\n    var style;\n\n    switch (labelPosition) {\n      case 'top':\n        style = {\n          x: 0,\n          y: -dis - refY,\n          textBaseline: 'bottom',\n          textAlign: 'center'\n        };\n        break;\n\n      case 'bottom':\n        style = {\n          x: 0,\n          y: dis + refY,\n          textBaseline: 'bottom',\n          textAlign: 'center'\n        };\n        break;\n\n      case 'left':\n        style = {\n          x: -dis + refX,\n          y: 0,\n          textAlign: 'left'\n        };\n        break;\n\n      case 'center':\n        style = {\n          x: 0,\n          y: 0,\n          text: cfg.label,\n          textAlign: 'center'\n        };\n        break;\n\n      default:\n        style = {\n          x: dis + refX,\n          y: 0,\n          textAlign: 'right'\n        };\n        break;\n    }\n\n    style.text = cfg.label;\n    return style;\n  },\n  drawShape: function drawShape(cfg, group) {\n    var shapeType = this.shapeType; // || this.type，都已经加了 shapeType\n\n    var style = this.getShapeStyle(cfg);\n    var shape = group.addShape(shapeType, {\n      attrs: style,\n      draggable: true,\n      name: 'combo-shape'\n    });\n    return shape;\n  },\n  updateShape: function updateShape(cfg, item, keyShapeStyle) {\n    var keyShape = item.get('keyShape');\n    var animate = cfg.animate === undefined ? this.options.animate : cfg.animate;\n\n    if (animate && keyShape.animate) {\n      keyShape.animate(keyShapeStyle, {\n        duration: 200,\n        easing: 'easeLinear'\n      });\n    } else {\n      keyShape.attr(__assign({}, keyShapeStyle));\n    }\n\n    this.updateLabel(cfg, item); // special for some types of nodes\n  }\n};\n\nvar singleComboDef = __assign(__assign({}, shapeBase), singleCombo);\n\nShape.registerCombo('single-combo', singleComboDef);"]},"metadata":{},"sourceType":"module"}