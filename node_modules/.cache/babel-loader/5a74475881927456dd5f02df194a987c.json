{"ast":null,"code":"/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\"use strict\";\n\nexports.__esModule = true;\n\nvar util_1 = require(\"zrender/lib/core/util\");\n\nvar model_1 = require(\"../../util/model\");\n\nvar sourceHelper_1 = require(\"./sourceHelper\");\n\nvar Source_1 = require(\"../Source\");\n\nvar types_1 = require(\"../../util/types\");\n\nvar DataDimensionInfo_1 = require(\"../DataDimensionInfo\");\n\nfunction completeDimensions(sysDims, source, opt) {\n  if (!Source_1.isSourceInstance(source)) {\n    source = Source_1.createSourceFromSeriesDataOption(source);\n  }\n\n  opt = opt || {};\n  sysDims = (sysDims || []).slice();\n  var dimsDef = (opt.dimsDef || []).slice();\n  var dataDimNameMap = util_1.createHashMap();\n  var coordDimNameMap = util_1.createHashMap();\n  var result = [];\n  var dimCount = getDimCount(source, sysDims, dimsDef, opt.dimCount);\n\n  for (var i = 0; i < dimCount; i++) {\n    var dimDefItemRaw = dimsDef[i];\n    var dimDefItem = dimsDef[i] = util_1.extend({}, util_1.isObject(dimDefItemRaw) ? dimDefItemRaw : {\n      name: dimDefItemRaw\n    });\n    var userDimName = dimDefItem.name;\n    var resultItem = result[i] = new DataDimensionInfo_1[\"default\"]();\n\n    if (userDimName != null && dataDimNameMap.get(userDimName) == null) {\n      resultItem.name = resultItem.displayName = userDimName;\n      dataDimNameMap.set(userDimName, i);\n    }\n\n    dimDefItem.type != null && (resultItem.type = dimDefItem.type);\n    dimDefItem.displayName != null && (resultItem.displayName = dimDefItem.displayName);\n  }\n\n  var encodeDef = opt.encodeDef;\n\n  if (!encodeDef && opt.encodeDefaulter) {\n    encodeDef = opt.encodeDefaulter(source, dimCount);\n  }\n\n  var encodeDefMap = util_1.createHashMap(encodeDef);\n  encodeDefMap.each(function (dataDimsRaw, coordDim) {\n    var dataDims = model_1.normalizeToArray(dataDimsRaw).slice();\n\n    if (dataDims.length === 1 && !util_1.isString(dataDims[0]) && dataDims[0] < 0) {\n      encodeDefMap.set(coordDim, false);\n      return;\n    }\n\n    var validDataDims = encodeDefMap.set(coordDim, []);\n    util_1.each(dataDims, function (resultDimIdxOrName, idx) {\n      var resultDimIdx = util_1.isString(resultDimIdxOrName) ? dataDimNameMap.get(resultDimIdxOrName) : resultDimIdxOrName;\n\n      if (resultDimIdx != null && resultDimIdx < dimCount) {\n        validDataDims[idx] = resultDimIdx;\n        applyDim(result[resultDimIdx], coordDim, idx);\n      }\n    });\n  });\n  var availDimIdx = 0;\n  util_1.each(sysDims, function (sysDimItemRaw) {\n    var coordDim;\n    var sysDimItemDimsDef;\n    var sysDimItemOtherDims;\n    var sysDimItem;\n\n    if (util_1.isString(sysDimItemRaw)) {\n      coordDim = sysDimItemRaw;\n      sysDimItem = {};\n    } else {\n      sysDimItem = sysDimItemRaw;\n      coordDim = sysDimItem.name;\n      var ordinalMeta = sysDimItem.ordinalMeta;\n      sysDimItem.ordinalMeta = null;\n      sysDimItem = util_1.clone(sysDimItem);\n      sysDimItem.ordinalMeta = ordinalMeta;\n      sysDimItemDimsDef = sysDimItem.dimsDef;\n      sysDimItemOtherDims = sysDimItem.otherDims;\n      sysDimItem.name = sysDimItem.coordDim = sysDimItem.coordDimIndex = sysDimItem.dimsDef = sysDimItem.otherDims = null;\n    }\n\n    var dataDims = encodeDefMap.get(coordDim);\n\n    if (dataDims === false) {\n      return;\n    }\n\n    dataDims = model_1.normalizeToArray(dataDims);\n\n    if (!dataDims.length) {\n      for (var i = 0; i < (sysDimItemDimsDef && sysDimItemDimsDef.length || 1); i++) {\n        while (availDimIdx < result.length && result[availDimIdx].coordDim != null) {\n          availDimIdx++;\n        }\n\n        availDimIdx < result.length && dataDims.push(availDimIdx++);\n      }\n    }\n\n    util_1.each(dataDims, function (resultDimIdx, coordDimIndex) {\n      var resultItem = result[resultDimIdx];\n      applyDim(util_1.defaults(resultItem, sysDimItem), coordDim, coordDimIndex);\n\n      if (resultItem.name == null && sysDimItemDimsDef) {\n        var sysDimItemDimsDefItem = sysDimItemDimsDef[coordDimIndex];\n        !util_1.isObject(sysDimItemDimsDefItem) && (sysDimItemDimsDefItem = {\n          name: sysDimItemDimsDefItem\n        });\n        resultItem.name = resultItem.displayName = sysDimItemDimsDefItem.name;\n        resultItem.defaultTooltip = sysDimItemDimsDefItem.defaultTooltip;\n      }\n\n      sysDimItemOtherDims && util_1.defaults(resultItem.otherDims, sysDimItemOtherDims);\n    });\n  });\n\n  function applyDim(resultItem, coordDim, coordDimIndex) {\n    if (types_1.VISUAL_DIMENSIONS.get(coordDim) != null) {\n      resultItem.otherDims[coordDim] = coordDimIndex;\n    } else {\n      resultItem.coordDim = coordDim;\n      resultItem.coordDimIndex = coordDimIndex;\n      coordDimNameMap.set(coordDim, true);\n    }\n  }\n\n  var generateCoord = opt.generateCoord;\n  var generateCoordCount = opt.generateCoordCount;\n  var fromZero = generateCoordCount != null;\n  generateCoordCount = generateCoord ? generateCoordCount || 1 : 0;\n  var extra = generateCoord || 'value';\n\n  for (var resultDimIdx = 0; resultDimIdx < dimCount; resultDimIdx++) {\n    var resultItem = result[resultDimIdx] = result[resultDimIdx] || new DataDimensionInfo_1[\"default\"]();\n    var coordDim = resultItem.coordDim;\n\n    if (coordDim == null) {\n      resultItem.coordDim = genName(extra, coordDimNameMap, fromZero);\n      resultItem.coordDimIndex = 0;\n\n      if (!generateCoord || generateCoordCount <= 0) {\n        resultItem.isExtraCoord = true;\n      }\n\n      generateCoordCount--;\n    }\n\n    resultItem.name == null && (resultItem.name = genName(resultItem.coordDim, dataDimNameMap, false));\n\n    if (resultItem.type == null && (sourceHelper_1.guessOrdinal(source, resultDimIdx) === sourceHelper_1.BE_ORDINAL.Must || resultItem.isExtraCoord && (resultItem.otherDims.itemName != null || resultItem.otherDims.seriesName != null))) {\n      resultItem.type = 'ordinal';\n    }\n  }\n\n  return result;\n}\n\nfunction getDimCount(source, sysDims, dimsDef, optDimCount) {\n  var dimCount = Math.max(source.dimensionsDetectedCount || 1, sysDims.length, dimsDef.length, optDimCount || 0);\n  util_1.each(sysDims, function (sysDimItem) {\n    var sysDimItemDimsDef;\n\n    if (util_1.isObject(sysDimItem) && (sysDimItemDimsDef = sysDimItem.dimsDef)) {\n      dimCount = Math.max(dimCount, sysDimItemDimsDef.length);\n    }\n  });\n  return dimCount;\n}\n\nfunction genName(name, map, fromZero) {\n  if (fromZero || map.get(name) != null) {\n    var i = 0;\n\n    while (map.get(name + i) != null) {\n      i++;\n    }\n\n    name += i;\n  }\n\n  map.set(name, true);\n  return name;\n}\n\nexports[\"default\"] = completeDimensions;","map":{"version":3,"sources":["/Users/wanglijie/wanglijie/clover-defi-wallet/node_modules/echarts/lib/data/helper/completeDimensions.js"],"names":["exports","__esModule","util_1","require","model_1","sourceHelper_1","Source_1","types_1","DataDimensionInfo_1","completeDimensions","sysDims","source","opt","isSourceInstance","createSourceFromSeriesDataOption","slice","dimsDef","dataDimNameMap","createHashMap","coordDimNameMap","result","dimCount","getDimCount","i","dimDefItemRaw","dimDefItem","extend","isObject","name","userDimName","resultItem","get","displayName","set","type","encodeDef","encodeDefaulter","encodeDefMap","each","dataDimsRaw","coordDim","dataDims","normalizeToArray","length","isString","validDataDims","resultDimIdxOrName","idx","resultDimIdx","applyDim","availDimIdx","sysDimItemRaw","sysDimItemDimsDef","sysDimItemOtherDims","sysDimItem","ordinalMeta","clone","otherDims","coordDimIndex","push","defaults","sysDimItemDimsDefItem","defaultTooltip","VISUAL_DIMENSIONS","generateCoord","generateCoordCount","fromZero","extra","genName","isExtraCoord","guessOrdinal","BE_ORDINAL","Must","itemName","seriesName","optDimCount","Math","max","dimensionsDetectedCount","map"],"mappings":"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","sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n\"use strict\";\n\nexports.__esModule = true;\n\nvar util_1 = require(\"zrender/lib/core/util\");\n\nvar model_1 = require(\"../../util/model\");\n\nvar sourceHelper_1 = require(\"./sourceHelper\");\n\nvar Source_1 = require(\"../Source\");\n\nvar types_1 = require(\"../../util/types\");\n\nvar DataDimensionInfo_1 = require(\"../DataDimensionInfo\");\n\nfunction completeDimensions(sysDims, source, opt) {\n  if (!Source_1.isSourceInstance(source)) {\n    source = Source_1.createSourceFromSeriesDataOption(source);\n  }\n\n  opt = opt || {};\n  sysDims = (sysDims || []).slice();\n  var dimsDef = (opt.dimsDef || []).slice();\n  var dataDimNameMap = util_1.createHashMap();\n  var coordDimNameMap = util_1.createHashMap();\n  var result = [];\n  var dimCount = getDimCount(source, sysDims, dimsDef, opt.dimCount);\n\n  for (var i = 0; i < dimCount; i++) {\n    var dimDefItemRaw = dimsDef[i];\n    var dimDefItem = dimsDef[i] = util_1.extend({}, util_1.isObject(dimDefItemRaw) ? dimDefItemRaw : {\n      name: dimDefItemRaw\n    });\n    var userDimName = dimDefItem.name;\n    var resultItem = result[i] = new DataDimensionInfo_1[\"default\"]();\n\n    if (userDimName != null && dataDimNameMap.get(userDimName) == null) {\n      resultItem.name = resultItem.displayName = userDimName;\n      dataDimNameMap.set(userDimName, i);\n    }\n\n    dimDefItem.type != null && (resultItem.type = dimDefItem.type);\n    dimDefItem.displayName != null && (resultItem.displayName = dimDefItem.displayName);\n  }\n\n  var encodeDef = opt.encodeDef;\n\n  if (!encodeDef && opt.encodeDefaulter) {\n    encodeDef = opt.encodeDefaulter(source, dimCount);\n  }\n\n  var encodeDefMap = util_1.createHashMap(encodeDef);\n  encodeDefMap.each(function (dataDimsRaw, coordDim) {\n    var dataDims = model_1.normalizeToArray(dataDimsRaw).slice();\n\n    if (dataDims.length === 1 && !util_1.isString(dataDims[0]) && dataDims[0] < 0) {\n      encodeDefMap.set(coordDim, false);\n      return;\n    }\n\n    var validDataDims = encodeDefMap.set(coordDim, []);\n    util_1.each(dataDims, function (resultDimIdxOrName, idx) {\n      var resultDimIdx = util_1.isString(resultDimIdxOrName) ? dataDimNameMap.get(resultDimIdxOrName) : resultDimIdxOrName;\n\n      if (resultDimIdx != null && resultDimIdx < dimCount) {\n        validDataDims[idx] = resultDimIdx;\n        applyDim(result[resultDimIdx], coordDim, idx);\n      }\n    });\n  });\n  var availDimIdx = 0;\n  util_1.each(sysDims, function (sysDimItemRaw) {\n    var coordDim;\n    var sysDimItemDimsDef;\n    var sysDimItemOtherDims;\n    var sysDimItem;\n\n    if (util_1.isString(sysDimItemRaw)) {\n      coordDim = sysDimItemRaw;\n      sysDimItem = {};\n    } else {\n      sysDimItem = sysDimItemRaw;\n      coordDim = sysDimItem.name;\n      var ordinalMeta = sysDimItem.ordinalMeta;\n      sysDimItem.ordinalMeta = null;\n      sysDimItem = util_1.clone(sysDimItem);\n      sysDimItem.ordinalMeta = ordinalMeta;\n      sysDimItemDimsDef = sysDimItem.dimsDef;\n      sysDimItemOtherDims = sysDimItem.otherDims;\n      sysDimItem.name = sysDimItem.coordDim = sysDimItem.coordDimIndex = sysDimItem.dimsDef = sysDimItem.otherDims = null;\n    }\n\n    var dataDims = encodeDefMap.get(coordDim);\n\n    if (dataDims === false) {\n      return;\n    }\n\n    dataDims = model_1.normalizeToArray(dataDims);\n\n    if (!dataDims.length) {\n      for (var i = 0; i < (sysDimItemDimsDef && sysDimItemDimsDef.length || 1); i++) {\n        while (availDimIdx < result.length && result[availDimIdx].coordDim != null) {\n          availDimIdx++;\n        }\n\n        availDimIdx < result.length && dataDims.push(availDimIdx++);\n      }\n    }\n\n    util_1.each(dataDims, function (resultDimIdx, coordDimIndex) {\n      var resultItem = result[resultDimIdx];\n      applyDim(util_1.defaults(resultItem, sysDimItem), coordDim, coordDimIndex);\n\n      if (resultItem.name == null && sysDimItemDimsDef) {\n        var sysDimItemDimsDefItem = sysDimItemDimsDef[coordDimIndex];\n        !util_1.isObject(sysDimItemDimsDefItem) && (sysDimItemDimsDefItem = {\n          name: sysDimItemDimsDefItem\n        });\n        resultItem.name = resultItem.displayName = sysDimItemDimsDefItem.name;\n        resultItem.defaultTooltip = sysDimItemDimsDefItem.defaultTooltip;\n      }\n\n      sysDimItemOtherDims && util_1.defaults(resultItem.otherDims, sysDimItemOtherDims);\n    });\n  });\n\n  function applyDim(resultItem, coordDim, coordDimIndex) {\n    if (types_1.VISUAL_DIMENSIONS.get(coordDim) != null) {\n      resultItem.otherDims[coordDim] = coordDimIndex;\n    } else {\n      resultItem.coordDim = coordDim;\n      resultItem.coordDimIndex = coordDimIndex;\n      coordDimNameMap.set(coordDim, true);\n    }\n  }\n\n  var generateCoord = opt.generateCoord;\n  var generateCoordCount = opt.generateCoordCount;\n  var fromZero = generateCoordCount != null;\n  generateCoordCount = generateCoord ? generateCoordCount || 1 : 0;\n  var extra = generateCoord || 'value';\n\n  for (var resultDimIdx = 0; resultDimIdx < dimCount; resultDimIdx++) {\n    var resultItem = result[resultDimIdx] = result[resultDimIdx] || new DataDimensionInfo_1[\"default\"]();\n    var coordDim = resultItem.coordDim;\n\n    if (coordDim == null) {\n      resultItem.coordDim = genName(extra, coordDimNameMap, fromZero);\n      resultItem.coordDimIndex = 0;\n\n      if (!generateCoord || generateCoordCount <= 0) {\n        resultItem.isExtraCoord = true;\n      }\n\n      generateCoordCount--;\n    }\n\n    resultItem.name == null && (resultItem.name = genName(resultItem.coordDim, dataDimNameMap, false));\n\n    if (resultItem.type == null && (sourceHelper_1.guessOrdinal(source, resultDimIdx) === sourceHelper_1.BE_ORDINAL.Must || resultItem.isExtraCoord && (resultItem.otherDims.itemName != null || resultItem.otherDims.seriesName != null))) {\n      resultItem.type = 'ordinal';\n    }\n  }\n\n  return result;\n}\n\nfunction getDimCount(source, sysDims, dimsDef, optDimCount) {\n  var dimCount = Math.max(source.dimensionsDetectedCount || 1, sysDims.length, dimsDef.length, optDimCount || 0);\n  util_1.each(sysDims, function (sysDimItem) {\n    var sysDimItemDimsDef;\n\n    if (util_1.isObject(sysDimItem) && (sysDimItemDimsDef = sysDimItem.dimsDef)) {\n      dimCount = Math.max(dimCount, sysDimItemDimsDef.length);\n    }\n  });\n  return dimCount;\n}\n\nfunction genName(name, map, fromZero) {\n  if (fromZero || map.get(name) != null) {\n    var i = 0;\n\n    while (map.get(name + i) != null) {\n      i++;\n    }\n\n    name += i;\n  }\n\n  map.set(name, true);\n  return name;\n}\n\nexports[\"default\"] = completeDimensions;"]},"metadata":{},"sourceType":"script"}