{"ast":null,"code":"import { __extends } from \"tslib\";\nimport modifyCSS from '@antv/dom-util/lib/modify-css';\nimport createDOM from '@antv/dom-util/lib/create-dom';\nimport { clone, isString } from '@antv/util/lib';\nimport Base from '../base';\nimport insertCss from 'insert-css';\ninsertCss(\"\\n  .g6-component-toolbar {\\n    position: absolute;\\n    list-style-type: none;\\n    padding: 6px;\\n    left: 0px;\\n    top: 0px;\\n    background-color: rgba(255, 255, 255, 0.9);\\n    border: 1px solid #e2e2e2;\\n    border-radius: 4px;\\n    font-size: 12px;\\n    color: #545454;\\n    margin: 0;\\n  }\\n  .g6-component-toolbar li {\\n    float: left;\\n    text-align: center;\\n    width: 35px;\\n    height: 24px;\\n    cursor: pointer;\\n\\t\\tlist-style-type:none;\\n    list-style: none;\\n    margin-left: 0px;\\n  }\\n  .g6-component-toolbar li .icon {\\n    opacity: 0.7;\\n  }\\n  .g6-component-toolbar li .icon:hover {\\n    opacity: 1;\\n  }\\n\");\n\nvar ToolBar =\n/** @class */\nfunction (_super) {\n  __extends(ToolBar, _super);\n\n  function ToolBar() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  ToolBar.prototype.getDefaultCfgs = function () {\n    return {\n      handleClick: undefined,\n      // 指定菜单内容，function(e) {...}\n      getContent: function getContent(graph) {\n        return \"\\n          <ul class='g6-component-toolbar'>\\n            <li code='redo'>\\n              <svg class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"24\\\" height=\\\"24\\\">\\n                <path d=\\\"M256 682.666667c0-102.741333 66.730667-213.333333 213.333333-213.333334 107.008 0 190.762667 56.576 230.570667 125.354667L611.968 682.666667H853.333333v-241.365334l-91.562666 91.562667C704.768 448.469333 601.130667 384 469.333333 384c-196.096 0-298.666667 150.229333-298.666666 298.666667h85.333333z\\\" fill=\\\"\\\" p-id=\\\"2041\\\"></path>\\n              </svg>\\n            </li>\\n            <li code='undo'>\\n              <svg class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"24\\\" height=\\\"24\\\">\\n                <path d=\\\"M170.666667 682.666667h241.365333l-87.936-87.978667C363.904 525.909333 447.658667 469.333333 554.666667 469.333333c146.602667 0 213.333333 110.592 213.333333 213.333334h85.333333c0-148.437333-102.570667-298.666667-298.666666-298.666667-131.797333 0-235.392 64.469333-292.48 148.821333L170.666667 441.301333V682.666667z\\\" fill=\\\"\\\" p-id=\\\"2764\\\"></path>\\n              </svg>\\n            </li>\\n            <li  code='zoomOut'>\\n              <svg class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"24\\\" height=\\\"24\\\">\\n                <path d=\\\"M658.432 428.736a33.216 33.216 0 0 1-33.152 33.152H525.824v99.456a33.216 33.216 0 0 1-66.304 0V461.888H360.064a33.152 33.152 0 0 1 0-66.304H459.52V296.128a33.152 33.152 0 0 1 66.304 0V395.52H625.28c18.24 0 33.152 14.848 33.152 33.152z m299.776 521.792a43.328 43.328 0 0 1-60.864-6.912l-189.248-220.992a362.368 362.368 0 0 1-215.36 70.848 364.8 364.8 0 1 1 364.8-364.736 363.072 363.072 0 0 1-86.912 235.968l192.384 224.64a43.392 43.392 0 0 1-4.8 61.184z m-465.536-223.36a298.816 298.816 0 0 0 298.432-298.432 298.816 298.816 0 0 0-298.432-298.432A298.816 298.816 0 0 0 194.24 428.8a298.816 298.816 0 0 0 298.432 298.432z\\\"></path>\\n              </svg>\\n            </li>\\n            <li code='zoomIn'>\\n              <svg class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"24\\\" height=\\\"24\\\">\\n                <path d=\\\"M639.936 416a32 32 0 0 1-32 32h-256a32 32 0 0 1 0-64h256a32 32 0 0 1 32 32z m289.28 503.552a41.792 41.792 0 0 1-58.752-6.656l-182.656-213.248A349.76 349.76 0 0 1 480 768 352 352 0 1 1 832 416a350.4 350.4 0 0 1-83.84 227.712l185.664 216.768a41.856 41.856 0 0 1-4.608 59.072zM479.936 704c158.784 0 288-129.216 288-288S638.72 128 479.936 128a288.32 288.32 0 0 0-288 288c0 158.784 129.216 288 288 288z\\\" p-id=\\\"3853\\\"></path>\\n              </svg>\\n            </li>\\n            <li code='realZoom'>\\n              <svg class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"20\\\" height=\\\"24\\\">\\n                <path d=\\\"M384 320v384H320V320h64z m256 0v384H576V320h64zM512 576v64H448V576h64z m0-192v64H448V384h64z m355.968 576H92.032A28.16 28.16 0 0 1 64 931.968V28.032C64 12.608 76.608 0 95.168 0h610.368L896 192v739.968a28.16 28.16 0 0 1-28.032 28.032zM704 64v128h128l-128-128z m128 192h-190.464V64H128v832h704V256z\\\"></path>\\n              </svg>\\n            </li>\\n            <li code='autoZoom'>\\n              <svg class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"20\\\" height=\\\"24\\\">\\n                <path d=\\\"M684.288 305.28l0.128-0.64-0.128-0.64V99.712c0-19.84 15.552-35.904 34.496-35.712a35.072 35.072 0 0 1 34.56 35.776v171.008h170.944c19.648 0 35.84 15.488 35.712 34.432a35.072 35.072 0 0 1-35.84 34.496h-204.16l-0.64-0.128a32.768 32.768 0 0 1-20.864-7.552c-1.344-1.024-2.816-1.664-3.968-2.816-0.384-0.32-0.512-0.768-0.832-1.088a33.472 33.472 0 0 1-9.408-22.848zM305.28 64a35.072 35.072 0 0 0-34.56 35.776v171.008H99.776A35.072 35.072 0 0 0 64 305.216c0 18.944 15.872 34.496 35.84 34.496h204.16l0.64-0.128a32.896 32.896 0 0 0 20.864-7.552c1.344-1.024 2.816-1.664 3.904-2.816 0.384-0.32 0.512-0.768 0.768-1.088a33.024 33.024 0 0 0 9.536-22.848l-0.128-0.64 0.128-0.704V99.712A35.008 35.008 0 0 0 305.216 64z m618.944 620.288h-204.16l-0.64 0.128-0.512-0.128c-7.808 0-14.72 3.2-20.48 7.68-1.28 1.024-2.752 1.664-3.84 2.752-0.384 0.32-0.512 0.768-0.832 1.088a33.664 33.664 0 0 0-9.408 22.912l0.128 0.64-0.128 0.704v204.288c0 19.712 15.552 35.904 34.496 35.712a35.072 35.072 0 0 0 34.56-35.776V753.28h170.944c19.648 0 35.84-15.488 35.712-34.432a35.072 35.072 0 0 0-35.84-34.496z m-593.92 11.52c-0.256-0.32-0.384-0.768-0.768-1.088-1.088-1.088-2.56-1.728-3.84-2.688a33.088 33.088 0 0 0-20.48-7.68l-0.512 0.064-0.64-0.128H99.84a35.072 35.072 0 0 0-35.84 34.496 35.072 35.072 0 0 0 35.712 34.432H270.72v171.008c0 19.84 15.552 35.84 34.56 35.776a35.008 35.008 0 0 0 34.432-35.712V720l-0.128-0.64 0.128-0.704a33.344 33.344 0 0 0-9.472-22.848zM512 374.144a137.92 137.92 0 1 0 0.128 275.84A137.92 137.92 0 0 0 512 374.08z\\\"></path>\\n              </svg>\\n            </li>\\n          </ul>\\n        \";\n      }\n    };\n  };\n\n  ToolBar.prototype.init = function () {\n    var _this = this;\n\n    var graph = this.get('graph');\n    var getContent = this.get('getContent');\n    var toolBar = getContent(graph);\n    var toolBarDOM = toolBar;\n\n    if (isString(toolBar)) {\n      toolBarDOM = createDOM(toolBar);\n    }\n\n    var className = this.get('className');\n    toolBarDOM.setAttribute('class', className || 'g6-component-toolbar');\n    var container = this.get('container');\n\n    if (!container) {\n      container = this.get('graph').get('container');\n    }\n\n    container.appendChild(toolBarDOM);\n    this.set('toolBar', toolBarDOM);\n    var handleClick = this.get('handleClick');\n    toolBarDOM.addEventListener('click', function (evt) {\n      var current = evt.path.filter(function (p) {\n        return p.nodeName === 'LI';\n      });\n\n      if (current.length === 0) {\n        return;\n      }\n\n      var code = current[0].getAttribute('code');\n\n      if (!code) {\n        return;\n      }\n\n      if (handleClick) {\n        handleClick(code, graph);\n      } else {\n        _this.handleDefaultOperator(code, graph);\n      }\n    });\n    var pos = this.get('position');\n\n    if (pos) {\n      modifyCSS(toolBarDOM, {\n        top: pos.y + \"px\",\n        left: pos.x + \"px\"\n      });\n    }\n\n    this.bindUndoRedo();\n  };\n\n  ToolBar.prototype.bindUndoRedo = function () {\n    var graph = this.get('graph');\n    var undoDom = document.querySelector('.g6-component-toolbar li[code=\"undo\"]');\n    var undoDomIcon = document.querySelector('.g6-component-toolbar li[code=\"undo\"] svg');\n    var redoDom = document.querySelector('.g6-component-toolbar li[code=\"redo\"]');\n    var redoDomIcon = document.querySelector('.g6-component-toolbar li[code=\"redo\"] svg');\n\n    if (!undoDom || !undoDomIcon || !redoDom || !redoDomIcon) {\n      return;\n    }\n\n    graph.on('stackchange', function (evt) {\n      var undoStack = evt.undoStack,\n          redoStack = evt.redoStack;\n      var undoStackLen = undoStack.length;\n      var redoStackLen = redoStack.length; // undo 不可用\n\n      if (undoStackLen === 1) {\n        undoDom.setAttribute('style', 'cursor: not-allowed');\n        undoDomIcon.setAttribute('style', 'opacity: 0.4');\n      } else {\n        undoDom.removeAttribute('style');\n        undoDomIcon.removeAttribute('style');\n      } // redo 不可用\n\n\n      if (redoStackLen === 0) {\n        redoDom.setAttribute('style', 'cursor: not-allowed');\n        redoDomIcon.setAttribute('style', 'opacity: 0.4');\n      } else {\n        redoDom.removeAttribute('style');\n        redoDomIcon.removeAttribute('style');\n      }\n    });\n  };\n  /**\n   * undo 操作\n   */\n\n\n  ToolBar.prototype.undo = function () {\n    var graph = this.get('graph');\n    var undoStack = graph.getUndoStack();\n\n    if (!undoStack || undoStack.length === 0) {\n      return;\n    }\n\n    var currentData = undoStack.pop();\n\n    if (currentData) {\n      var action = currentData.action;\n      graph.pushStack(action, clone(currentData.data), 'redo');\n      var data_1 = currentData.data.before;\n\n      if (action === 'add') {\n        data_1 = currentData.data.after;\n      }\n\n      if (!data_1) return;\n\n      switch (action) {\n        case 'visible':\n          {\n            Object.keys(data_1).forEach(function (key) {\n              var array = data_1[key];\n              if (!array) return;\n              array.forEach(function (model) {\n                var item = graph.findById(model.id);\n\n                if (model.visible) {\n                  graph.showItem(item, false);\n                } else {\n                  graph.hideItem(item, false);\n                }\n              });\n            });\n            break;\n          }\n\n        case 'render':\n        case 'update':\n          Object.keys(data_1).forEach(function (key) {\n            var array = data_1[key];\n            if (!array) return;\n            array.forEach(function (model) {\n              graph.updateItem(model.id, model, false);\n            });\n          });\n          break;\n\n        case 'changedata':\n          graph.changeData(data_1, false);\n          break;\n\n        case 'delete':\n          {\n            Object.keys(data_1).forEach(function (key) {\n              var array = data_1[key];\n              if (!array) return;\n              array.forEach(function (model) {\n                var itemType = model.itemType;\n                delete model.itemType;\n                graph.addItem(itemType, model, false);\n              });\n            });\n            break;\n          }\n\n        case 'add':\n          Object.keys(data_1).forEach(function (key) {\n            var array = data_1[key];\n            if (!array) return;\n            array.forEach(function (model) {\n              graph.removeItem(model.id, false);\n            });\n          });\n          break;\n\n        default:\n      }\n    }\n  };\n  /**\n   * redo 操作\n   */\n\n\n  ToolBar.prototype.redo = function () {\n    var graph = this.get('graph');\n    var redoStack = graph.getRedoStack();\n\n    if (!redoStack || redoStack.length === 0) {\n      return;\n    }\n\n    var currentData = redoStack.pop();\n\n    if (currentData) {\n      var action = currentData.action;\n      var data_2 = currentData.data.after;\n      graph.pushStack(action, clone(currentData.data));\n\n      if (action === 'delete') {\n        data_2 = currentData.data.before;\n      }\n\n      if (!data_2) return;\n\n      switch (action) {\n        case 'visible':\n          {\n            Object.keys(data_2).forEach(function (key) {\n              var array = data_2[key];\n              if (!array) return;\n              array.forEach(function (model) {\n                var item = graph.findById(model.id);\n\n                if (model.visible) {\n                  graph.showItem(item, false);\n                } else {\n                  graph.hideItem(item, false);\n                }\n              });\n            });\n            break;\n          }\n\n        case 'render':\n        case 'update':\n          Object.keys(data_2).forEach(function (key) {\n            var array = data_2[key];\n            if (!array) return;\n            array.forEach(function (model) {\n              graph.updateItem(model.id, model, false);\n            });\n          });\n          break;\n\n        case 'changedata':\n          graph.changeData(data_2, false);\n          break;\n\n        case 'delete':\n          if (data_2.edges) {\n            data_2.edges.forEach(function (model) {\n              graph.removeItem(model.id, false);\n            });\n          }\n\n          if (data_2.nodes) {\n            data_2.nodes.forEach(function (model) {\n              graph.removeItem(model.id, false);\n            });\n          }\n\n          if (data_2.combos) {\n            data_2.combos.forEach(function (model) {\n              graph.removeItem(model.id, false);\n            });\n          }\n\n          break;\n\n        case 'add':\n          {\n            Object.keys(data_2).forEach(function (key) {\n              var array = data_2[key];\n              if (!array) return;\n              array.forEach(function (model) {\n                var itemType = model.itemType;\n                delete model.itemType;\n                graph.addItem(itemType, model, false);\n              });\n            });\n            break;\n          }\n\n        default:\n      }\n    }\n  };\n  /**\n   * 根据 Toolbar 上不同类型对图进行操作\n   * @param code 操作类型编码\n   * @param graph Graph 实例\n   */\n\n\n  ToolBar.prototype.handleDefaultOperator = function (code, graph) {\n    var currentZoom = graph.getZoom();\n\n    switch (code) {\n      case 'redo':\n        this.redo();\n        break;\n\n      case 'undo':\n        this.undo();\n        break;\n\n      case 'zoomOut':\n        {\n          var ratioOut = 1 + 0.05 * 5;\n\n          if (ratioOut * currentZoom > 5) {\n            return;\n          }\n\n          graph.zoomTo(currentZoom * 1.1);\n          break;\n        }\n\n      case 'zoomIn':\n        {\n          var ratioIn = 1 - 0.05 * 5;\n\n          if (ratioIn * currentZoom < 0.3) {\n            return;\n          }\n\n          graph.zoomTo(currentZoom * 0.9);\n          break;\n        }\n\n      case 'realZoom':\n        graph.zoomTo(1);\n        break;\n\n      case 'autoZoom':\n        graph.fitView([20, 20]);\n        break;\n\n      default:\n    }\n  };\n\n  ToolBar.prototype.destroy = function () {\n    var toolBar = this.get('toolBar');\n\n    if (toolBar) {\n      var container = this.get('container');\n\n      if (!container) {\n        container = this.get('graph').get('container');\n      }\n\n      container.removeChild(toolBar);\n    }\n\n    var handleClick = this.get('handleClick');\n\n    if (handleClick) {\n      toolBar.removeEventListener('click', handleClick);\n    }\n  };\n\n  return ToolBar;\n}(Base);\n\nexport default ToolBar;","map":{"version":3,"sources":["/Users/wanglijie/wanglijie/clover-defi-wallet/node_modules/@antv/g6/es/plugins/toolBar/index.js"],"names":["__extends","modifyCSS","createDOM","clone","isString","Base","insertCss","ToolBar","_super","apply","arguments","prototype","getDefaultCfgs","handleClick","undefined","getContent","graph","init","_this","get","toolBar","toolBarDOM","className","setAttribute","container","appendChild","set","addEventListener","evt","current","path","filter","p","nodeName","length","code","getAttribute","handleDefaultOperator","pos","top","y","left","x","bindUndoRedo","undoDom","document","querySelector","undoDomIcon","redoDom","redoDomIcon","on","undoStack","redoStack","undoStackLen","redoStackLen","removeAttribute","undo","getUndoStack","currentData","pop","action","pushStack","data","data_1","before","after","Object","keys","forEach","key","array","model","item","findById","id","visible","showItem","hideItem","updateItem","changeData","itemType","addItem","removeItem","redo","getRedoStack","data_2","edges","nodes","combos","currentZoom","getZoom","ratioOut","zoomTo","ratioIn","fitView","destroy","removeChild","removeEventListener"],"mappings":"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","sourcesContent":["import { __extends } from \"tslib\";\nimport modifyCSS from '@antv/dom-util/lib/modify-css';\nimport createDOM from '@antv/dom-util/lib/create-dom';\nimport { clone, isString } from '@antv/util/lib';\nimport Base from '../base';\nimport insertCss from 'insert-css';\ninsertCss(\"\\n  .g6-component-toolbar {\\n    position: absolute;\\n    list-style-type: none;\\n    padding: 6px;\\n    left: 0px;\\n    top: 0px;\\n    background-color: rgba(255, 255, 255, 0.9);\\n    border: 1px solid #e2e2e2;\\n    border-radius: 4px;\\n    font-size: 12px;\\n    color: #545454;\\n    margin: 0;\\n  }\\n  .g6-component-toolbar li {\\n    float: left;\\n    text-align: center;\\n    width: 35px;\\n    height: 24px;\\n    cursor: pointer;\\n\\t\\tlist-style-type:none;\\n    list-style: none;\\n    margin-left: 0px;\\n  }\\n  .g6-component-toolbar li .icon {\\n    opacity: 0.7;\\n  }\\n  .g6-component-toolbar li .icon:hover {\\n    opacity: 1;\\n  }\\n\");\n\nvar ToolBar =\n/** @class */\nfunction (_super) {\n  __extends(ToolBar, _super);\n\n  function ToolBar() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  ToolBar.prototype.getDefaultCfgs = function () {\n    return {\n      handleClick: undefined,\n      // 指定菜单内容，function(e) {...}\n      getContent: function getContent(graph) {\n        return \"\\n          <ul class='g6-component-toolbar'>\\n            <li code='redo'>\\n              <svg class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"24\\\" height=\\\"24\\\">\\n                <path d=\\\"M256 682.666667c0-102.741333 66.730667-213.333333 213.333333-213.333334 107.008 0 190.762667 56.576 230.570667 125.354667L611.968 682.666667H853.333333v-241.365334l-91.562666 91.562667C704.768 448.469333 601.130667 384 469.333333 384c-196.096 0-298.666667 150.229333-298.666666 298.666667h85.333333z\\\" fill=\\\"\\\" p-id=\\\"2041\\\"></path>\\n              </svg>\\n            </li>\\n            <li code='undo'>\\n              <svg class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"24\\\" height=\\\"24\\\">\\n                <path d=\\\"M170.666667 682.666667h241.365333l-87.936-87.978667C363.904 525.909333 447.658667 469.333333 554.666667 469.333333c146.602667 0 213.333333 110.592 213.333333 213.333334h85.333333c0-148.437333-102.570667-298.666667-298.666666-298.666667-131.797333 0-235.392 64.469333-292.48 148.821333L170.666667 441.301333V682.666667z\\\" fill=\\\"\\\" p-id=\\\"2764\\\"></path>\\n              </svg>\\n            </li>\\n            <li  code='zoomOut'>\\n              <svg class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"24\\\" height=\\\"24\\\">\\n                <path d=\\\"M658.432 428.736a33.216 33.216 0 0 1-33.152 33.152H525.824v99.456a33.216 33.216 0 0 1-66.304 0V461.888H360.064a33.152 33.152 0 0 1 0-66.304H459.52V296.128a33.152 33.152 0 0 1 66.304 0V395.52H625.28c18.24 0 33.152 14.848 33.152 33.152z m299.776 521.792a43.328 43.328 0 0 1-60.864-6.912l-189.248-220.992a362.368 362.368 0 0 1-215.36 70.848 364.8 364.8 0 1 1 364.8-364.736 363.072 363.072 0 0 1-86.912 235.968l192.384 224.64a43.392 43.392 0 0 1-4.8 61.184z m-465.536-223.36a298.816 298.816 0 0 0 298.432-298.432 298.816 298.816 0 0 0-298.432-298.432A298.816 298.816 0 0 0 194.24 428.8a298.816 298.816 0 0 0 298.432 298.432z\\\"></path>\\n              </svg>\\n            </li>\\n            <li code='zoomIn'>\\n              <svg class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"24\\\" height=\\\"24\\\">\\n                <path d=\\\"M639.936 416a32 32 0 0 1-32 32h-256a32 32 0 0 1 0-64h256a32 32 0 0 1 32 32z m289.28 503.552a41.792 41.792 0 0 1-58.752-6.656l-182.656-213.248A349.76 349.76 0 0 1 480 768 352 352 0 1 1 832 416a350.4 350.4 0 0 1-83.84 227.712l185.664 216.768a41.856 41.856 0 0 1-4.608 59.072zM479.936 704c158.784 0 288-129.216 288-288S638.72 128 479.936 128a288.32 288.32 0 0 0-288 288c0 158.784 129.216 288 288 288z\\\" p-id=\\\"3853\\\"></path>\\n              </svg>\\n            </li>\\n            <li code='realZoom'>\\n              <svg class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"20\\\" height=\\\"24\\\">\\n                <path d=\\\"M384 320v384H320V320h64z m256 0v384H576V320h64zM512 576v64H448V576h64z m0-192v64H448V384h64z m355.968 576H92.032A28.16 28.16 0 0 1 64 931.968V28.032C64 12.608 76.608 0 95.168 0h610.368L896 192v739.968a28.16 28.16 0 0 1-28.032 28.032zM704 64v128h128l-128-128z m128 192h-190.464V64H128v832h704V256z\\\"></path>\\n              </svg>\\n            </li>\\n            <li code='autoZoom'>\\n              <svg class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"20\\\" height=\\\"24\\\">\\n                <path d=\\\"M684.288 305.28l0.128-0.64-0.128-0.64V99.712c0-19.84 15.552-35.904 34.496-35.712a35.072 35.072 0 0 1 34.56 35.776v171.008h170.944c19.648 0 35.84 15.488 35.712 34.432a35.072 35.072 0 0 1-35.84 34.496h-204.16l-0.64-0.128a32.768 32.768 0 0 1-20.864-7.552c-1.344-1.024-2.816-1.664-3.968-2.816-0.384-0.32-0.512-0.768-0.832-1.088a33.472 33.472 0 0 1-9.408-22.848zM305.28 64a35.072 35.072 0 0 0-34.56 35.776v171.008H99.776A35.072 35.072 0 0 0 64 305.216c0 18.944 15.872 34.496 35.84 34.496h204.16l0.64-0.128a32.896 32.896 0 0 0 20.864-7.552c1.344-1.024 2.816-1.664 3.904-2.816 0.384-0.32 0.512-0.768 0.768-1.088a33.024 33.024 0 0 0 9.536-22.848l-0.128-0.64 0.128-0.704V99.712A35.008 35.008 0 0 0 305.216 64z m618.944 620.288h-204.16l-0.64 0.128-0.512-0.128c-7.808 0-14.72 3.2-20.48 7.68-1.28 1.024-2.752 1.664-3.84 2.752-0.384 0.32-0.512 0.768-0.832 1.088a33.664 33.664 0 0 0-9.408 22.912l0.128 0.64-0.128 0.704v204.288c0 19.712 15.552 35.904 34.496 35.712a35.072 35.072 0 0 0 34.56-35.776V753.28h170.944c19.648 0 35.84-15.488 35.712-34.432a35.072 35.072 0 0 0-35.84-34.496z m-593.92 11.52c-0.256-0.32-0.384-0.768-0.768-1.088-1.088-1.088-2.56-1.728-3.84-2.688a33.088 33.088 0 0 0-20.48-7.68l-0.512 0.064-0.64-0.128H99.84a35.072 35.072 0 0 0-35.84 34.496 35.072 35.072 0 0 0 35.712 34.432H270.72v171.008c0 19.84 15.552 35.84 34.56 35.776a35.008 35.008 0 0 0 34.432-35.712V720l-0.128-0.64 0.128-0.704a33.344 33.344 0 0 0-9.472-22.848zM512 374.144a137.92 137.92 0 1 0 0.128 275.84A137.92 137.92 0 0 0 512 374.08z\\\"></path>\\n              </svg>\\n            </li>\\n          </ul>\\n        \";\n      }\n    };\n  };\n\n  ToolBar.prototype.init = function () {\n    var _this = this;\n\n    var graph = this.get('graph');\n    var getContent = this.get('getContent');\n    var toolBar = getContent(graph);\n    var toolBarDOM = toolBar;\n\n    if (isString(toolBar)) {\n      toolBarDOM = createDOM(toolBar);\n    }\n\n    var className = this.get('className');\n    toolBarDOM.setAttribute('class', className || 'g6-component-toolbar');\n    var container = this.get('container');\n\n    if (!container) {\n      container = this.get('graph').get('container');\n    }\n\n    container.appendChild(toolBarDOM);\n    this.set('toolBar', toolBarDOM);\n    var handleClick = this.get('handleClick');\n    toolBarDOM.addEventListener('click', function (evt) {\n      var current = evt.path.filter(function (p) {\n        return p.nodeName === 'LI';\n      });\n\n      if (current.length === 0) {\n        return;\n      }\n\n      var code = current[0].getAttribute('code');\n\n      if (!code) {\n        return;\n      }\n\n      if (handleClick) {\n        handleClick(code, graph);\n      } else {\n        _this.handleDefaultOperator(code, graph);\n      }\n    });\n    var pos = this.get('position');\n\n    if (pos) {\n      modifyCSS(toolBarDOM, {\n        top: pos.y + \"px\",\n        left: pos.x + \"px\"\n      });\n    }\n\n    this.bindUndoRedo();\n  };\n\n  ToolBar.prototype.bindUndoRedo = function () {\n    var graph = this.get('graph');\n    var undoDom = document.querySelector('.g6-component-toolbar li[code=\"undo\"]');\n    var undoDomIcon = document.querySelector('.g6-component-toolbar li[code=\"undo\"] svg');\n    var redoDom = document.querySelector('.g6-component-toolbar li[code=\"redo\"]');\n    var redoDomIcon = document.querySelector('.g6-component-toolbar li[code=\"redo\"] svg');\n\n    if (!undoDom || !undoDomIcon || !redoDom || !redoDomIcon) {\n      return;\n    }\n\n    graph.on('stackchange', function (evt) {\n      var undoStack = evt.undoStack,\n          redoStack = evt.redoStack;\n      var undoStackLen = undoStack.length;\n      var redoStackLen = redoStack.length; // undo 不可用\n\n      if (undoStackLen === 1) {\n        undoDom.setAttribute('style', 'cursor: not-allowed');\n        undoDomIcon.setAttribute('style', 'opacity: 0.4');\n      } else {\n        undoDom.removeAttribute('style');\n        undoDomIcon.removeAttribute('style');\n      } // redo 不可用\n\n\n      if (redoStackLen === 0) {\n        redoDom.setAttribute('style', 'cursor: not-allowed');\n        redoDomIcon.setAttribute('style', 'opacity: 0.4');\n      } else {\n        redoDom.removeAttribute('style');\n        redoDomIcon.removeAttribute('style');\n      }\n    });\n  };\n  /**\n   * undo 操作\n   */\n\n\n  ToolBar.prototype.undo = function () {\n    var graph = this.get('graph');\n    var undoStack = graph.getUndoStack();\n\n    if (!undoStack || undoStack.length === 0) {\n      return;\n    }\n\n    var currentData = undoStack.pop();\n\n    if (currentData) {\n      var action = currentData.action;\n      graph.pushStack(action, clone(currentData.data), 'redo');\n      var data_1 = currentData.data.before;\n\n      if (action === 'add') {\n        data_1 = currentData.data.after;\n      }\n\n      if (!data_1) return;\n\n      switch (action) {\n        case 'visible':\n          {\n            Object.keys(data_1).forEach(function (key) {\n              var array = data_1[key];\n              if (!array) return;\n              array.forEach(function (model) {\n                var item = graph.findById(model.id);\n\n                if (model.visible) {\n                  graph.showItem(item, false);\n                } else {\n                  graph.hideItem(item, false);\n                }\n              });\n            });\n            break;\n          }\n\n        case 'render':\n        case 'update':\n          Object.keys(data_1).forEach(function (key) {\n            var array = data_1[key];\n            if (!array) return;\n            array.forEach(function (model) {\n              graph.updateItem(model.id, model, false);\n            });\n          });\n          break;\n\n        case 'changedata':\n          graph.changeData(data_1, false);\n          break;\n\n        case 'delete':\n          {\n            Object.keys(data_1).forEach(function (key) {\n              var array = data_1[key];\n              if (!array) return;\n              array.forEach(function (model) {\n                var itemType = model.itemType;\n                delete model.itemType;\n                graph.addItem(itemType, model, false);\n              });\n            });\n            break;\n          }\n\n        case 'add':\n          Object.keys(data_1).forEach(function (key) {\n            var array = data_1[key];\n            if (!array) return;\n            array.forEach(function (model) {\n              graph.removeItem(model.id, false);\n            });\n          });\n          break;\n\n        default:\n      }\n    }\n  };\n  /**\n   * redo 操作\n   */\n\n\n  ToolBar.prototype.redo = function () {\n    var graph = this.get('graph');\n    var redoStack = graph.getRedoStack();\n\n    if (!redoStack || redoStack.length === 0) {\n      return;\n    }\n\n    var currentData = redoStack.pop();\n\n    if (currentData) {\n      var action = currentData.action;\n      var data_2 = currentData.data.after;\n      graph.pushStack(action, clone(currentData.data));\n\n      if (action === 'delete') {\n        data_2 = currentData.data.before;\n      }\n\n      if (!data_2) return;\n\n      switch (action) {\n        case 'visible':\n          {\n            Object.keys(data_2).forEach(function (key) {\n              var array = data_2[key];\n              if (!array) return;\n              array.forEach(function (model) {\n                var item = graph.findById(model.id);\n\n                if (model.visible) {\n                  graph.showItem(item, false);\n                } else {\n                  graph.hideItem(item, false);\n                }\n              });\n            });\n            break;\n          }\n\n        case 'render':\n        case 'update':\n          Object.keys(data_2).forEach(function (key) {\n            var array = data_2[key];\n            if (!array) return;\n            array.forEach(function (model) {\n              graph.updateItem(model.id, model, false);\n            });\n          });\n          break;\n\n        case 'changedata':\n          graph.changeData(data_2, false);\n          break;\n\n        case 'delete':\n          if (data_2.edges) {\n            data_2.edges.forEach(function (model) {\n              graph.removeItem(model.id, false);\n            });\n          }\n\n          if (data_2.nodes) {\n            data_2.nodes.forEach(function (model) {\n              graph.removeItem(model.id, false);\n            });\n          }\n\n          if (data_2.combos) {\n            data_2.combos.forEach(function (model) {\n              graph.removeItem(model.id, false);\n            });\n          }\n\n          break;\n\n        case 'add':\n          {\n            Object.keys(data_2).forEach(function (key) {\n              var array = data_2[key];\n              if (!array) return;\n              array.forEach(function (model) {\n                var itemType = model.itemType;\n                delete model.itemType;\n                graph.addItem(itemType, model, false);\n              });\n            });\n            break;\n          }\n\n        default:\n      }\n    }\n  };\n  /**\n   * 根据 Toolbar 上不同类型对图进行操作\n   * @param code 操作类型编码\n   * @param graph Graph 实例\n   */\n\n\n  ToolBar.prototype.handleDefaultOperator = function (code, graph) {\n    var currentZoom = graph.getZoom();\n\n    switch (code) {\n      case 'redo':\n        this.redo();\n        break;\n\n      case 'undo':\n        this.undo();\n        break;\n\n      case 'zoomOut':\n        {\n          var ratioOut = 1 + 0.05 * 5;\n\n          if (ratioOut * currentZoom > 5) {\n            return;\n          }\n\n          graph.zoomTo(currentZoom * 1.1);\n          break;\n        }\n\n      case 'zoomIn':\n        {\n          var ratioIn = 1 - 0.05 * 5;\n\n          if (ratioIn * currentZoom < 0.3) {\n            return;\n          }\n\n          graph.zoomTo(currentZoom * 0.9);\n          break;\n        }\n\n      case 'realZoom':\n        graph.zoomTo(1);\n        break;\n\n      case 'autoZoom':\n        graph.fitView([20, 20]);\n        break;\n\n      default:\n    }\n  };\n\n  ToolBar.prototype.destroy = function () {\n    var toolBar = this.get('toolBar');\n\n    if (toolBar) {\n      var container = this.get('container');\n\n      if (!container) {\n        container = this.get('graph').get('container');\n      }\n\n      container.removeChild(toolBar);\n    }\n\n    var handleClick = this.get('handleClick');\n\n    if (handleClick) {\n      toolBar.removeEventListener('click', handleClick);\n    }\n  };\n\n  return ToolBar;\n}(Base);\n\nexport default ToolBar;"]},"metadata":{},"sourceType":"module"}