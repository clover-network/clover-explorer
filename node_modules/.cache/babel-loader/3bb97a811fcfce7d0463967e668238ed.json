{"ast":null,"code":"import _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport ViewPager from '@react-native-community/viewpager';\nimport React from 'react';\nimport { Text, View } from 'react-native';\nimport { WithTheme } from '../style';\nimport CarouselStyles from './style/index';\n\nvar defaultPagination = function defaultPagination(props) {\n  var styles = props.styles,\n      current = props.current,\n      vertical = props.vertical,\n      count = props.count,\n      dotStyle = props.dotStyle,\n      dotActiveStyle = props.dotActiveStyle;\n  var positionStyle = vertical ? 'paginationY' : 'paginationX';\n  var flexDirection = vertical ? 'column' : 'row';\n  var arr = [];\n\n  for (var i = 0; i < count; i++) {\n    arr.push(React.createElement(View, {\n      key: 'dot-' + i,\n      style: [styles.pointStyle, styles.spaceStyle, dotStyle, i === current && styles.pointActiveStyle, i === current && dotActiveStyle]\n    }));\n  }\n\n  return React.createElement(View, {\n    style: [styles.pagination, styles[positionStyle]]\n  }, React.createElement(View, {\n    style: {\n      flexDirection: flexDirection\n    }\n  }, arr));\n};\n\nvar Carousel = function (_React$Component) {\n  _inherits(Carousel, _React$Component);\n\n  function Carousel(props) {\n    _classCallCheck(this, Carousel);\n\n    var _this = _possibleConstructorReturn(this, (Carousel.__proto__ || Object.getPrototypeOf(Carousel)).call(this, props));\n\n    _this.viewPager = React.createRef();\n\n    _this.getChildrenCount = function (children) {\n      var count = children ? React.Children.count(children) || 1 : 0;\n      return count;\n    };\n\n    _this.autoplay = function () {\n      var stop = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n      if (stop) {\n        clearTimeout(_this.autoplayTimer);\n        return;\n      }\n\n      var _this$props = _this.props,\n          children = _this$props.children,\n          autoplay = _this$props.autoplay,\n          infinite = _this$props.infinite,\n          autoplayInterval = _this$props.autoplayInterval;\n      var _this$state = _this.state,\n          isScrolling = _this$state.isScrolling,\n          selectedIndex = _this$state.selectedIndex;\n\n      var count = _this.getChildrenCount(children);\n\n      if (!Array.isArray(children) || !autoplay || isScrolling) {\n        return;\n      }\n\n      clearTimeout(_this.autoplayTimer);\n      _this.autoplayTimer = setTimeout(function () {\n        var newIndex = selectedIndex < count ? selectedIndex + 1 : 0;\n\n        if (selectedIndex === count - 1) {\n          newIndex = 0;\n\n          if (!infinite) {\n            clearTimeout(_this.autoplayTimer);\n            return;\n          }\n        }\n\n        _this.goTo(newIndex);\n      }, autoplayInterval);\n    };\n\n    _this.renderDots = function (index) {\n      var _this$props2 = _this.props,\n          children = _this$props2.children,\n          vertical = _this$props2.vertical,\n          pagination = _this$props2.pagination,\n          dotStyle = _this$props2.dotStyle,\n          dotActiveStyle = _this$props2.dotActiveStyle;\n\n      if (!pagination) {\n        return null;\n      }\n\n      var count = _this.getChildrenCount(children);\n\n      return React.createElement(WithTheme, {\n        themeStyles: CarouselStyles,\n        styles: _this.props.styles\n      }, function (styles) {\n        return pagination({\n          styles: styles,\n          vertical: vertical,\n          current: index,\n          count: count,\n          dotStyle: dotStyle,\n          dotActiveStyle: dotActiveStyle\n        });\n      });\n    };\n\n    var _this$props3 = _this.props,\n        children = _this$props3.children,\n        selectedIndex = _this$props3.selectedIndex;\n\n    var count = _this.getChildrenCount(children);\n\n    var index = count > 1 ? Math.min(selectedIndex, count - 1) : 0;\n    _this.state = {\n      isScrolling: false,\n      selectedIndex: index\n    };\n    return _this;\n  }\n\n  _createClass(Carousel, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this.autoplay();\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      clearTimeout(this.autoplayTimer);\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(prevProps) {\n      if (prevProps.autoplay !== undefined && prevProps.autoplay !== this.props.autoplay) {\n        this.autoplay(!this.props.autoplay);\n      }\n    }\n    /**\n     * go to index\n     * @param index\n     */\n\n  }, {\n    key: 'goTo',\n    value: function goTo(index) {\n      this.setState({\n        selectedIndex: index\n      }); // @ts-ignore\n\n      this.viewPager.current.setPage(index);\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      var selectedIndex = this.state.selectedIndex;\n      var _props = this.props,\n          dots = _props.dots,\n          children = _props.children,\n          vertical = _props.vertical;\n\n      if (!children) {\n        return React.createElement(Text, {\n          style: {\n            backgroundColor: 'white'\n          }\n        }, 'You are supposed to add children inside Carousel');\n      }\n\n      var count = this.getChildrenCount(children);\n      var pages = void 0;\n\n      if (count > 1) {\n        var childrenArray = React.Children.toArray(children);\n        pages = childrenArray.map(function (page, i) {\n          return (// when vertical, use the height of the first child as the height of the Carousel\n            React.createElement(View, {\n              key: i\n            }, page)\n          );\n        });\n      } else {\n        pages = React.createElement(View, null, children);\n      }\n\n      var vpProps = {\n        initialPage: selectedIndex,\n        showPageIndicator: false,\n        onPageSelected: function onPageSelected(e) {\n          _this2.setState({\n            selectedIndex: e.nativeEvent.position\n          });\n\n          _this2.autoplay();\n\n          if (_this2.props.afterChange) {\n            _this2.props.afterChange(e.nativeEvent.position);\n          }\n        },\n        onPageScrollStateChanged: function onPageScrollStateChanged(e) {\n          switch (e.nativeEvent.pageScrollState) {\n            case 'dragging':\n              _this2.autoplay(true);\n\n              _this2.setState({\n                isScrolling: true\n              });\n\n              break;\n\n            case 'idle':\n            case 'settling':\n              _this2.autoplay();\n\n              _this2.setState({\n                isScrolling: false\n              });\n\n            default:\n              break;\n          }\n        }\n      };\n      return React.createElement(View, {\n        style: {\n          overflow: 'hidden'\n        }\n      }, React.createElement(ViewPager, _extends({}, vpProps, {\n        style: this.props.style // Lib does not support dynamically orientation change\n        ,\n        orientation: vertical ? 'vertical' : 'horizontal' // Lib does not support dynamically transitionStyle change\n        ,\n        transitionStyle: 'scroll',\n        ref: this.viewPager\n      }), pages), dots && this.renderDots(selectedIndex));\n    }\n  }]);\n\n  return Carousel;\n}(React.Component);\n\nCarousel.defaultProps = {\n  infinite: false,\n  dots: true,\n  autoplay: false,\n  autoplayInterval: 3000,\n  selectedIndex: 0,\n  vertical: false,\n  pagination: defaultPagination,\n  dotStyle: {},\n  dotActiveStyle: {}\n};\nexport default Carousel;","map":{"version":3,"sources":["/Users/wanglijie/wanglijie/clover-defi-wallet/node_modules/@ant-design/react-native/es/carousel/index.js"],"names":["_extends","_classCallCheck","_createClass","_possibleConstructorReturn","_inherits","ViewPager","React","Text","View","WithTheme","CarouselStyles","defaultPagination","props","styles","current","vertical","count","dotStyle","dotActiveStyle","positionStyle","flexDirection","arr","i","push","createElement","key","style","pointStyle","spaceStyle","pointActiveStyle","pagination","Carousel","_React$Component","_this","__proto__","Object","getPrototypeOf","call","viewPager","createRef","getChildrenCount","children","Children","autoplay","stop","arguments","length","undefined","clearTimeout","autoplayTimer","_this$props","infinite","autoplayInterval","_this$state","state","isScrolling","selectedIndex","Array","isArray","setTimeout","newIndex","goTo","renderDots","index","_this$props2","themeStyles","_this$props3","Math","min","value","componentDidMount","componentWillUnmount","componentDidUpdate","prevProps","setState","setPage","render","_this2","_props","dots","backgroundColor","pages","childrenArray","toArray","map","page","vpProps","initialPage","showPageIndicator","onPageSelected","e","nativeEvent","position","afterChange","onPageScrollStateChanged","pageScrollState","overflow","orientation","transitionStyle","ref","Component","defaultProps"],"mappings":"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","sourcesContent":["import _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport ViewPager from '@react-native-community/viewpager';\nimport React from 'react';\nimport { Text, View } from 'react-native';\nimport { WithTheme } from '../style';\nimport CarouselStyles from './style/index';\nvar defaultPagination = function defaultPagination(props) {\n    var styles = props.styles,\n        current = props.current,\n        vertical = props.vertical,\n        count = props.count,\n        dotStyle = props.dotStyle,\n        dotActiveStyle = props.dotActiveStyle;\n\n    var positionStyle = vertical ? 'paginationY' : 'paginationX';\n    var flexDirection = vertical ? 'column' : 'row';\n    var arr = [];\n    for (var i = 0; i < count; i++) {\n        arr.push(React.createElement(View, { key: 'dot-' + i, style: [styles.pointStyle, styles.spaceStyle, dotStyle, i === current && styles.pointActiveStyle, i === current && dotActiveStyle] }));\n    }\n    return React.createElement(\n        View,\n        { style: [styles.pagination, styles[positionStyle]] },\n        React.createElement(\n            View,\n            { style: { flexDirection: flexDirection } },\n            arr\n        )\n    );\n};\n\nvar Carousel = function (_React$Component) {\n    _inherits(Carousel, _React$Component);\n\n    function Carousel(props) {\n        _classCallCheck(this, Carousel);\n\n        var _this = _possibleConstructorReturn(this, (Carousel.__proto__ || Object.getPrototypeOf(Carousel)).call(this, props));\n\n        _this.viewPager = React.createRef();\n        _this.getChildrenCount = function (children) {\n            var count = children ? React.Children.count(children) || 1 : 0;\n            return count;\n        };\n        _this.autoplay = function () {\n            var stop = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n            if (stop) {\n                clearTimeout(_this.autoplayTimer);\n                return;\n            }\n            var _this$props = _this.props,\n                children = _this$props.children,\n                autoplay = _this$props.autoplay,\n                infinite = _this$props.infinite,\n                autoplayInterval = _this$props.autoplayInterval;\n            var _this$state = _this.state,\n                isScrolling = _this$state.isScrolling,\n                selectedIndex = _this$state.selectedIndex;\n\n            var count = _this.getChildrenCount(children);\n            if (!Array.isArray(children) || !autoplay || isScrolling) {\n                return;\n            }\n            clearTimeout(_this.autoplayTimer);\n            _this.autoplayTimer = setTimeout(function () {\n                var newIndex = selectedIndex < count ? selectedIndex + 1 : 0;\n                if (selectedIndex === count - 1) {\n                    newIndex = 0;\n                    if (!infinite) {\n                        clearTimeout(_this.autoplayTimer);\n                        return;\n                    }\n                }\n                _this.goTo(newIndex);\n            }, autoplayInterval);\n        };\n        _this.renderDots = function (index) {\n            var _this$props2 = _this.props,\n                children = _this$props2.children,\n                vertical = _this$props2.vertical,\n                pagination = _this$props2.pagination,\n                dotStyle = _this$props2.dotStyle,\n                dotActiveStyle = _this$props2.dotActiveStyle;\n\n            if (!pagination) {\n                return null;\n            }\n            var count = _this.getChildrenCount(children);\n            return React.createElement(\n                WithTheme,\n                { themeStyles: CarouselStyles, styles: _this.props.styles },\n                function (styles) {\n                    return pagination({\n                        styles: styles,\n                        vertical: vertical,\n                        current: index,\n                        count: count,\n                        dotStyle: dotStyle,\n                        dotActiveStyle: dotActiveStyle\n                    });\n                }\n            );\n        };\n        var _this$props3 = _this.props,\n            children = _this$props3.children,\n            selectedIndex = _this$props3.selectedIndex;\n\n        var count = _this.getChildrenCount(children);\n        var index = count > 1 ? Math.min(selectedIndex, count - 1) : 0;\n        _this.state = {\n            isScrolling: false,\n            selectedIndex: index\n        };\n        return _this;\n    }\n\n    _createClass(Carousel, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            this.autoplay();\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            clearTimeout(this.autoplayTimer);\n        }\n    }, {\n        key: 'componentDidUpdate',\n        value: function componentDidUpdate(prevProps) {\n            if (prevProps.autoplay !== undefined && prevProps.autoplay !== this.props.autoplay) {\n                this.autoplay(!this.props.autoplay);\n            }\n        }\n        /**\n         * go to index\n         * @param index\n         */\n\n    }, {\n        key: 'goTo',\n        value: function goTo(index) {\n            this.setState({ selectedIndex: index });\n            // @ts-ignore\n            this.viewPager.current.setPage(index);\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _this2 = this;\n\n            var selectedIndex = this.state.selectedIndex;\n            var _props = this.props,\n                dots = _props.dots,\n                children = _props.children,\n                vertical = _props.vertical;\n\n            if (!children) {\n                return React.createElement(\n                    Text,\n                    { style: { backgroundColor: 'white' } },\n                    'You are supposed to add children inside Carousel'\n                );\n            }\n            var count = this.getChildrenCount(children);\n            var pages = void 0;\n            if (count > 1) {\n                var childrenArray = React.Children.toArray(children);\n                pages = childrenArray.map(function (page, i) {\n                    return (\n                        // when vertical, use the height of the first child as the height of the Carousel\n                        React.createElement(\n                            View,\n                            { key: i },\n                            page\n                        )\n                    );\n                });\n            } else {\n                pages = React.createElement(\n                    View,\n                    null,\n                    children\n                );\n            }\n            var vpProps = {\n                initialPage: selectedIndex,\n                showPageIndicator: false,\n                onPageSelected: function onPageSelected(e) {\n                    _this2.setState({ selectedIndex: e.nativeEvent.position });\n                    _this2.autoplay();\n                    if (_this2.props.afterChange) {\n                        _this2.props.afterChange(e.nativeEvent.position);\n                    }\n                },\n                onPageScrollStateChanged: function onPageScrollStateChanged(e) {\n                    switch (e.nativeEvent.pageScrollState) {\n                        case 'dragging':\n                            _this2.autoplay(true);\n                            _this2.setState({ isScrolling: true });\n                            break;\n                        case 'idle':\n                        case 'settling':\n                            _this2.autoplay();\n                            _this2.setState({ isScrolling: false });\n                        default:\n                            break;\n                    }\n                }\n            };\n            return React.createElement(\n                View,\n                { style: {\n                        overflow: 'hidden'\n                    } },\n                React.createElement(\n                    ViewPager,\n                    _extends({}, vpProps, { style: this.props.style\n                        // Lib does not support dynamically orientation change\n                        , orientation: vertical ? 'vertical' : 'horizontal'\n                        // Lib does not support dynamically transitionStyle change\n                        , transitionStyle: 'scroll', ref: this.viewPager }),\n                    pages\n                ),\n                dots && this.renderDots(selectedIndex)\n            );\n        }\n    }]);\n\n    return Carousel;\n}(React.Component);\n\nCarousel.defaultProps = {\n    infinite: false,\n    dots: true,\n    autoplay: false,\n    autoplayInterval: 3000,\n    selectedIndex: 0,\n    vertical: false,\n    pagination: defaultPagination,\n    dotStyle: {},\n    dotActiveStyle: {}\n};\nexport default Carousel;"]},"metadata":{},"sourceType":"module"}