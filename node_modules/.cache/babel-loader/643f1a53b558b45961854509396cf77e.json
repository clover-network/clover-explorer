{"ast":null,"code":"import { theme, scale, animation, annotation, tooltip } from '../../adaptor/common';\nimport { flow, deepAssign } from '../../utils';\nimport { interval } from '../../adaptor/geometries';\nimport { X_FIELD, Y_FIELD } from '../tiny-line/constants';\nimport { adjustYMetaByZero } from '../../utils/data';\n/**\n * 字段\n * @param params\n */\n\nfunction geometry(params) {\n  var _a, _b;\n\n  var chart = params.chart,\n      options = params.options;\n  var data = options.data,\n      xAxis = options.xAxis,\n      yAxis = options.yAxis,\n      color = options.color,\n      columnStyle = options.columnStyle,\n      columnWidthRatio = options.columnWidthRatio;\n  var seriesData = data.map(function (y, x) {\n    return {\n      x: \"\" + x,\n      y: y\n    };\n  });\n  chart.data(seriesData);\n  var p = deepAssign({}, params, {\n    options: {\n      xField: X_FIELD,\n      yField: Y_FIELD,\n      widthRatio: columnWidthRatio,\n      interval: {\n        style: columnStyle,\n        color: color\n      }\n    }\n  });\n  interval(p);\n  chart.axis(false);\n  chart.legend(false);\n  chart.interaction('element-active'); // scale\n\n  scale((_a = {}, _a[X_FIELD] = xAxis, _a[Y_FIELD] = yAxis, _a), (_b = {}, _b[X_FIELD] = {\n    type: 'cat'\n  }, _b[Y_FIELD] = adjustYMetaByZero(seriesData, Y_FIELD), _b))(params);\n  return params;\n}\n/**\n * 迷你柱形图适配器\n * @param chart\n * @param options\n */\n\n\nexport function adaptor(params) {\n  return flow(geometry, tooltip, theme, animation, annotation())(params);\n}","map":{"version":3,"sources":["../../../src/plots/tiny-column/adaptor.ts"],"names":[],"mappings":"AAAA,SAAS,KAAT,EAAgB,KAAhB,EAAuB,SAAvB,EAAkC,UAAlC,EAA8C,OAA9C,QAA6D,sBAA7D;AAEA,SAAS,IAAT,EAAe,UAAf,QAAiC,aAAjC;AACA,SAAS,QAAT,QAAyB,0BAAzB;AACA,SAAS,OAAT,EAAkB,OAAlB,QAAiC,wBAAjC;AACA,SAAS,iBAAT,QAAkC,kBAAlC;AAEA;;;AAGG;;AACH,SAAS,QAAT,CAAkB,MAAlB,EAAmD;;;AACzC,MAAA,KAAK,GAAc,MAAM,CAApB,KAAL;AAAA,MAAO,OAAO,GAAK,MAAM,CAAX,OAAd;AACA,MAAA,IAAI,GAAyD,OAAO,CAAhE,IAAJ;AAAA,MAAM,KAAK,GAAkD,OAAO,CAAzD,KAAX;AAAA,MAAa,KAAK,GAA2C,OAAO,CAAlD,KAAlB;AAAA,MAAoB,KAAK,GAAoC,OAAO,CAA3C,KAAzB;AAAA,MAA2B,WAAW,GAAuB,OAAO,CAA9B,WAAtC;AAAA,MAAwC,gBAAgB,GAAK,OAAO,CAAZ,gBAAxD;AAER,MAAM,UAAU,GAAG,IAAI,CAAC,GAAL,CAAS,UAAC,CAAD,EAAY,CAAZ,EAAqB;AAC/C,WAAO;AAAE,MAAA,CAAC,EAAE,KAAG,CAAR;AAAa,MAAA,CAAC,EAAA;AAAd,KAAP;AACD,GAFkB,CAAnB;AAIA,EAAA,KAAK,CAAC,IAAN,CAAW,UAAX;AAEA,MAAM,CAAC,GAAG,UAAU,CAAC,EAAD,EAAK,MAAL,EAAa;AAC/B,IAAA,OAAO,EAAE;AACP,MAAA,MAAM,EAAE,OADD;AAEP,MAAA,MAAM,EAAE,OAFD;AAGP,MAAA,UAAU,EAAE,gBAHL;AAIP,MAAA,QAAQ,EAAE;AACR,QAAA,KAAK,EAAE,WADC;AAER,QAAA,KAAK,EAAA;AAFG;AAJH;AADsB,GAAb,CAApB;AAWA,EAAA,QAAQ,CAAC,CAAD,CAAR;AAEA,EAAA,KAAK,CAAC,IAAN,CAAW,KAAX;AACA,EAAA,KAAK,CAAC,MAAN,CAAa,KAAb;AACA,EAAA,KAAK,CAAC,WAAN,CAAkB,gBAAlB,EAzBiD,CA2BjD;;AACA,EAAA,KAAK,EAAA,EAAA,GAAA,EAAA,EAED,EAAA,CAAC,OAAD,CAAA,GAAW,KAFV,EAGD,EAAA,CAAC,OAAD,CAAA,GAAW,KAHV,E,EAAA,I,SAMD,EAAA,CAAC,OAAD,CAAA,GAAW;AACT,IAAA,IAAI,EAAE;AADG,G,EAGX,EAAA,CAAC,OAAD,CAAA,GAAW,iBAAiB,CAAC,UAAD,EAAa,OAAb,C,EAE/B,EAXI,EAAL,CAWE,MAXF;AAaA,SAAO,MAAP;AACD;AAED;;;;AAIG;;;AACH,OAAM,SAAU,OAAV,CAAkB,MAAlB,EAAmD;AACvD,SAAO,IAAI,CAAC,QAAD,EAAW,OAAX,EAAoB,KAApB,EAA2B,SAA3B,EAAsC,UAAU,EAAhD,CAAJ,CAAwD,MAAxD,CAAP;AACD","sourcesContent":["import { theme, scale, animation, annotation, tooltip } from '../../adaptor/common';\nimport { Params } from '../../core/adaptor';\nimport { flow, deepAssign } from '../../utils';\nimport { interval } from '../../adaptor/geometries';\nimport { X_FIELD, Y_FIELD } from '../tiny-line/constants';\nimport { adjustYMetaByZero } from '../../utils/data';\nimport { TinyColumnOptions } from './types';\n/**\n * 字段\n * @param params\n */\nfunction geometry(params: Params<TinyColumnOptions>): Params<TinyColumnOptions> {\n  const { chart, options } = params;\n  const { data, xAxis, yAxis, color, columnStyle, columnWidthRatio } = options;\n\n  const seriesData = data.map((y: number, x: number) => {\n    return { x: `${x}`, y };\n  });\n\n  chart.data(seriesData);\n\n  const p = deepAssign({}, params, {\n    options: {\n      xField: X_FIELD,\n      yField: Y_FIELD,\n      widthRatio: columnWidthRatio,\n      interval: {\n        style: columnStyle,\n        color,\n      },\n    },\n  });\n  interval(p);\n\n  chart.axis(false);\n  chart.legend(false);\n  chart.interaction('element-active');\n\n  // scale\n  scale(\n    {\n      [X_FIELD]: xAxis,\n      [Y_FIELD]: yAxis,\n    },\n    {\n      [X_FIELD]: {\n        type: 'cat',\n      },\n      [Y_FIELD]: adjustYMetaByZero(seriesData, Y_FIELD),\n    }\n  )(params);\n\n  return params;\n}\n\n/**\n * 迷你柱形图适配器\n * @param chart\n * @param options\n */\nexport function adaptor(params: Params<TinyColumnOptions>) {\n  return flow(geometry, tooltip, theme, animation, annotation())(params);\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}