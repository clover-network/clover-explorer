{"ast":null,"code":"/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\nimport { __extends } from \"tslib\";\nimport * as zrender from 'zrender/esm/zrender';\nimport * as zrUtil from 'zrender/esm/core/util';\nimport * as colorTool from 'zrender/esm/tool/color';\nimport env from 'zrender/esm/core/env';\nimport timsort from 'zrender/esm/core/timsort';\nimport Eventful from 'zrender/esm/core/Eventful';\nimport GlobalModel from './model/Global';\nimport ExtensionAPI from './ExtensionAPI';\nimport CoordinateSystemManager from './CoordinateSystem';\nimport OptionManager from './model/OptionManager';\nimport backwardCompat from './preprocessor/backwardCompat';\nimport dataStack from './processor/dataStack';\nimport ComponentModel from './model/Component';\nimport SeriesModel from './model/Series';\nimport ComponentView from './view/Component';\nimport ChartView from './view/Chart';\nimport * as graphic from './util/graphic';\nimport { getECData } from './util/innerStore';\nimport { enterEmphasisWhenMouseOver, leaveEmphasisWhenMouseOut, isHighDownDispatcher, HOVER_STATE_EMPHASIS, HOVER_STATE_BLUR, toggleSeriesBlurState, toggleSeriesBlurStateFromPayload, toggleSelectionFromPayload, updateSeriesElementSelection, getAllSelectedIndices, isSelectChangePayload, isHighDownPayload, HIGHLIGHT_ACTION_TYPE, DOWNPLAY_ACTION_TYPE, SELECT_ACTION_TYPE, UNSELECT_ACTION_TYPE, TOGGLE_SELECT_ACTION_TYPE, savePathStates, enterEmphasis, leaveEmphasis, leaveBlur, enterSelect, leaveSelect, enterBlur } from './util/states';\nimport * as modelUtil from './util/model';\nimport { throttle } from './util/throttle';\nimport { seriesStyleTask, dataStyleTask, dataColorPaletteTask } from './visual/style';\nimport loadingDefault from './loading/default';\nimport Scheduler from './stream/Scheduler';\nimport lightTheme from './theme/light';\nimport darkTheme from './theme/dark';\nimport './component/dataset';\nimport mapDataStorage from './coord/geo/mapDataStorage';\nimport { parseClassType } from './util/clazz';\nimport { ECEventProcessor } from './util/ECEventProcessor';\nimport { seriesSymbolTask, dataSymbolTask } from './visual/symbol';\nimport { getVisualFromData, getItemVisualFromData } from './visual/helper';\nimport LabelManager from './label/LabelManager';\nimport { deprecateLog, throwError } from './util/log';\nimport { handleLegacySelectEvents } from './legacy/dataSelectAction';\nimport 'zrender/esm/canvas/canvas';\nimport { registerExternalTransform } from './data/helper/transform';\nimport { createLocaleObject, SYSTEM_LANG } from './locale';\nimport { findEventDispatcher } from './util/event';\nimport decal from './visual/decal';\nvar assert = zrUtil.assert;\nvar each = zrUtil.each;\nvar isFunction = zrUtil.isFunction;\nvar isObject = zrUtil.isObject;\nexport var version = '5.0.0';\nexport var dependencies = {\n  zrender: '5.0.1'\n};\nvar TEST_FRAME_REMAIN_TIME = 1;\nvar PRIORITY_PROCESSOR_SERIES_FILTER = 800;\nvar PRIORITY_PROCESSOR_DATASTACK = 900;\nvar PRIORITY_PROCESSOR_FILTER = 1000;\nvar PRIORITY_PROCESSOR_DEFAULT = 2000;\nvar PRIORITY_PROCESSOR_STATISTIC = 5000;\nvar PRIORITY_VISUAL_LAYOUT = 1000;\nvar PRIORITY_VISUAL_PROGRESSIVE_LAYOUT = 1100;\nvar PRIORITY_VISUAL_GLOBAL = 2000;\nvar PRIORITY_VISUAL_CHART = 3000;\nvar PRIORITY_VISUAL_COMPONENT = 4000;\nvar PRIORITY_VISUAL_CHART_DATA_CUSTOM = 4500;\nvar PRIORITY_VISUAL_POST_CHART_LAYOUT = 4600;\nvar PRIORITY_VISUAL_BRUSH = 5000;\nvar PRIORITY_VISUAL_ARIA = 6000;\nvar PRIORITY_VISUAL_DECAL = 7000;\nexport var PRIORITY = {\n  PROCESSOR: {\n    FILTER: PRIORITY_PROCESSOR_FILTER,\n    SERIES_FILTER: PRIORITY_PROCESSOR_SERIES_FILTER,\n    STATISTIC: PRIORITY_PROCESSOR_STATISTIC\n  },\n  VISUAL: {\n    LAYOUT: PRIORITY_VISUAL_LAYOUT,\n    PROGRESSIVE_LAYOUT: PRIORITY_VISUAL_PROGRESSIVE_LAYOUT,\n    GLOBAL: PRIORITY_VISUAL_GLOBAL,\n    CHART: PRIORITY_VISUAL_CHART,\n    POST_CHART_LAYOUT: PRIORITY_VISUAL_POST_CHART_LAYOUT,\n    COMPONENT: PRIORITY_VISUAL_COMPONENT,\n    BRUSH: PRIORITY_VISUAL_BRUSH,\n    CHART_ITEM: PRIORITY_VISUAL_CHART_DATA_CUSTOM,\n    ARIA: PRIORITY_VISUAL_ARIA,\n    DECAL: PRIORITY_VISUAL_DECAL\n  }\n};\nvar IN_MAIN_PROCESS_KEY = '__flagInMainProcess';\nvar OPTION_UPDATED_KEY = '__optionUpdated';\nvar STATUS_NEEDS_UPDATE_KEY = '__needsUpdateStatus';\nvar ACTION_REG = /^[a-zA-Z0-9_]+$/;\nvar CONNECT_STATUS_KEY = '__connectUpdateStatus';\nvar CONNECT_STATUS_PENDING = 0;\nvar CONNECT_STATUS_UPDATING = 1;\nvar CONNECT_STATUS_UPDATED = 2;\n;\n\nfunction createRegisterEventWithLowercaseECharts(method) {\n  return function () {\n    var args = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n\n    if (this.isDisposed()) {\n      disposedWarning(this.id);\n      return;\n    }\n\n    return toLowercaseNameAndCallEventful(this, method, args);\n  };\n}\n\nfunction createRegisterEventWithLowercaseMessageCenter(method) {\n  return function () {\n    var args = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n\n    return toLowercaseNameAndCallEventful(this, method, args);\n  };\n}\n\nfunction toLowercaseNameAndCallEventful(host, method, args) {\n  args[0] = args[0] && args[0].toLowerCase();\n  return Eventful.prototype[method].apply(host, args);\n}\n\nvar MessageCenter = function (_super) {\n  __extends(MessageCenter, _super);\n\n  function MessageCenter() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  return MessageCenter;\n}(Eventful);\n\nvar messageCenterProto = MessageCenter.prototype;\nmessageCenterProto.on = createRegisterEventWithLowercaseMessageCenter('on');\nmessageCenterProto.off = createRegisterEventWithLowercaseMessageCenter('off');\nvar prepare;\nvar prepareView;\nvar updateDirectly;\nvar updateMethods;\nvar doConvertPixel;\nvar updateStreamModes;\nvar doDispatchAction;\nvar flushPendingActions;\nvar triggerUpdatedEvent;\nvar bindRenderedEvent;\nvar bindMouseEvent;\nvar clearColorPalette;\nvar render;\nvar renderComponents;\nvar renderSeries;\nvar performPostUpdateFuncs;\nvar createExtensionAPI;\nvar enableConnect;\nvar setTransitionOpt;\nvar markStatusToUpdate;\nvar applyChangedStates;\n\nvar ECharts = function (_super) {\n  __extends(ECharts, _super);\n\n  function ECharts(dom, theme, opts) {\n    var _this = _super.call(this, new ECEventProcessor()) || this;\n\n    _this._chartsViews = [];\n    _this._chartsMap = {};\n    _this._componentsViews = [];\n    _this._componentsMap = {};\n    _this._pendingActions = [];\n    opts = opts || {};\n\n    if (typeof theme === 'string') {\n      theme = themeStorage[theme];\n    }\n\n    _this._dom = dom;\n    var root = typeof window === 'undefined' ? global : window;\n    var defaultRenderer = 'canvas';\n    var defaultUseDirtyRect = false;\n\n    if (process.env.NODE_ENV !== 'production') {\n      defaultRenderer = root.__ECHARTS__DEFAULT__RENDERER__ || defaultRenderer;\n      var devUseDirtyRect = root.__ECHARTS__DEFAULT__USE_DIRTY_RECT__;\n      defaultUseDirtyRect = devUseDirtyRect == null ? defaultUseDirtyRect : devUseDirtyRect;\n    }\n\n    var zr = _this._zr = zrender.init(dom, {\n      renderer: opts.renderer || defaultRenderer,\n      devicePixelRatio: opts.devicePixelRatio,\n      width: opts.width,\n      height: opts.height,\n      useDirtyRect: opts.useDirtyRect == null ? defaultUseDirtyRect : opts.useDirtyRect\n    });\n    _this._throttledZrFlush = throttle(zrUtil.bind(zr.flush, zr), 17);\n    theme = zrUtil.clone(theme);\n    theme && backwardCompat(theme, true);\n    _this._theme = theme;\n    _this._locale = createLocaleObject(opts.locale || SYSTEM_LANG);\n    _this._coordSysMgr = new CoordinateSystemManager();\n    var api = _this._api = createExtensionAPI(_this);\n\n    function prioritySortFunc(a, b) {\n      return a.__prio - b.__prio;\n    }\n\n    timsort(visualFuncs, prioritySortFunc);\n    timsort(dataProcessorFuncs, prioritySortFunc);\n    _this._scheduler = new Scheduler(_this, api, dataProcessorFuncs, visualFuncs);\n    _this._messageCenter = new MessageCenter();\n    _this._labelManager = new LabelManager();\n\n    _this._initEvents();\n\n    _this.resize = zrUtil.bind(_this.resize, _this);\n    zr.animation.on('frame', _this._onframe, _this);\n    bindRenderedEvent(zr, _this);\n    bindMouseEvent(zr, _this);\n    zrUtil.setAsPrimitive(_this);\n    return _this;\n  }\n\n  ECharts.prototype._onframe = function () {\n    if (this._disposed) {\n      return;\n    }\n\n    applyChangedStates(this);\n    var scheduler = this._scheduler;\n\n    if (this[OPTION_UPDATED_KEY]) {\n      var silent = this[OPTION_UPDATED_KEY].silent;\n      this[IN_MAIN_PROCESS_KEY] = true;\n      prepare(this);\n      updateMethods.update.call(this);\n\n      this._zr.flush();\n\n      this[IN_MAIN_PROCESS_KEY] = false;\n      this[OPTION_UPDATED_KEY] = false;\n      flushPendingActions.call(this, silent);\n      triggerUpdatedEvent.call(this, silent);\n    } else if (scheduler.unfinished) {\n      var remainTime = TEST_FRAME_REMAIN_TIME;\n      var ecModel = this._model;\n      var api = this._api;\n      scheduler.unfinished = false;\n\n      do {\n        var startTime = +new Date();\n        scheduler.performSeriesTasks(ecModel);\n        scheduler.performDataProcessorTasks(ecModel);\n        updateStreamModes(this, ecModel);\n        scheduler.performVisualTasks(ecModel);\n        renderSeries(this, this._model, api, 'remain');\n        remainTime -= +new Date() - startTime;\n      } while (remainTime > 0 && scheduler.unfinished);\n\n      if (!scheduler.unfinished) {\n        this._zr.flush();\n      }\n    }\n  };\n\n  ECharts.prototype.getDom = function () {\n    return this._dom;\n  };\n\n  ECharts.prototype.getId = function () {\n    return this.id;\n  };\n\n  ECharts.prototype.getZr = function () {\n    return this._zr;\n  };\n\n  ECharts.prototype.setOption = function (option, notMerge, lazyUpdate) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(!this[IN_MAIN_PROCESS_KEY], '`setOption` should not be called during main process.');\n    }\n\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n\n    var silent;\n    var replaceMerge;\n    var transitionOpt;\n\n    if (isObject(notMerge)) {\n      lazyUpdate = notMerge.lazyUpdate;\n      silent = notMerge.silent;\n      replaceMerge = notMerge.replaceMerge;\n      transitionOpt = notMerge.transition;\n      notMerge = notMerge.notMerge;\n    }\n\n    this[IN_MAIN_PROCESS_KEY] = true;\n\n    if (!this._model || notMerge) {\n      var optionManager = new OptionManager(this._api);\n      var theme = this._theme;\n      var ecModel = this._model = new GlobalModel();\n      ecModel.scheduler = this._scheduler;\n      ecModel.init(null, null, null, theme, this._locale, optionManager);\n    }\n\n    this._model.setOption(option, {\n      replaceMerge: replaceMerge\n    }, optionPreprocessorFuncs);\n\n    setTransitionOpt(this, transitionOpt);\n\n    if (lazyUpdate) {\n      this[OPTION_UPDATED_KEY] = {\n        silent: silent\n      };\n      this[IN_MAIN_PROCESS_KEY] = false;\n      this.getZr().wakeUp();\n    } else {\n      prepare(this);\n      updateMethods.update.call(this);\n\n      this._zr.flush();\n\n      this[OPTION_UPDATED_KEY] = false;\n      this[IN_MAIN_PROCESS_KEY] = false;\n      flushPendingActions.call(this, silent);\n      triggerUpdatedEvent.call(this, silent);\n    }\n  };\n\n  ECharts.prototype.setTheme = function () {\n    console.error('ECharts#setTheme() is DEPRECATED in ECharts 3.0');\n  };\n\n  ECharts.prototype.getModel = function () {\n    return this._model;\n  };\n\n  ECharts.prototype.getOption = function () {\n    return this._model && this._model.getOption();\n  };\n\n  ECharts.prototype.getWidth = function () {\n    return this._zr.getWidth();\n  };\n\n  ECharts.prototype.getHeight = function () {\n    return this._zr.getHeight();\n  };\n\n  ECharts.prototype.getDevicePixelRatio = function () {\n    return this._zr.painter.dpr || window.devicePixelRatio || 1;\n  };\n\n  ECharts.prototype.getRenderedCanvas = function (opts) {\n    if (!env.canvasSupported) {\n      return;\n    }\n\n    opts = zrUtil.extend({}, opts || {});\n    opts.pixelRatio = opts.pixelRatio || 1;\n    opts.backgroundColor = opts.backgroundColor || this._model.get('backgroundColor');\n    var zr = this._zr;\n    return zr.painter.getRenderedCanvas(opts);\n  };\n\n  ECharts.prototype.getSvgDataURL = function () {\n    if (!env.svgSupported) {\n      return;\n    }\n\n    var zr = this._zr;\n    var list = zr.storage.getDisplayList();\n    zrUtil.each(list, function (el) {\n      el.stopAnimation(null, true);\n    });\n    return zr.painter.toDataURL();\n  };\n\n  ECharts.prototype.getDataURL = function (opts) {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n\n    opts = opts || {};\n    var excludeComponents = opts.excludeComponents;\n    var ecModel = this._model;\n    var excludesComponentViews = [];\n    var self = this;\n    each(excludeComponents, function (componentType) {\n      ecModel.eachComponent({\n        mainType: componentType\n      }, function (component) {\n        var view = self._componentsMap[component.__viewId];\n\n        if (!view.group.ignore) {\n          excludesComponentViews.push(view);\n          view.group.ignore = true;\n        }\n      });\n    });\n    var url = this._zr.painter.getType() === 'svg' ? this.getSvgDataURL() : this.getRenderedCanvas(opts).toDataURL('image/' + (opts && opts.type || 'png'));\n    each(excludesComponentViews, function (view) {\n      view.group.ignore = false;\n    });\n    return url;\n  };\n\n  ECharts.prototype.getConnectedDataURL = function (opts) {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n\n    if (!env.canvasSupported) {\n      return;\n    }\n\n    var isSvg = opts.type === 'svg';\n    var groupId = this.group;\n    var mathMin = Math.min;\n    var mathMax = Math.max;\n    var MAX_NUMBER = Infinity;\n\n    if (connectedGroups[groupId]) {\n      var left_1 = MAX_NUMBER;\n      var top_1 = MAX_NUMBER;\n      var right_1 = -MAX_NUMBER;\n      var bottom_1 = -MAX_NUMBER;\n      var canvasList_1 = [];\n      var dpr_1 = opts && opts.pixelRatio || 1;\n      zrUtil.each(instances, function (chart, id) {\n        if (chart.group === groupId) {\n          var canvas = isSvg ? chart.getZr().painter.getSvgDom().innerHTML : chart.getRenderedCanvas(zrUtil.clone(opts));\n          var boundingRect = chart.getDom().getBoundingClientRect();\n          left_1 = mathMin(boundingRect.left, left_1);\n          top_1 = mathMin(boundingRect.top, top_1);\n          right_1 = mathMax(boundingRect.right, right_1);\n          bottom_1 = mathMax(boundingRect.bottom, bottom_1);\n          canvasList_1.push({\n            dom: canvas,\n            left: boundingRect.left,\n            top: boundingRect.top\n          });\n        }\n      });\n      left_1 *= dpr_1;\n      top_1 *= dpr_1;\n      right_1 *= dpr_1;\n      bottom_1 *= dpr_1;\n      var width = right_1 - left_1;\n      var height = bottom_1 - top_1;\n      var targetCanvas = zrUtil.createCanvas();\n      var zr_1 = zrender.init(targetCanvas, {\n        renderer: isSvg ? 'svg' : 'canvas'\n      });\n      zr_1.resize({\n        width: width,\n        height: height\n      });\n\n      if (isSvg) {\n        var content_1 = '';\n        each(canvasList_1, function (item) {\n          var x = item.left - left_1;\n          var y = item.top - top_1;\n          content_1 += '<g transform=\"translate(' + x + ',' + y + ')\">' + item.dom + '</g>';\n        });\n        zr_1.painter.getSvgRoot().innerHTML = content_1;\n\n        if (opts.connectedBackgroundColor) {\n          zr_1.painter.setBackgroundColor(opts.connectedBackgroundColor);\n        }\n\n        zr_1.refreshImmediately();\n        return zr_1.painter.toDataURL();\n      } else {\n        if (opts.connectedBackgroundColor) {\n          zr_1.add(new graphic.Rect({\n            shape: {\n              x: 0,\n              y: 0,\n              width: width,\n              height: height\n            },\n            style: {\n              fill: opts.connectedBackgroundColor\n            }\n          }));\n        }\n\n        each(canvasList_1, function (item) {\n          var img = new graphic.Image({\n            style: {\n              x: item.left * dpr_1 - left_1,\n              y: item.top * dpr_1 - top_1,\n              image: item.dom\n            }\n          });\n          zr_1.add(img);\n        });\n        zr_1.refreshImmediately();\n        return targetCanvas.toDataURL('image/' + (opts && opts.type || 'png'));\n      }\n    } else {\n      return this.getDataURL(opts);\n    }\n  };\n\n  ECharts.prototype.convertToPixel = function (finder, value) {\n    return doConvertPixel(this, 'convertToPixel', finder, value);\n  };\n\n  ECharts.prototype.convertFromPixel = function (finder, value) {\n    return doConvertPixel(this, 'convertFromPixel', finder, value);\n  };\n\n  ECharts.prototype.containPixel = function (finder, value) {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n\n    var ecModel = this._model;\n    var result;\n    var findResult = modelUtil.parseFinder(ecModel, finder);\n    zrUtil.each(findResult, function (models, key) {\n      key.indexOf('Models') >= 0 && zrUtil.each(models, function (model) {\n        var coordSys = model.coordinateSystem;\n\n        if (coordSys && coordSys.containPoint) {\n          result = result || !!coordSys.containPoint(value);\n        } else if (key === 'seriesModels') {\n          var view = this._chartsMap[model.__viewId];\n\n          if (view && view.containPoint) {\n            result = result || view.containPoint(value, model);\n          } else {\n            if (process.env.NODE_ENV !== 'production') {\n              console.warn(key + ': ' + (view ? 'The found component do not support containPoint.' : 'No view mapping to the found component.'));\n            }\n          }\n        } else {\n          if (process.env.NODE_ENV !== 'production') {\n            console.warn(key + ': containPoint is not supported');\n          }\n        }\n      }, this);\n    }, this);\n    return !!result;\n  };\n\n  ECharts.prototype.getVisual = function (finder, visualType) {\n    var ecModel = this._model;\n    var parsedFinder = modelUtil.parseFinder(ecModel, finder, {\n      defaultMainType: 'series'\n    });\n    var seriesModel = parsedFinder.seriesModel;\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (!seriesModel) {\n        console.warn('There is no specified seires model');\n      }\n    }\n\n    var data = seriesModel.getData();\n    var dataIndexInside = parsedFinder.hasOwnProperty('dataIndexInside') ? parsedFinder.dataIndexInside : parsedFinder.hasOwnProperty('dataIndex') ? data.indexOfRawIndex(parsedFinder.dataIndex) : null;\n    return dataIndexInside != null ? getItemVisualFromData(data, dataIndexInside, visualType) : getVisualFromData(data, visualType);\n  };\n\n  ECharts.prototype.getViewOfComponentModel = function (componentModel) {\n    return this._componentsMap[componentModel.__viewId];\n  };\n\n  ECharts.prototype.getViewOfSeriesModel = function (seriesModel) {\n    return this._chartsMap[seriesModel.__viewId];\n  };\n\n  ECharts.prototype._initEvents = function () {\n    var _this = this;\n\n    each(MOUSE_EVENT_NAMES, function (eveName) {\n      var handler = function (e) {\n        var ecModel = _this.getModel();\n\n        var el = e.target;\n        var params;\n        var isGlobalOut = eveName === 'globalout';\n\n        if (isGlobalOut) {\n          params = {};\n        } else {\n          el && findEventDispatcher(el, function (parent) {\n            var ecData = getECData(parent);\n\n            if (ecData && ecData.dataIndex != null) {\n              var dataModel = ecData.dataModel || ecModel.getSeriesByIndex(ecData.seriesIndex);\n              params = dataModel && dataModel.getDataParams(ecData.dataIndex, ecData.dataType) || {};\n              return true;\n            } else if (ecData.eventData) {\n              params = zrUtil.extend({}, ecData.eventData);\n              return true;\n            }\n          }, true);\n        }\n\n        if (params) {\n          var componentType = params.componentType;\n          var componentIndex = params.componentIndex;\n\n          if (componentType === 'markLine' || componentType === 'markPoint' || componentType === 'markArea') {\n            componentType = 'series';\n            componentIndex = params.seriesIndex;\n          }\n\n          var model = componentType && componentIndex != null && ecModel.getComponent(componentType, componentIndex);\n          var view = model && _this[model.mainType === 'series' ? '_chartsMap' : '_componentsMap'][model.__viewId];\n\n          if (process.env.NODE_ENV !== 'production') {\n            if (!isGlobalOut && !(model && view)) {\n              console.warn('model or view can not be found by params');\n            }\n          }\n\n          params.event = e;\n          params.type = eveName;\n          _this._$eventProcessor.eventInfo = {\n            targetEl: el,\n            packedEvent: params,\n            model: model,\n            view: view\n          };\n\n          _this.trigger(eveName, params);\n        }\n      };\n\n      handler.zrEventfulCallAtLast = true;\n\n      _this._zr.on(eveName, handler, _this);\n    });\n    each(eventActionMap, function (actionType, eventType) {\n      _this._messageCenter.on(eventType, function (event) {\n        this.trigger(eventType, event);\n      }, _this);\n    });\n    each(['selectchanged'], function (eventType) {\n      _this._messageCenter.on(eventType, function (event) {\n        this.trigger(eventType, event);\n      }, _this);\n    });\n    handleLegacySelectEvents(this._messageCenter, this, this._model);\n  };\n\n  ECharts.prototype.isDisposed = function () {\n    return this._disposed;\n  };\n\n  ECharts.prototype.clear = function () {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n\n    this.setOption({\n      series: []\n    }, true);\n  };\n\n  ECharts.prototype.dispose = function () {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n\n    this._disposed = true;\n    modelUtil.setAttribute(this.getDom(), DOM_ATTRIBUTE_KEY, '');\n    var api = this._api;\n    var ecModel = this._model;\n    each(this._componentsViews, function (component) {\n      component.dispose(ecModel, api);\n    });\n    each(this._chartsViews, function (chart) {\n      chart.dispose(ecModel, api);\n    });\n\n    this._zr.dispose();\n\n    delete instances[this.id];\n  };\n\n  ECharts.prototype.resize = function (opts) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(!this[IN_MAIN_PROCESS_KEY], '`resize` should not be called during main process.');\n    }\n\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n\n    this._zr.resize(opts);\n\n    var ecModel = this._model;\n    this._loadingFX && this._loadingFX.resize();\n\n    if (!ecModel) {\n      return;\n    }\n\n    var optionChanged = ecModel.resetOption('media');\n    var silent = opts && opts.silent;\n    this[IN_MAIN_PROCESS_KEY] = true;\n    optionChanged && prepare(this);\n    updateMethods.update.call(this, {\n      type: 'resize',\n      animation: {\n        duration: 0\n      }\n    });\n    this[IN_MAIN_PROCESS_KEY] = false;\n    flushPendingActions.call(this, silent);\n    triggerUpdatedEvent.call(this, silent);\n  };\n\n  ECharts.prototype.showLoading = function (name, cfg) {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n\n    if (isObject(name)) {\n      cfg = name;\n      name = '';\n    }\n\n    name = name || 'default';\n    this.hideLoading();\n\n    if (!loadingEffects[name]) {\n      if (process.env.NODE_ENV !== 'production') {\n        console.warn('Loading effects ' + name + ' not exists.');\n      }\n\n      return;\n    }\n\n    var el = loadingEffects[name](this._api, cfg);\n    var zr = this._zr;\n    this._loadingFX = el;\n    zr.add(el);\n  };\n\n  ECharts.prototype.hideLoading = function () {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n\n    this._loadingFX && this._zr.remove(this._loadingFX);\n    this._loadingFX = null;\n  };\n\n  ECharts.prototype.makeActionFromEvent = function (eventObj) {\n    var payload = zrUtil.extend({}, eventObj);\n    payload.type = eventActionMap[eventObj.type];\n    return payload;\n  };\n\n  ECharts.prototype.dispatchAction = function (payload, opt) {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n\n    if (!isObject(opt)) {\n      opt = {\n        silent: !!opt\n      };\n    }\n\n    if (!actions[payload.type]) {\n      return;\n    }\n\n    if (!this._model) {\n      return;\n    }\n\n    if (this[IN_MAIN_PROCESS_KEY]) {\n      this._pendingActions.push(payload);\n\n      return;\n    }\n\n    var silent = opt.silent;\n    doDispatchAction.call(this, payload, silent);\n    var flush = opt.flush;\n\n    if (flush) {\n      this._zr.flush();\n    } else if (flush !== false && env.browser.weChat) {\n      this._throttledZrFlush();\n    }\n\n    flushPendingActions.call(this, silent);\n    triggerUpdatedEvent.call(this, silent);\n  };\n\n  ECharts.prototype.updateLabelLayout = function () {\n    var labelManager = this._labelManager;\n    labelManager.updateLayoutConfig(this._api);\n    labelManager.layout(this._api);\n    labelManager.processLabelsOverall();\n  };\n\n  ECharts.prototype.appendData = function (params) {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n\n    var seriesIndex = params.seriesIndex;\n    var ecModel = this.getModel();\n    var seriesModel = ecModel.getSeriesByIndex(seriesIndex);\n\n    if (process.env.NODE_ENV !== 'production') {\n      assert(params.data && seriesModel);\n    }\n\n    seriesModel.appendData(params);\n    this._scheduler.unfinished = true;\n    this.getZr().wakeUp();\n  };\n\n  ECharts.internalField = function () {\n    prepare = function (ecIns) {\n      var scheduler = ecIns._scheduler;\n      scheduler.restorePipelines(ecIns._model);\n      scheduler.prepareStageTasks();\n      prepareView(ecIns, true);\n      prepareView(ecIns, false);\n      scheduler.plan();\n    };\n\n    prepareView = function (ecIns, isComponent) {\n      var ecModel = ecIns._model;\n      var scheduler = ecIns._scheduler;\n      var viewList = isComponent ? ecIns._componentsViews : ecIns._chartsViews;\n      var viewMap = isComponent ? ecIns._componentsMap : ecIns._chartsMap;\n      var zr = ecIns._zr;\n      var api = ecIns._api;\n\n      for (var i = 0; i < viewList.length; i++) {\n        viewList[i].__alive = false;\n      }\n\n      isComponent ? ecModel.eachComponent(function (componentType, model) {\n        componentType !== 'series' && doPrepare(model);\n      }) : ecModel.eachSeries(doPrepare);\n\n      function doPrepare(model) {\n        var requireNewView = model.__requireNewView;\n        model.__requireNewView = false;\n        var viewId = '_ec_' + model.id + '_' + model.type;\n        var view = !requireNewView && viewMap[viewId];\n\n        if (!view) {\n          var classType = parseClassType(model.type);\n          var Clazz = isComponent ? ComponentView.getClass(classType.main, classType.sub) : ChartView.getClass(classType.sub);\n\n          if (process.env.NODE_ENV !== 'production') {\n            assert(Clazz, classType.sub + ' does not exist.');\n          }\n\n          view = new Clazz();\n          view.init(ecModel, api);\n          viewMap[viewId] = view;\n          viewList.push(view);\n          zr.add(view.group);\n        }\n\n        model.__viewId = view.__id = viewId;\n        view.__alive = true;\n        view.__model = model;\n        view.group.__ecComponentInfo = {\n          mainType: model.mainType,\n          index: model.componentIndex\n        };\n        !isComponent && scheduler.prepareView(view, model, ecModel, api);\n      }\n\n      for (var i = 0; i < viewList.length;) {\n        var view = viewList[i];\n\n        if (!view.__alive) {\n          !isComponent && view.renderTask.dispose();\n          zr.remove(view.group);\n          view.dispose(ecModel, api);\n          viewList.splice(i, 1);\n\n          if (viewMap[view.__id] === view) {\n            delete viewMap[view.__id];\n          }\n\n          view.__id = view.group.__ecComponentInfo = null;\n        } else {\n          i++;\n        }\n      }\n    };\n\n    updateDirectly = function (ecIns, method, payload, mainType, subType) {\n      var ecModel = ecIns._model;\n      ecModel.setUpdatePayload(payload);\n\n      if (!mainType) {\n        each([].concat(ecIns._componentsViews).concat(ecIns._chartsViews), callView);\n        return;\n      }\n\n      var query = {};\n      query[mainType + 'Id'] = payload[mainType + 'Id'];\n      query[mainType + 'Index'] = payload[mainType + 'Index'];\n      query[mainType + 'Name'] = payload[mainType + 'Name'];\n      var condition = {\n        mainType: mainType,\n        query: query\n      };\n      subType && (condition.subType = subType);\n      var excludeSeriesId = payload.excludeSeriesId;\n      var excludeSeriesIdMap;\n\n      if (excludeSeriesId != null) {\n        excludeSeriesIdMap = zrUtil.createHashMap();\n        each(modelUtil.normalizeToArray(excludeSeriesId), function (id) {\n          var modelId = modelUtil.convertOptionIdName(id, null);\n\n          if (modelId != null) {\n            excludeSeriesIdMap.set(modelId, true);\n          }\n        });\n      }\n\n      ecModel && ecModel.eachComponent(condition, function (model) {\n        if (!excludeSeriesIdMap || excludeSeriesIdMap.get(model.id) == null) {\n          if (isHighDownPayload(payload) && !payload.notBlur) {\n            if (model instanceof SeriesModel) {\n              toggleSeriesBlurStateFromPayload(model, payload, ecIns._api);\n            }\n          } else if (isSelectChangePayload(payload)) {\n            if (model instanceof SeriesModel) {\n              toggleSelectionFromPayload(model, payload, ecIns._api);\n              updateSeriesElementSelection(model);\n              markStatusToUpdate(ecIns);\n            }\n          }\n\n          callView(ecIns[mainType === 'series' ? '_chartsMap' : '_componentsMap'][model.__viewId]);\n        }\n      }, ecIns);\n\n      function callView(view) {\n        view && view.__alive && view[method] && view[method](view.__model, ecModel, ecIns._api, payload);\n      }\n    };\n\n    updateMethods = {\n      prepareAndUpdate: function (payload) {\n        prepare(this);\n        updateMethods.update.call(this, payload);\n      },\n      update: function (payload) {\n        var ecModel = this._model;\n        var api = this._api;\n        var zr = this._zr;\n        var coordSysMgr = this._coordSysMgr;\n        var scheduler = this._scheduler;\n\n        if (!ecModel) {\n          return;\n        }\n\n        ecModel.setUpdatePayload(payload);\n        scheduler.restoreData(ecModel, payload);\n        scheduler.performSeriesTasks(ecModel);\n        coordSysMgr.create(ecModel, api);\n        scheduler.performDataProcessorTasks(ecModel, payload);\n        updateStreamModes(this, ecModel);\n        coordSysMgr.update(ecModel, api);\n        clearColorPalette(ecModel);\n        scheduler.performVisualTasks(ecModel, payload);\n        render(this, ecModel, api, payload);\n        var backgroundColor = ecModel.get('backgroundColor') || 'transparent';\n        var darkMode = ecModel.get('darkMode');\n\n        if (!env.canvasSupported) {\n          var colorArr = colorTool.parse(backgroundColor);\n          backgroundColor = colorTool.stringify(colorArr, 'rgb');\n\n          if (colorArr[3] === 0) {\n            backgroundColor = 'transparent';\n          }\n        } else {\n          zr.setBackgroundColor(backgroundColor);\n\n          if (darkMode != null && darkMode !== 'auto') {\n            zr.setDarkMode(darkMode);\n          }\n        }\n\n        performPostUpdateFuncs(ecModel, api);\n      },\n      updateTransform: function (payload) {\n        var _this = this;\n\n        var ecModel = this._model;\n        var api = this._api;\n\n        if (!ecModel) {\n          return;\n        }\n\n        ecModel.setUpdatePayload(payload);\n        var componentDirtyList = [];\n        ecModel.eachComponent(function (componentType, componentModel) {\n          if (componentType === 'series') {\n            return;\n          }\n\n          var componentView = _this.getViewOfComponentModel(componentModel);\n\n          if (componentView && componentView.__alive) {\n            if (componentView.updateTransform) {\n              var result = componentView.updateTransform(componentModel, ecModel, api, payload);\n              result && result.update && componentDirtyList.push(componentView);\n            } else {\n              componentDirtyList.push(componentView);\n            }\n          }\n        });\n        var seriesDirtyMap = zrUtil.createHashMap();\n        ecModel.eachSeries(function (seriesModel) {\n          var chartView = _this._chartsMap[seriesModel.__viewId];\n\n          if (chartView.updateTransform) {\n            var result = chartView.updateTransform(seriesModel, ecModel, api, payload);\n            result && result.update && seriesDirtyMap.set(seriesModel.uid, 1);\n          } else {\n            seriesDirtyMap.set(seriesModel.uid, 1);\n          }\n        });\n        clearColorPalette(ecModel);\n\n        this._scheduler.performVisualTasks(ecModel, payload, {\n          setDirty: true,\n          dirtyMap: seriesDirtyMap\n        });\n\n        renderSeries(this, ecModel, api, payload, seriesDirtyMap);\n        performPostUpdateFuncs(ecModel, this._api);\n      },\n      updateView: function (payload) {\n        var ecModel = this._model;\n\n        if (!ecModel) {\n          return;\n        }\n\n        ecModel.setUpdatePayload(payload);\n        ChartView.markUpdateMethod(payload, 'updateView');\n        clearColorPalette(ecModel);\n\n        this._scheduler.performVisualTasks(ecModel, payload, {\n          setDirty: true\n        });\n\n        render(this, this._model, this._api, payload);\n        performPostUpdateFuncs(ecModel, this._api);\n      },\n      updateVisual: function (payload) {\n        var _this = this;\n\n        var ecModel = this._model;\n\n        if (!ecModel) {\n          return;\n        }\n\n        ecModel.setUpdatePayload(payload);\n        ecModel.eachSeries(function (seriesModel) {\n          seriesModel.getData().clearAllVisual();\n        });\n        ChartView.markUpdateMethod(payload, 'updateVisual');\n        clearColorPalette(ecModel);\n\n        this._scheduler.performVisualTasks(ecModel, payload, {\n          visualType: 'visual',\n          setDirty: true\n        });\n\n        ecModel.eachComponent(function (componentType, componentModel) {\n          if (componentType !== 'series') {\n            var componentView = _this.getViewOfComponentModel(componentModel);\n\n            componentView && componentView.__alive && componentView.updateVisual(componentModel, ecModel, _this._api, payload);\n          }\n        });\n        ecModel.eachSeries(function (seriesModel) {\n          var chartView = _this._chartsMap[seriesModel.__viewId];\n          chartView.updateVisual(seriesModel, ecModel, _this._api, payload);\n        });\n        performPostUpdateFuncs(ecModel, this._api);\n      },\n      updateLayout: function (payload) {\n        updateMethods.update.call(this, payload);\n      }\n    };\n\n    doConvertPixel = function (ecIns, methodName, finder, value) {\n      if (ecIns._disposed) {\n        disposedWarning(ecIns.id);\n        return;\n      }\n\n      var ecModel = ecIns._model;\n\n      var coordSysList = ecIns._coordSysMgr.getCoordinateSystems();\n\n      var result;\n      var parsedFinder = modelUtil.parseFinder(ecModel, finder);\n\n      for (var i = 0; i < coordSysList.length; i++) {\n        var coordSys = coordSysList[i];\n\n        if (coordSys[methodName] && (result = coordSys[methodName](ecModel, parsedFinder, value)) != null) {\n          return result;\n        }\n      }\n\n      if (process.env.NODE_ENV !== 'production') {\n        console.warn('No coordinate system that supports ' + methodName + ' found by the given finder.');\n      }\n    };\n\n    updateStreamModes = function (ecIns, ecModel) {\n      var chartsMap = ecIns._chartsMap;\n      var scheduler = ecIns._scheduler;\n      ecModel.eachSeries(function (seriesModel) {\n        scheduler.updateStreamModes(seriesModel, chartsMap[seriesModel.__viewId]);\n      });\n    };\n\n    doDispatchAction = function (payload, silent) {\n      var _this = this;\n\n      var ecModel = this.getModel();\n      var payloadType = payload.type;\n      var escapeConnect = payload.escapeConnect;\n      var actionWrap = actions[payloadType];\n      var actionInfo = actionWrap.actionInfo;\n      var cptTypeTmp = (actionInfo.update || 'update').split(':');\n      var updateMethod = cptTypeTmp.pop();\n      var cptType = cptTypeTmp[0] != null && parseClassType(cptTypeTmp[0]);\n      this[IN_MAIN_PROCESS_KEY] = true;\n      var payloads = [payload];\n      var batched = false;\n\n      if (payload.batch) {\n        batched = true;\n        payloads = zrUtil.map(payload.batch, function (item) {\n          item = zrUtil.defaults(zrUtil.extend({}, item), payload);\n          item.batch = null;\n          return item;\n        });\n      }\n\n      var eventObjBatch = [];\n      var eventObj;\n      var isSelectChange = isSelectChangePayload(payload);\n      var isStatusChange = isHighDownPayload(payload) || isSelectChange;\n      each(payloads, function (batchItem) {\n        eventObj = actionWrap.action(batchItem, _this._model, _this._api);\n        eventObj = eventObj || zrUtil.extend({}, batchItem);\n        eventObj.type = actionInfo.event || eventObj.type;\n        eventObjBatch.push(eventObj);\n\n        if (isStatusChange) {\n          updateDirectly(_this, updateMethod, batchItem, 'series');\n          markStatusToUpdate(_this);\n        } else if (cptType) {\n          updateDirectly(_this, updateMethod, batchItem, cptType.main, cptType.sub);\n        }\n      });\n\n      if (updateMethod !== 'none' && !isStatusChange && !cptType) {\n        if (this[OPTION_UPDATED_KEY]) {\n          prepare(this);\n          updateMethods.update.call(this, payload);\n          this[OPTION_UPDATED_KEY] = false;\n        } else {\n          updateMethods[updateMethod].call(this, payload);\n        }\n      }\n\n      if (batched) {\n        eventObj = {\n          type: actionInfo.event || payloadType,\n          escapeConnect: escapeConnect,\n          batch: eventObjBatch\n        };\n      } else {\n        eventObj = eventObjBatch[0];\n      }\n\n      this[IN_MAIN_PROCESS_KEY] = false;\n\n      if (!silent) {\n        var messageCenter = this._messageCenter;\n        messageCenter.trigger(eventObj.type, eventObj);\n\n        if (isSelectChange) {\n          var newObj = {\n            type: 'selectchanged',\n            escapeConnect: escapeConnect,\n            selected: getAllSelectedIndices(ecModel),\n            isFromClick: payload.isFromClick || false,\n            fromAction: payload.type,\n            fromActionPayload: payload\n          };\n          messageCenter.trigger(newObj.type, newObj);\n        }\n      }\n    };\n\n    flushPendingActions = function (silent) {\n      var pendingActions = this._pendingActions;\n\n      while (pendingActions.length) {\n        var payload = pendingActions.shift();\n        doDispatchAction.call(this, payload, silent);\n      }\n    };\n\n    triggerUpdatedEvent = function (silent) {\n      !silent && this.trigger('updated');\n    };\n\n    bindRenderedEvent = function (zr, ecIns) {\n      zr.on('rendered', function (params) {\n        ecIns.trigger('rendered', params);\n\n        if (zr.animation.isFinished() && !ecIns[OPTION_UPDATED_KEY] && !ecIns._scheduler.unfinished && !ecIns._pendingActions.length) {\n          ecIns.trigger('finished');\n        }\n      });\n    };\n\n    bindMouseEvent = function (zr, ecIns) {\n      zr.on('mouseover', function (e) {\n        var el = e.target;\n        var dispatcher = findEventDispatcher(el, isHighDownDispatcher);\n\n        if (dispatcher) {\n          var ecData = getECData(dispatcher);\n          toggleSeriesBlurState(ecData.seriesIndex, ecData.focus, ecData.blurScope, ecIns._api, true);\n          enterEmphasisWhenMouseOver(dispatcher, e);\n          markStatusToUpdate(ecIns);\n        }\n      }).on('mouseout', function (e) {\n        var el = e.target;\n        var dispatcher = findEventDispatcher(el, isHighDownDispatcher);\n\n        if (dispatcher) {\n          var ecData = getECData(dispatcher);\n          toggleSeriesBlurState(ecData.seriesIndex, ecData.focus, ecData.blurScope, ecIns._api, false);\n          leaveEmphasisWhenMouseOut(dispatcher, e);\n          markStatusToUpdate(ecIns);\n        }\n      }).on('click', function (e) {\n        var el = e.target;\n        var dispatcher = findEventDispatcher(el, function (target) {\n          return getECData(target).dataIndex != null;\n        }, true);\n\n        if (dispatcher) {\n          var actionType = dispatcher.selected ? 'unselect' : 'select';\n          var ecData = getECData(dispatcher);\n\n          ecIns._api.dispatchAction({\n            type: actionType,\n            dataType: ecData.dataType,\n            dataIndexInside: ecData.dataIndex,\n            seriesIndex: ecData.seriesIndex,\n            isFromClick: true\n          });\n        }\n      });\n    };\n\n    clearColorPalette = function (ecModel) {\n      ecModel.clearColorPalette();\n      ecModel.eachSeries(function (seriesModel) {\n        seriesModel.clearColorPalette();\n      });\n    };\n\n    render = function (ecIns, ecModel, api, payload) {\n      renderComponents(ecIns, ecModel, api, payload);\n      each(ecIns._chartsViews, function (chart) {\n        chart.__alive = false;\n      });\n      renderSeries(ecIns, ecModel, api, payload);\n      each(ecIns._chartsViews, function (chart) {\n        if (!chart.__alive) {\n          chart.remove(ecModel, api);\n        }\n      });\n    };\n\n    renderComponents = function (ecIns, ecModel, api, payload, dirtyList) {\n      each(dirtyList || ecIns._componentsViews, function (componentView) {\n        var componentModel = componentView.__model;\n        clearStates(componentModel, componentView);\n        componentView.render(componentModel, ecModel, api, payload);\n        updateZ(componentModel, componentView);\n        updateStates(componentModel, componentView);\n      });\n    };\n\n    renderSeries = function (ecIns, ecModel, api, payload, dirtyMap) {\n      var scheduler = ecIns._scheduler;\n      var labelManager = ecIns._labelManager;\n      labelManager.clearLabels();\n      var unfinished = false;\n      ecModel.eachSeries(function (seriesModel) {\n        var chartView = ecIns._chartsMap[seriesModel.__viewId];\n        chartView.__alive = true;\n        var renderTask = chartView.renderTask;\n        scheduler.updatePayload(renderTask, payload);\n        clearStates(seriesModel, chartView);\n\n        if (dirtyMap && dirtyMap.get(seriesModel.uid)) {\n          renderTask.dirty();\n        }\n\n        if (renderTask.perform(scheduler.getPerformArgs(renderTask))) {\n          unfinished = true;\n        }\n\n        seriesModel.__transientTransitionOpt = null;\n        chartView.group.silent = !!seriesModel.get('silent');\n        updateBlend(seriesModel, chartView);\n        updateSeriesElementSelection(seriesModel);\n        labelManager.addLabelsOfSeries(chartView);\n      });\n      scheduler.unfinished = unfinished || scheduler.unfinished;\n      labelManager.updateLayoutConfig(api);\n      labelManager.layout(api);\n      labelManager.processLabelsOverall();\n      ecModel.eachSeries(function (seriesModel) {\n        var chartView = ecIns._chartsMap[seriesModel.__viewId];\n        updateZ(seriesModel, chartView);\n        updateStates(seriesModel, chartView);\n      });\n      updateHoverLayerStatus(ecIns, ecModel);\n    };\n\n    performPostUpdateFuncs = function (ecModel, api) {\n      each(postUpdateFuncs, function (func) {\n        func(ecModel, api);\n      });\n    };\n\n    markStatusToUpdate = function (ecIns) {\n      ecIns[STATUS_NEEDS_UPDATE_KEY] = true;\n      ecIns.getZr().wakeUp();\n    };\n\n    applyChangedStates = function (ecIns) {\n      if (!ecIns[STATUS_NEEDS_UPDATE_KEY]) {\n        return;\n      }\n\n      ecIns.getZr().storage.traverse(function (el) {\n        if (graphic.isElementRemoved(el)) {\n          return;\n        }\n\n        applyElementStates(el);\n      });\n      ecIns[STATUS_NEEDS_UPDATE_KEY] = false;\n    };\n\n    function applyElementStates(el) {\n      var newStates = [];\n      var oldStates = el.currentStates;\n\n      for (var i = 0; i < oldStates.length; i++) {\n        var stateName = oldStates[i];\n\n        if (!(stateName === 'emphasis' || stateName === 'blur' || stateName === 'select')) {\n          newStates.push(stateName);\n        }\n      }\n\n      if (el.selected && el.states.select) {\n        newStates.push('select');\n      }\n\n      if (el.hoverState === HOVER_STATE_EMPHASIS && el.states.emphasis) {\n        newStates.push('emphasis');\n      } else if (el.hoverState === HOVER_STATE_BLUR && el.states.blur) {\n        newStates.push('blur');\n      }\n\n      el.useStates(newStates);\n    }\n\n    function updateHoverLayerStatus(ecIns, ecModel) {\n      var zr = ecIns._zr;\n      var storage = zr.storage;\n      var elCount = 0;\n      storage.traverse(function (el) {\n        if (!el.isGroup) {\n          elCount++;\n        }\n      });\n\n      if (elCount > ecModel.get('hoverLayerThreshold') && !env.node && !env.worker) {\n        ecModel.eachSeries(function (seriesModel) {\n          if (seriesModel.preventUsingHoverLayer) {\n            return;\n          }\n\n          var chartView = ecIns._chartsMap[seriesModel.__viewId];\n\n          if (chartView.__alive) {\n            chartView.group.traverse(function (el) {\n              if (el.states.emphasis) {\n                el.states.emphasis.hoverLayer = true;\n              }\n            });\n          }\n        });\n      }\n    }\n\n    ;\n\n    function updateBlend(seriesModel, chartView) {\n      var blendMode = seriesModel.get('blendMode') || null;\n\n      if (process.env.NODE_ENV !== 'production') {\n        if (!env.canvasSupported && blendMode && blendMode !== 'source-over') {\n          console.warn('Only canvas support blendMode');\n        }\n      }\n\n      chartView.group.traverse(function (el) {\n        if (!el.isGroup) {\n          el.style.blend = blendMode;\n        }\n\n        if (el.eachPendingDisplayable) {\n          el.eachPendingDisplayable(function (displayable) {\n            displayable.style.blend = blendMode;\n          });\n        }\n      });\n    }\n\n    ;\n\n    function updateZ(model, view) {\n      if (model.preventAutoZ) {\n        return;\n      }\n\n      var z = model.get('z');\n      var zlevel = model.get('zlevel');\n      view.group.traverse(function (el) {\n        if (!el.isGroup) {\n          z != null && (el.z = z);\n          zlevel != null && (el.zlevel = zlevel);\n          var label = el.getTextContent();\n          var labelLine = el.getTextGuideLine();\n\n          if (label) {\n            label.z = el.z;\n            label.zlevel = el.zlevel;\n            label.z2 = el.z2 + 2;\n          }\n\n          if (labelLine) {\n            var showAbove = el.textGuideLineConfig && el.textGuideLineConfig.showAbove;\n            labelLine.z = el.z;\n            labelLine.zlevel = el.zlevel;\n            labelLine.z2 = el.z2 + (showAbove ? 1 : -1);\n          }\n        }\n      });\n    }\n\n    ;\n\n    function clearStates(model, view) {\n      view.group.traverse(function (el) {\n        if (graphic.isElementRemoved(el)) {\n          return;\n        }\n\n        var textContent = el.getTextContent();\n        var textGuide = el.getTextGuideLine();\n\n        if (el.stateTransition) {\n          el.stateTransition = null;\n        }\n\n        if (textContent && textContent.stateTransition) {\n          textContent.stateTransition = null;\n        }\n\n        if (textGuide && textGuide.stateTransition) {\n          textGuide.stateTransition = null;\n        }\n\n        if (el.hasState()) {\n          el.prevStates = el.currentStates;\n          el.clearStates();\n        } else if (el.prevStates) {\n          el.prevStates = null;\n        }\n      });\n    }\n\n    function updateStates(model, view) {\n      var stateAnimationModel = model.getModel('stateAnimation');\n      var enableAnimation = model.isAnimationEnabled();\n      var duration = stateAnimationModel.get('duration');\n      var stateTransition = duration > 0 ? {\n        duration: duration,\n        delay: stateAnimationModel.get('delay'),\n        easing: stateAnimationModel.get('easing')\n      } : null;\n      view.group.traverse(function (el) {\n        if (el.states && el.states.emphasis) {\n          if (graphic.isElementRemoved(el)) {\n            return;\n          }\n\n          if (el instanceof graphic.Path) {\n            savePathStates(el);\n          }\n\n          if (el.__dirty) {\n            var prevStates = el.prevStates;\n\n            if (prevStates) {\n              el.useStates(prevStates);\n            }\n          }\n\n          if (enableAnimation) {\n            el.stateTransition = stateTransition;\n            var textContent = el.getTextContent();\n            var textGuide = el.getTextGuideLine();\n\n            if (textContent) {\n              textContent.stateTransition = stateTransition;\n            }\n\n            if (textGuide) {\n              textGuide.stateTransition = stateTransition;\n            }\n          }\n\n          if (el.__dirty) {\n            applyElementStates(el);\n          }\n        }\n      });\n    }\n\n    ;\n\n    createExtensionAPI = function (ecIns) {\n      return new (function (_super) {\n        __extends(class_1, _super);\n\n        function class_1() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        class_1.prototype.getCoordinateSystems = function () {\n          return ecIns._coordSysMgr.getCoordinateSystems();\n        };\n\n        class_1.prototype.getComponentByElement = function (el) {\n          while (el) {\n            var modelInfo = el.__ecComponentInfo;\n\n            if (modelInfo != null) {\n              return ecIns._model.getComponent(modelInfo.mainType, modelInfo.index);\n            }\n\n            el = el.parent;\n          }\n        };\n\n        class_1.prototype.enterEmphasis = function (el, highlightDigit) {\n          enterEmphasis(el, highlightDigit);\n          markStatusToUpdate(ecIns);\n        };\n\n        class_1.prototype.leaveEmphasis = function (el, highlightDigit) {\n          leaveEmphasis(el, highlightDigit);\n          markStatusToUpdate(ecIns);\n        };\n\n        class_1.prototype.enterBlur = function (el) {\n          enterBlur(el);\n          markStatusToUpdate(ecIns);\n        };\n\n        class_1.prototype.leaveBlur = function (el) {\n          leaveBlur(el);\n          markStatusToUpdate(ecIns);\n        };\n\n        class_1.prototype.enterSelect = function (el) {\n          enterSelect(el);\n          markStatusToUpdate(ecIns);\n        };\n\n        class_1.prototype.leaveSelect = function (el) {\n          leaveSelect(el);\n          markStatusToUpdate(ecIns);\n        };\n\n        class_1.prototype.getModel = function () {\n          return ecIns.getModel();\n        };\n\n        class_1.prototype.getViewOfComponentModel = function (componentModel) {\n          return ecIns.getViewOfComponentModel(componentModel);\n        };\n\n        class_1.prototype.getViewOfSeriesModel = function (seriesModel) {\n          return ecIns.getViewOfSeriesModel(seriesModel);\n        };\n\n        return class_1;\n      }(ExtensionAPI))(ecIns);\n    };\n\n    enableConnect = function (chart) {\n      function updateConnectedChartsStatus(charts, status) {\n        for (var i = 0; i < charts.length; i++) {\n          var otherChart = charts[i];\n          otherChart[CONNECT_STATUS_KEY] = status;\n        }\n      }\n\n      each(eventActionMap, function (actionType, eventType) {\n        chart._messageCenter.on(eventType, function (event) {\n          if (connectedGroups[chart.group] && chart[CONNECT_STATUS_KEY] !== CONNECT_STATUS_PENDING) {\n            if (event && event.escapeConnect) {\n              return;\n            }\n\n            var action_1 = chart.makeActionFromEvent(event);\n            var otherCharts_1 = [];\n            each(instances, function (otherChart) {\n              if (otherChart !== chart && otherChart.group === chart.group) {\n                otherCharts_1.push(otherChart);\n              }\n            });\n            updateConnectedChartsStatus(otherCharts_1, CONNECT_STATUS_PENDING);\n            each(otherCharts_1, function (otherChart) {\n              if (otherChart[CONNECT_STATUS_KEY] !== CONNECT_STATUS_UPDATING) {\n                otherChart.dispatchAction(action_1);\n              }\n            });\n            updateConnectedChartsStatus(otherCharts_1, CONNECT_STATUS_UPDATED);\n          }\n        });\n      });\n    };\n\n    setTransitionOpt = function (chart, transitionOpt) {\n      var ecModel = chart._model;\n      zrUtil.each(modelUtil.normalizeToArray(transitionOpt), function (transOpt) {\n        var errMsg;\n        var fromOpt = transOpt.from;\n        var toOpt = transOpt.to;\n\n        if (toOpt == null) {\n          if (process.env.NODE_ENV !== 'production') {\n            errMsg = '`transition.to` must be specified.';\n          }\n\n          throwError(errMsg);\n        }\n\n        var finderOpt = {\n          includeMainTypes: ['series'],\n          enableAll: false,\n          enableNone: false\n        };\n        var fromResult = fromOpt ? modelUtil.parseFinder(ecModel, fromOpt, finderOpt) : null;\n        var toResult = modelUtil.parseFinder(ecModel, toOpt, finderOpt);\n        var toSeries = toResult.seriesModel;\n\n        if (toSeries == null) {\n          errMsg = '';\n\n          if (process.env.NODE_ENV !== 'production') {\n            errMsg = '`transition` is only supported on series.';\n          }\n        }\n\n        if (fromResult && fromResult.seriesModel !== toSeries) {\n          errMsg = '';\n\n          if (process.env.NODE_ENV !== 'production') {\n            errMsg = '`transition.from` and `transition.to` must be specified to the same series.';\n          }\n        }\n\n        if (errMsg != null) {\n          throwError(errMsg);\n        }\n\n        toSeries.__transientTransitionOpt = {\n          from: fromOpt ? fromOpt.dimension : null,\n          to: toOpt.dimension,\n          dividingMethod: transOpt.dividingMethod\n        };\n      });\n    };\n  }();\n\n  return ECharts;\n}(Eventful);\n\nvar echartsProto = ECharts.prototype;\nechartsProto.on = createRegisterEventWithLowercaseECharts('on');\nechartsProto.off = createRegisterEventWithLowercaseECharts('off');\n\nechartsProto.one = function (eventName, cb, ctx) {\n  var self = this;\n  deprecateLog('ECharts#one is deprecated.');\n\n  function wrapped() {\n    var args2 = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args2[_i] = arguments[_i];\n    }\n\n    cb && cb.apply && cb.apply(this, args2);\n    self.off(eventName, wrapped);\n  }\n\n  ;\n  this.on.call(this, eventName, wrapped, ctx);\n};\n\nvar MOUSE_EVENT_NAMES = ['click', 'dblclick', 'mouseover', 'mouseout', 'mousemove', 'mousedown', 'mouseup', 'globalout', 'contextmenu'];\n\nfunction disposedWarning(id) {\n  if (process.env.NODE_ENV !== 'production') {\n    console.warn('Instance ' + id + ' has been disposed');\n  }\n}\n\nvar actions = {};\nvar eventActionMap = {};\nvar dataProcessorFuncs = [];\nvar optionPreprocessorFuncs = [];\nvar postInitFuncs = [];\nvar postUpdateFuncs = [];\nvar visualFuncs = [];\nvar themeStorage = {};\nvar loadingEffects = {};\nvar instances = {};\nvar connectedGroups = {};\nvar idBase = +new Date() - 0;\nvar groupIdBase = +new Date() - 0;\nvar DOM_ATTRIBUTE_KEY = '_echarts_instance_';\nexport function init(dom, theme, opts) {\n  if (process.env.NODE_ENV !== 'production') {\n    if (!dom) {\n      throw new Error('Initialize failed: invalid dom.');\n    }\n  }\n\n  var existInstance = getInstanceByDom(dom);\n\n  if (existInstance) {\n    if (process.env.NODE_ENV !== 'production') {\n      console.warn('There is a chart instance already initialized on the dom.');\n    }\n\n    return existInstance;\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (zrUtil.isDom(dom) && dom.nodeName.toUpperCase() !== 'CANVAS' && (!dom.clientWidth && (!opts || opts.width == null) || !dom.clientHeight && (!opts || opts.height == null))) {\n      console.warn('Can\\'t get DOM width or height. Please check ' + 'dom.clientWidth and dom.clientHeight. They should not be 0.' + 'For example, you may need to call this in the callback ' + 'of window.onload.');\n    }\n  }\n\n  var chart = new ECharts(dom, theme, opts);\n  chart.id = 'ec_' + idBase++;\n  instances[chart.id] = chart;\n  modelUtil.setAttribute(dom, DOM_ATTRIBUTE_KEY, chart.id);\n  enableConnect(chart);\n  each(postInitFuncs, function (postInitFunc) {\n    postInitFunc(chart);\n  });\n  return chart;\n}\nexport function connect(groupId) {\n  if (zrUtil.isArray(groupId)) {\n    var charts = groupId;\n    groupId = null;\n    each(charts, function (chart) {\n      if (chart.group != null) {\n        groupId = chart.group;\n      }\n    });\n    groupId = groupId || 'g_' + groupIdBase++;\n    each(charts, function (chart) {\n      chart.group = groupId;\n    });\n  }\n\n  connectedGroups[groupId] = true;\n  return groupId;\n}\nexport function disConnect(groupId) {\n  connectedGroups[groupId] = false;\n}\nexport var disconnect = disConnect;\nexport function dispose(chart) {\n  if (typeof chart === 'string') {\n    chart = instances[chart];\n  } else if (!(chart instanceof ECharts)) {\n    chart = getInstanceByDom(chart);\n  }\n\n  if (chart instanceof ECharts && !chart.isDisposed()) {\n    chart.dispose();\n  }\n}\nexport function getInstanceByDom(dom) {\n  return instances[modelUtil.getAttribute(dom, DOM_ATTRIBUTE_KEY)];\n}\nexport function getInstanceById(key) {\n  return instances[key];\n}\nexport function registerTheme(name, theme) {\n  themeStorage[name] = theme;\n}\nexport function registerPreprocessor(preprocessorFunc) {\n  optionPreprocessorFuncs.push(preprocessorFunc);\n}\nexport function registerProcessor(priority, processor) {\n  normalizeRegister(dataProcessorFuncs, priority, processor, PRIORITY_PROCESSOR_DEFAULT);\n}\nexport function registerPostInit(postInitFunc) {\n  postInitFunc && postInitFuncs.push(postInitFunc);\n}\nexport function registerPostUpdate(postUpdateFunc) {\n  postUpdateFunc && postUpdateFuncs.push(postUpdateFunc);\n}\nexport function registerAction(actionInfo, eventName, action) {\n  if (typeof eventName === 'function') {\n    action = eventName;\n    eventName = '';\n  }\n\n  var actionType = isObject(actionInfo) ? actionInfo.type : [actionInfo, actionInfo = {\n    event: eventName\n  }][0];\n  actionInfo.event = (actionInfo.event || actionType).toLowerCase();\n  eventName = actionInfo.event;\n  assert(ACTION_REG.test(actionType) && ACTION_REG.test(eventName));\n\n  if (!actions[actionType]) {\n    actions[actionType] = {\n      action: action,\n      actionInfo: actionInfo\n    };\n  }\n\n  eventActionMap[eventName] = actionType;\n}\nexport function registerCoordinateSystem(type, coordSysCreator) {\n  CoordinateSystemManager.register(type, coordSysCreator);\n}\nexport function getCoordinateSystemDimensions(type) {\n  var coordSysCreator = CoordinateSystemManager.get(type);\n\n  if (coordSysCreator) {\n    return coordSysCreator.getDimensionsInfo ? coordSysCreator.getDimensionsInfo() : coordSysCreator.dimensions.slice();\n  }\n}\nexport { registerLocale } from './locale';\n\nfunction registerLayout(priority, layoutTask) {\n  normalizeRegister(visualFuncs, priority, layoutTask, PRIORITY_VISUAL_LAYOUT, 'layout');\n}\n\nfunction registerVisual(priority, visualTask) {\n  normalizeRegister(visualFuncs, priority, visualTask, PRIORITY_VISUAL_CHART, 'visual');\n}\n\nexport { registerLayout, registerVisual };\n\nfunction normalizeRegister(targetList, priority, fn, defaultPriority, visualType) {\n  if (isFunction(priority) || isObject(priority)) {\n    fn = priority;\n    priority = defaultPriority;\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (isNaN(priority) || priority == null) {\n      throw new Error('Illegal priority');\n    }\n\n    each(targetList, function (wrap) {\n      assert(wrap.__raw !== fn);\n    });\n  }\n\n  var stageHandler = Scheduler.wrapStageHandler(fn, visualType);\n  stageHandler.__prio = priority;\n  stageHandler.__raw = fn;\n  targetList.push(stageHandler);\n}\n\nexport function registerLoading(name, loadingFx) {\n  loadingEffects[name] = loadingFx;\n}\nexport function extendComponentModel(proto) {\n  return ComponentModel.extend(proto);\n}\nexport function extendComponentView(proto) {\n  return ComponentView.extend(proto);\n}\nexport function extendSeriesModel(proto) {\n  return SeriesModel.extend(proto);\n}\nexport function extendChartView(proto) {\n  return ChartView.extend(proto);\n}\nexport function setCanvasCreator(creator) {\n  zrUtil.$override('createCanvas', creator);\n}\nexport function registerMap(mapName, geoJson, specialAreas) {\n  mapDataStorage.registerMap(mapName, geoJson, specialAreas);\n}\nexport function getMap(mapName) {\n  var records = mapDataStorage.retrieveMap(mapName);\n  return records && records[0] && {\n    geoJson: records[0].geoJSON,\n    specialAreas: records[0].specialAreas\n  };\n}\nexport var registerTransform = registerExternalTransform;\nregisterVisual(PRIORITY_VISUAL_GLOBAL, seriesStyleTask);\nregisterVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM, dataStyleTask);\nregisterVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM, dataColorPaletteTask);\nregisterVisual(PRIORITY_VISUAL_GLOBAL, seriesSymbolTask);\nregisterVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM, dataSymbolTask);\nregisterVisual(PRIORITY_VISUAL_DECAL, decal);\nregisterPreprocessor(backwardCompat);\nregisterProcessor(PRIORITY_PROCESSOR_DATASTACK, dataStack);\nregisterLoading('default', loadingDefault);\nregisterAction({\n  type: HIGHLIGHT_ACTION_TYPE,\n  event: HIGHLIGHT_ACTION_TYPE,\n  update: HIGHLIGHT_ACTION_TYPE\n}, zrUtil.noop);\nregisterAction({\n  type: DOWNPLAY_ACTION_TYPE,\n  event: DOWNPLAY_ACTION_TYPE,\n  update: DOWNPLAY_ACTION_TYPE\n}, zrUtil.noop);\nregisterAction({\n  type: SELECT_ACTION_TYPE,\n  event: SELECT_ACTION_TYPE,\n  update: SELECT_ACTION_TYPE\n}, zrUtil.noop);\nregisterAction({\n  type: UNSELECT_ACTION_TYPE,\n  event: UNSELECT_ACTION_TYPE,\n  update: UNSELECT_ACTION_TYPE\n}, zrUtil.noop);\nregisterAction({\n  type: TOGGLE_SELECT_ACTION_TYPE,\n  event: TOGGLE_SELECT_ACTION_TYPE,\n  update: TOGGLE_SELECT_ACTION_TYPE\n}, zrUtil.noop);\nregisterTheme('light', lightTheme);\nregisterTheme('dark', darkTheme);\nexport var dataTool = {};","map":{"version":3,"sources":["/Users/wanglijie/wanglijie/clover-defi-wallet/node_modules/echarts/esm/echarts.js"],"names":["__extends","zrender","zrUtil","colorTool","env","timsort","Eventful","GlobalModel","ExtensionAPI","CoordinateSystemManager","OptionManager","backwardCompat","dataStack","ComponentModel","SeriesModel","ComponentView","ChartView","graphic","getECData","enterEmphasisWhenMouseOver","leaveEmphasisWhenMouseOut","isHighDownDispatcher","HOVER_STATE_EMPHASIS","HOVER_STATE_BLUR","toggleSeriesBlurState","toggleSeriesBlurStateFromPayload","toggleSelectionFromPayload","updateSeriesElementSelection","getAllSelectedIndices","isSelectChangePayload","isHighDownPayload","HIGHLIGHT_ACTION_TYPE","DOWNPLAY_ACTION_TYPE","SELECT_ACTION_TYPE","UNSELECT_ACTION_TYPE","TOGGLE_SELECT_ACTION_TYPE","savePathStates","enterEmphasis","leaveEmphasis","leaveBlur","enterSelect","leaveSelect","enterBlur","modelUtil","throttle","seriesStyleTask","dataStyleTask","dataColorPaletteTask","loadingDefault","Scheduler","lightTheme","darkTheme","mapDataStorage","parseClassType","ECEventProcessor","seriesSymbolTask","dataSymbolTask","getVisualFromData","getItemVisualFromData","LabelManager","deprecateLog","throwError","handleLegacySelectEvents","registerExternalTransform","createLocaleObject","SYSTEM_LANG","findEventDispatcher","decal","assert","each","isFunction","isObject","version","dependencies","TEST_FRAME_REMAIN_TIME","PRIORITY_PROCESSOR_SERIES_FILTER","PRIORITY_PROCESSOR_DATASTACK","PRIORITY_PROCESSOR_FILTER","PRIORITY_PROCESSOR_DEFAULT","PRIORITY_PROCESSOR_STATISTIC","PRIORITY_VISUAL_LAYOUT","PRIORITY_VISUAL_PROGRESSIVE_LAYOUT","PRIORITY_VISUAL_GLOBAL","PRIORITY_VISUAL_CHART","PRIORITY_VISUAL_COMPONENT","PRIORITY_VISUAL_CHART_DATA_CUSTOM","PRIORITY_VISUAL_POST_CHART_LAYOUT","PRIORITY_VISUAL_BRUSH","PRIORITY_VISUAL_ARIA","PRIORITY_VISUAL_DECAL","PRIORITY","PROCESSOR","FILTER","SERIES_FILTER","STATISTIC","VISUAL","LAYOUT","PROGRESSIVE_LAYOUT","GLOBAL","CHART","POST_CHART_LAYOUT","COMPONENT","BRUSH","CHART_ITEM","ARIA","DECAL","IN_MAIN_PROCESS_KEY","OPTION_UPDATED_KEY","STATUS_NEEDS_UPDATE_KEY","ACTION_REG","CONNECT_STATUS_KEY","CONNECT_STATUS_PENDING","CONNECT_STATUS_UPDATING","CONNECT_STATUS_UPDATED","createRegisterEventWithLowercaseECharts","method","args","_i","arguments","length","isDisposed","disposedWarning","id","toLowercaseNameAndCallEventful","createRegisterEventWithLowercaseMessageCenter","host","toLowerCase","prototype","apply","MessageCenter","_super","messageCenterProto","on","off","prepare","prepareView","updateDirectly","updateMethods","doConvertPixel","updateStreamModes","doDispatchAction","flushPendingActions","triggerUpdatedEvent","bindRenderedEvent","bindMouseEvent","clearColorPalette","render","renderComponents","renderSeries","performPostUpdateFuncs","createExtensionAPI","enableConnect","setTransitionOpt","markStatusToUpdate","applyChangedStates","ECharts","dom","theme","opts","_this","call","_chartsViews","_chartsMap","_componentsViews","_componentsMap","_pendingActions","themeStorage","_dom","root","window","global","defaultRenderer","defaultUseDirtyRect","process","NODE_ENV","__ECHARTS__DEFAULT__RENDERER__","devUseDirtyRect","__ECHARTS__DEFAULT__USE_DIRTY_RECT__","zr","_zr","init","renderer","devicePixelRatio","width","height","useDirtyRect","_throttledZrFlush","bind","flush","clone","_theme","_locale","locale","_coordSysMgr","api","_api","prioritySortFunc","a","b","__prio","visualFuncs","dataProcessorFuncs","_scheduler","_messageCenter","_labelManager","_initEvents","resize","animation","_onframe","setAsPrimitive","_disposed","scheduler","silent","update","unfinished","remainTime","ecModel","_model","startTime","Date","performSeriesTasks","performDataProcessorTasks","performVisualTasks","getDom","getId","getZr","setOption","option","notMerge","lazyUpdate","replaceMerge","transitionOpt","transition","optionManager","optionPreprocessorFuncs","wakeUp","setTheme","console","error","getModel","getOption","getWidth","getHeight","getDevicePixelRatio","painter","dpr","getRenderedCanvas","canvasSupported","extend","pixelRatio","backgroundColor","get","getSvgDataURL","svgSupported","list","storage","getDisplayList","el","stopAnimation","toDataURL","getDataURL","excludeComponents","excludesComponentViews","self","componentType","eachComponent","mainType","component","view","__viewId","group","ignore","push","url","getType","type","getConnectedDataURL","isSvg","groupId","mathMin","Math","min","mathMax","max","MAX_NUMBER","Infinity","connectedGroups","left_1","top_1","right_1","bottom_1","canvasList_1","dpr_1","instances","chart","canvas","getSvgDom","innerHTML","boundingRect","getBoundingClientRect","left","top","right","bottom","targetCanvas","createCanvas","zr_1","content_1","item","x","y","getSvgRoot","connectedBackgroundColor","setBackgroundColor","refreshImmediately","add","Rect","shape","style","fill","img","Image","image","convertToPixel","finder","value","convertFromPixel","containPixel","result","findResult","parseFinder","models","key","indexOf","model","coordSys","coordinateSystem","containPoint","warn","getVisual","visualType","parsedFinder","defaultMainType","seriesModel","data","getData","dataIndexInside","hasOwnProperty","indexOfRawIndex","dataIndex","getViewOfComponentModel","componentModel","getViewOfSeriesModel","MOUSE_EVENT_NAMES","eveName","handler","e","target","params","isGlobalOut","parent","ecData","dataModel","getSeriesByIndex","seriesIndex","getDataParams","dataType","eventData","componentIndex","getComponent","event","_$eventProcessor","eventInfo","targetEl","packedEvent","trigger","zrEventfulCallAtLast","eventActionMap","actionType","eventType","clear","series","dispose","setAttribute","DOM_ATTRIBUTE_KEY","_loadingFX","optionChanged","resetOption","duration","showLoading","name","cfg","hideLoading","loadingEffects","remove","makeActionFromEvent","eventObj","payload","dispatchAction","opt","actions","browser","weChat","updateLabelLayout","labelManager","updateLayoutConfig","layout","processLabelsOverall","appendData","internalField","ecIns","restorePipelines","prepareStageTasks","plan","isComponent","viewList","viewMap","i","__alive","doPrepare","eachSeries","requireNewView","__requireNewView","viewId","classType","Clazz","getClass","main","sub","__id","__model","__ecComponentInfo","index","renderTask","splice","subType","setUpdatePayload","concat","callView","query","condition","excludeSeriesId","excludeSeriesIdMap","createHashMap","normalizeToArray","modelId","convertOptionIdName","set","notBlur","prepareAndUpdate","coordSysMgr","restoreData","create","darkMode","colorArr","parse","stringify","setDarkMode","updateTransform","componentDirtyList","componentView","seriesDirtyMap","chartView","uid","setDirty","dirtyMap","updateView","markUpdateMethod","updateVisual","clearAllVisual","updateLayout","methodName","coordSysList","getCoordinateSystems","chartsMap","payloadType","escapeConnect","actionWrap","actionInfo","cptTypeTmp","split","updateMethod","pop","cptType","payloads","batched","batch","map","defaults","eventObjBatch","isSelectChange","isStatusChange","batchItem","action","messageCenter","newObj","selected","isFromClick","fromAction","fromActionPayload","pendingActions","shift","isFinished","dispatcher","focus","blurScope","dirtyList","clearStates","updateZ","updateStates","clearLabels","updatePayload","dirty","perform","getPerformArgs","__transientTransitionOpt","updateBlend","addLabelsOfSeries","updateHoverLayerStatus","postUpdateFuncs","func","traverse","isElementRemoved","applyElementStates","newStates","oldStates","currentStates","stateName","states","select","hoverState","emphasis","blur","useStates","elCount","isGroup","node","worker","preventUsingHoverLayer","hoverLayer","blendMode","blend","eachPendingDisplayable","displayable","preventAutoZ","z","zlevel","label","getTextContent","labelLine","getTextGuideLine","z2","showAbove","textGuideLineConfig","textContent","textGuide","stateTransition","hasState","prevStates","stateAnimationModel","enableAnimation","isAnimationEnabled","delay","easing","Path","__dirty","class_1","getComponentByElement","modelInfo","highlightDigit","updateConnectedChartsStatus","charts","status","otherChart","action_1","otherCharts_1","transOpt","errMsg","fromOpt","from","toOpt","to","finderOpt","includeMainTypes","enableAll","enableNone","fromResult","toResult","toSeries","dimension","dividingMethod","echartsProto","one","eventName","cb","ctx","wrapped","args2","postInitFuncs","idBase","groupIdBase","Error","existInstance","getInstanceByDom","isDom","nodeName","toUpperCase","clientWidth","clientHeight","postInitFunc","connect","isArray","disConnect","disconnect","getAttribute","getInstanceById","registerTheme","registerPreprocessor","preprocessorFunc","registerProcessor","priority","processor","normalizeRegister","registerPostInit","registerPostUpdate","postUpdateFunc","registerAction","test","registerCoordinateSystem","coordSysCreator","register","getCoordinateSystemDimensions","getDimensionsInfo","dimensions","slice","registerLocale","registerLayout","layoutTask","registerVisual","visualTask","targetList","fn","defaultPriority","isNaN","wrap","__raw","stageHandler","wrapStageHandler","registerLoading","loadingFx","extendComponentModel","proto","extendComponentView","extendSeriesModel","extendChartView","setCanvasCreator","creator","$override","registerMap","mapName","geoJson","specialAreas","getMap","records","retrieveMap","geoJSON","registerTransform","noop","dataTool"],"mappings":"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","sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\nimport { __extends } from \"tslib\";\nimport * as zrender from 'zrender/esm/zrender';\nimport * as zrUtil from 'zrender/esm/core/util';\nimport * as colorTool from 'zrender/esm/tool/color';\nimport env from 'zrender/esm/core/env';\nimport timsort from 'zrender/esm/core/timsort';\nimport Eventful from 'zrender/esm/core/Eventful';\nimport GlobalModel from './model/Global';\nimport ExtensionAPI from './ExtensionAPI';\nimport CoordinateSystemManager from './CoordinateSystem';\nimport OptionManager from './model/OptionManager';\nimport backwardCompat from './preprocessor/backwardCompat';\nimport dataStack from './processor/dataStack';\nimport ComponentModel from './model/Component';\nimport SeriesModel from './model/Series';\nimport ComponentView from './view/Component';\nimport ChartView from './view/Chart';\nimport * as graphic from './util/graphic';\nimport { getECData } from './util/innerStore';\nimport { enterEmphasisWhenMouseOver, leaveEmphasisWhenMouseOut, isHighDownDispatcher, HOVER_STATE_EMPHASIS, HOVER_STATE_BLUR, toggleSeriesBlurState, toggleSeriesBlurStateFromPayload, toggleSelectionFromPayload, updateSeriesElementSelection, getAllSelectedIndices, isSelectChangePayload, isHighDownPayload, HIGHLIGHT_ACTION_TYPE, DOWNPLAY_ACTION_TYPE, SELECT_ACTION_TYPE, UNSELECT_ACTION_TYPE, TOGGLE_SELECT_ACTION_TYPE, savePathStates, enterEmphasis, leaveEmphasis, leaveBlur, enterSelect, leaveSelect, enterBlur } from './util/states';\nimport * as modelUtil from './util/model';\nimport { throttle } from './util/throttle';\nimport { seriesStyleTask, dataStyleTask, dataColorPaletteTask } from './visual/style';\nimport loadingDefault from './loading/default';\nimport Scheduler from './stream/Scheduler';\nimport lightTheme from './theme/light';\nimport darkTheme from './theme/dark';\nimport './component/dataset';\nimport mapDataStorage from './coord/geo/mapDataStorage';\nimport { parseClassType } from './util/clazz';\nimport { ECEventProcessor } from './util/ECEventProcessor';\nimport { seriesSymbolTask, dataSymbolTask } from './visual/symbol';\nimport { getVisualFromData, getItemVisualFromData } from './visual/helper';\nimport LabelManager from './label/LabelManager';\nimport { deprecateLog, throwError } from './util/log';\nimport { handleLegacySelectEvents } from './legacy/dataSelectAction';\nimport 'zrender/esm/canvas/canvas';\nimport { registerExternalTransform } from './data/helper/transform';\nimport { createLocaleObject, SYSTEM_LANG } from './locale';\nimport { findEventDispatcher } from './util/event';\nimport decal from './visual/decal';\nvar assert = zrUtil.assert;\nvar each = zrUtil.each;\nvar isFunction = zrUtil.isFunction;\nvar isObject = zrUtil.isObject;\nexport var version = '5.0.0';\nexport var dependencies = {\n  zrender: '5.0.1'\n};\nvar TEST_FRAME_REMAIN_TIME = 1;\nvar PRIORITY_PROCESSOR_SERIES_FILTER = 800;\nvar PRIORITY_PROCESSOR_DATASTACK = 900;\nvar PRIORITY_PROCESSOR_FILTER = 1000;\nvar PRIORITY_PROCESSOR_DEFAULT = 2000;\nvar PRIORITY_PROCESSOR_STATISTIC = 5000;\nvar PRIORITY_VISUAL_LAYOUT = 1000;\nvar PRIORITY_VISUAL_PROGRESSIVE_LAYOUT = 1100;\nvar PRIORITY_VISUAL_GLOBAL = 2000;\nvar PRIORITY_VISUAL_CHART = 3000;\nvar PRIORITY_VISUAL_COMPONENT = 4000;\nvar PRIORITY_VISUAL_CHART_DATA_CUSTOM = 4500;\nvar PRIORITY_VISUAL_POST_CHART_LAYOUT = 4600;\nvar PRIORITY_VISUAL_BRUSH = 5000;\nvar PRIORITY_VISUAL_ARIA = 6000;\nvar PRIORITY_VISUAL_DECAL = 7000;\nexport var PRIORITY = {\n  PROCESSOR: {\n    FILTER: PRIORITY_PROCESSOR_FILTER,\n    SERIES_FILTER: PRIORITY_PROCESSOR_SERIES_FILTER,\n    STATISTIC: PRIORITY_PROCESSOR_STATISTIC\n  },\n  VISUAL: {\n    LAYOUT: PRIORITY_VISUAL_LAYOUT,\n    PROGRESSIVE_LAYOUT: PRIORITY_VISUAL_PROGRESSIVE_LAYOUT,\n    GLOBAL: PRIORITY_VISUAL_GLOBAL,\n    CHART: PRIORITY_VISUAL_CHART,\n    POST_CHART_LAYOUT: PRIORITY_VISUAL_POST_CHART_LAYOUT,\n    COMPONENT: PRIORITY_VISUAL_COMPONENT,\n    BRUSH: PRIORITY_VISUAL_BRUSH,\n    CHART_ITEM: PRIORITY_VISUAL_CHART_DATA_CUSTOM,\n    ARIA: PRIORITY_VISUAL_ARIA,\n    DECAL: PRIORITY_VISUAL_DECAL\n  }\n};\nvar IN_MAIN_PROCESS_KEY = '__flagInMainProcess';\nvar OPTION_UPDATED_KEY = '__optionUpdated';\nvar STATUS_NEEDS_UPDATE_KEY = '__needsUpdateStatus';\nvar ACTION_REG = /^[a-zA-Z0-9_]+$/;\nvar CONNECT_STATUS_KEY = '__connectUpdateStatus';\nvar CONNECT_STATUS_PENDING = 0;\nvar CONNECT_STATUS_UPDATING = 1;\nvar CONNECT_STATUS_UPDATED = 2;\n;\n\nfunction createRegisterEventWithLowercaseECharts(method) {\n  return function () {\n    var args = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n\n    if (this.isDisposed()) {\n      disposedWarning(this.id);\n      return;\n    }\n\n    return toLowercaseNameAndCallEventful(this, method, args);\n  };\n}\n\nfunction createRegisterEventWithLowercaseMessageCenter(method) {\n  return function () {\n    var args = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n\n    return toLowercaseNameAndCallEventful(this, method, args);\n  };\n}\n\nfunction toLowercaseNameAndCallEventful(host, method, args) {\n  args[0] = args[0] && args[0].toLowerCase();\n  return Eventful.prototype[method].apply(host, args);\n}\n\nvar MessageCenter = function (_super) {\n  __extends(MessageCenter, _super);\n\n  function MessageCenter() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  return MessageCenter;\n}(Eventful);\n\nvar messageCenterProto = MessageCenter.prototype;\nmessageCenterProto.on = createRegisterEventWithLowercaseMessageCenter('on');\nmessageCenterProto.off = createRegisterEventWithLowercaseMessageCenter('off');\nvar prepare;\nvar prepareView;\nvar updateDirectly;\nvar updateMethods;\nvar doConvertPixel;\nvar updateStreamModes;\nvar doDispatchAction;\nvar flushPendingActions;\nvar triggerUpdatedEvent;\nvar bindRenderedEvent;\nvar bindMouseEvent;\nvar clearColorPalette;\nvar render;\nvar renderComponents;\nvar renderSeries;\nvar performPostUpdateFuncs;\nvar createExtensionAPI;\nvar enableConnect;\nvar setTransitionOpt;\nvar markStatusToUpdate;\nvar applyChangedStates;\n\nvar ECharts = function (_super) {\n  __extends(ECharts, _super);\n\n  function ECharts(dom, theme, opts) {\n    var _this = _super.call(this, new ECEventProcessor()) || this;\n\n    _this._chartsViews = [];\n    _this._chartsMap = {};\n    _this._componentsViews = [];\n    _this._componentsMap = {};\n    _this._pendingActions = [];\n    opts = opts || {};\n\n    if (typeof theme === 'string') {\n      theme = themeStorage[theme];\n    }\n\n    _this._dom = dom;\n    var root = typeof window === 'undefined' ? global : window;\n    var defaultRenderer = 'canvas';\n    var defaultUseDirtyRect = false;\n\n    if (process.env.NODE_ENV !== 'production') {\n      defaultRenderer = root.__ECHARTS__DEFAULT__RENDERER__ || defaultRenderer;\n      var devUseDirtyRect = root.__ECHARTS__DEFAULT__USE_DIRTY_RECT__;\n      defaultUseDirtyRect = devUseDirtyRect == null ? defaultUseDirtyRect : devUseDirtyRect;\n    }\n\n    var zr = _this._zr = zrender.init(dom, {\n      renderer: opts.renderer || defaultRenderer,\n      devicePixelRatio: opts.devicePixelRatio,\n      width: opts.width,\n      height: opts.height,\n      useDirtyRect: opts.useDirtyRect == null ? defaultUseDirtyRect : opts.useDirtyRect\n    });\n    _this._throttledZrFlush = throttle(zrUtil.bind(zr.flush, zr), 17);\n    theme = zrUtil.clone(theme);\n    theme && backwardCompat(theme, true);\n    _this._theme = theme;\n    _this._locale = createLocaleObject(opts.locale || SYSTEM_LANG);\n    _this._coordSysMgr = new CoordinateSystemManager();\n    var api = _this._api = createExtensionAPI(_this);\n\n    function prioritySortFunc(a, b) {\n      return a.__prio - b.__prio;\n    }\n\n    timsort(visualFuncs, prioritySortFunc);\n    timsort(dataProcessorFuncs, prioritySortFunc);\n    _this._scheduler = new Scheduler(_this, api, dataProcessorFuncs, visualFuncs);\n    _this._messageCenter = new MessageCenter();\n    _this._labelManager = new LabelManager();\n\n    _this._initEvents();\n\n    _this.resize = zrUtil.bind(_this.resize, _this);\n    zr.animation.on('frame', _this._onframe, _this);\n    bindRenderedEvent(zr, _this);\n    bindMouseEvent(zr, _this);\n    zrUtil.setAsPrimitive(_this);\n    return _this;\n  }\n\n  ECharts.prototype._onframe = function () {\n    if (this._disposed) {\n      return;\n    }\n\n    applyChangedStates(this);\n    var scheduler = this._scheduler;\n\n    if (this[OPTION_UPDATED_KEY]) {\n      var silent = this[OPTION_UPDATED_KEY].silent;\n      this[IN_MAIN_PROCESS_KEY] = true;\n      prepare(this);\n      updateMethods.update.call(this);\n\n      this._zr.flush();\n\n      this[IN_MAIN_PROCESS_KEY] = false;\n      this[OPTION_UPDATED_KEY] = false;\n      flushPendingActions.call(this, silent);\n      triggerUpdatedEvent.call(this, silent);\n    } else if (scheduler.unfinished) {\n      var remainTime = TEST_FRAME_REMAIN_TIME;\n      var ecModel = this._model;\n      var api = this._api;\n      scheduler.unfinished = false;\n\n      do {\n        var startTime = +new Date();\n        scheduler.performSeriesTasks(ecModel);\n        scheduler.performDataProcessorTasks(ecModel);\n        updateStreamModes(this, ecModel);\n        scheduler.performVisualTasks(ecModel);\n        renderSeries(this, this._model, api, 'remain');\n        remainTime -= +new Date() - startTime;\n      } while (remainTime > 0 && scheduler.unfinished);\n\n      if (!scheduler.unfinished) {\n        this._zr.flush();\n      }\n    }\n  };\n\n  ECharts.prototype.getDom = function () {\n    return this._dom;\n  };\n\n  ECharts.prototype.getId = function () {\n    return this.id;\n  };\n\n  ECharts.prototype.getZr = function () {\n    return this._zr;\n  };\n\n  ECharts.prototype.setOption = function (option, notMerge, lazyUpdate) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(!this[IN_MAIN_PROCESS_KEY], '`setOption` should not be called during main process.');\n    }\n\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n\n    var silent;\n    var replaceMerge;\n    var transitionOpt;\n\n    if (isObject(notMerge)) {\n      lazyUpdate = notMerge.lazyUpdate;\n      silent = notMerge.silent;\n      replaceMerge = notMerge.replaceMerge;\n      transitionOpt = notMerge.transition;\n      notMerge = notMerge.notMerge;\n    }\n\n    this[IN_MAIN_PROCESS_KEY] = true;\n\n    if (!this._model || notMerge) {\n      var optionManager = new OptionManager(this._api);\n      var theme = this._theme;\n      var ecModel = this._model = new GlobalModel();\n      ecModel.scheduler = this._scheduler;\n      ecModel.init(null, null, null, theme, this._locale, optionManager);\n    }\n\n    this._model.setOption(option, {\n      replaceMerge: replaceMerge\n    }, optionPreprocessorFuncs);\n\n    setTransitionOpt(this, transitionOpt);\n\n    if (lazyUpdate) {\n      this[OPTION_UPDATED_KEY] = {\n        silent: silent\n      };\n      this[IN_MAIN_PROCESS_KEY] = false;\n      this.getZr().wakeUp();\n    } else {\n      prepare(this);\n      updateMethods.update.call(this);\n\n      this._zr.flush();\n\n      this[OPTION_UPDATED_KEY] = false;\n      this[IN_MAIN_PROCESS_KEY] = false;\n      flushPendingActions.call(this, silent);\n      triggerUpdatedEvent.call(this, silent);\n    }\n  };\n\n  ECharts.prototype.setTheme = function () {\n    console.error('ECharts#setTheme() is DEPRECATED in ECharts 3.0');\n  };\n\n  ECharts.prototype.getModel = function () {\n    return this._model;\n  };\n\n  ECharts.prototype.getOption = function () {\n    return this._model && this._model.getOption();\n  };\n\n  ECharts.prototype.getWidth = function () {\n    return this._zr.getWidth();\n  };\n\n  ECharts.prototype.getHeight = function () {\n    return this._zr.getHeight();\n  };\n\n  ECharts.prototype.getDevicePixelRatio = function () {\n    return this._zr.painter.dpr || window.devicePixelRatio || 1;\n  };\n\n  ECharts.prototype.getRenderedCanvas = function (opts) {\n    if (!env.canvasSupported) {\n      return;\n    }\n\n    opts = zrUtil.extend({}, opts || {});\n    opts.pixelRatio = opts.pixelRatio || 1;\n    opts.backgroundColor = opts.backgroundColor || this._model.get('backgroundColor');\n    var zr = this._zr;\n    return zr.painter.getRenderedCanvas(opts);\n  };\n\n  ECharts.prototype.getSvgDataURL = function () {\n    if (!env.svgSupported) {\n      return;\n    }\n\n    var zr = this._zr;\n    var list = zr.storage.getDisplayList();\n    zrUtil.each(list, function (el) {\n      el.stopAnimation(null, true);\n    });\n    return zr.painter.toDataURL();\n  };\n\n  ECharts.prototype.getDataURL = function (opts) {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n\n    opts = opts || {};\n    var excludeComponents = opts.excludeComponents;\n    var ecModel = this._model;\n    var excludesComponentViews = [];\n    var self = this;\n    each(excludeComponents, function (componentType) {\n      ecModel.eachComponent({\n        mainType: componentType\n      }, function (component) {\n        var view = self._componentsMap[component.__viewId];\n\n        if (!view.group.ignore) {\n          excludesComponentViews.push(view);\n          view.group.ignore = true;\n        }\n      });\n    });\n    var url = this._zr.painter.getType() === 'svg' ? this.getSvgDataURL() : this.getRenderedCanvas(opts).toDataURL('image/' + (opts && opts.type || 'png'));\n    each(excludesComponentViews, function (view) {\n      view.group.ignore = false;\n    });\n    return url;\n  };\n\n  ECharts.prototype.getConnectedDataURL = function (opts) {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n\n    if (!env.canvasSupported) {\n      return;\n    }\n\n    var isSvg = opts.type === 'svg';\n    var groupId = this.group;\n    var mathMin = Math.min;\n    var mathMax = Math.max;\n    var MAX_NUMBER = Infinity;\n\n    if (connectedGroups[groupId]) {\n      var left_1 = MAX_NUMBER;\n      var top_1 = MAX_NUMBER;\n      var right_1 = -MAX_NUMBER;\n      var bottom_1 = -MAX_NUMBER;\n      var canvasList_1 = [];\n      var dpr_1 = opts && opts.pixelRatio || 1;\n      zrUtil.each(instances, function (chart, id) {\n        if (chart.group === groupId) {\n          var canvas = isSvg ? chart.getZr().painter.getSvgDom().innerHTML : chart.getRenderedCanvas(zrUtil.clone(opts));\n          var boundingRect = chart.getDom().getBoundingClientRect();\n          left_1 = mathMin(boundingRect.left, left_1);\n          top_1 = mathMin(boundingRect.top, top_1);\n          right_1 = mathMax(boundingRect.right, right_1);\n          bottom_1 = mathMax(boundingRect.bottom, bottom_1);\n          canvasList_1.push({\n            dom: canvas,\n            left: boundingRect.left,\n            top: boundingRect.top\n          });\n        }\n      });\n      left_1 *= dpr_1;\n      top_1 *= dpr_1;\n      right_1 *= dpr_1;\n      bottom_1 *= dpr_1;\n      var width = right_1 - left_1;\n      var height = bottom_1 - top_1;\n      var targetCanvas = zrUtil.createCanvas();\n      var zr_1 = zrender.init(targetCanvas, {\n        renderer: isSvg ? 'svg' : 'canvas'\n      });\n      zr_1.resize({\n        width: width,\n        height: height\n      });\n\n      if (isSvg) {\n        var content_1 = '';\n        each(canvasList_1, function (item) {\n          var x = item.left - left_1;\n          var y = item.top - top_1;\n          content_1 += '<g transform=\"translate(' + x + ',' + y + ')\">' + item.dom + '</g>';\n        });\n        zr_1.painter.getSvgRoot().innerHTML = content_1;\n\n        if (opts.connectedBackgroundColor) {\n          zr_1.painter.setBackgroundColor(opts.connectedBackgroundColor);\n        }\n\n        zr_1.refreshImmediately();\n        return zr_1.painter.toDataURL();\n      } else {\n        if (opts.connectedBackgroundColor) {\n          zr_1.add(new graphic.Rect({\n            shape: {\n              x: 0,\n              y: 0,\n              width: width,\n              height: height\n            },\n            style: {\n              fill: opts.connectedBackgroundColor\n            }\n          }));\n        }\n\n        each(canvasList_1, function (item) {\n          var img = new graphic.Image({\n            style: {\n              x: item.left * dpr_1 - left_1,\n              y: item.top * dpr_1 - top_1,\n              image: item.dom\n            }\n          });\n          zr_1.add(img);\n        });\n        zr_1.refreshImmediately();\n        return targetCanvas.toDataURL('image/' + (opts && opts.type || 'png'));\n      }\n    } else {\n      return this.getDataURL(opts);\n    }\n  };\n\n  ECharts.prototype.convertToPixel = function (finder, value) {\n    return doConvertPixel(this, 'convertToPixel', finder, value);\n  };\n\n  ECharts.prototype.convertFromPixel = function (finder, value) {\n    return doConvertPixel(this, 'convertFromPixel', finder, value);\n  };\n\n  ECharts.prototype.containPixel = function (finder, value) {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n\n    var ecModel = this._model;\n    var result;\n    var findResult = modelUtil.parseFinder(ecModel, finder);\n    zrUtil.each(findResult, function (models, key) {\n      key.indexOf('Models') >= 0 && zrUtil.each(models, function (model) {\n        var coordSys = model.coordinateSystem;\n\n        if (coordSys && coordSys.containPoint) {\n          result = result || !!coordSys.containPoint(value);\n        } else if (key === 'seriesModels') {\n          var view = this._chartsMap[model.__viewId];\n\n          if (view && view.containPoint) {\n            result = result || view.containPoint(value, model);\n          } else {\n            if (process.env.NODE_ENV !== 'production') {\n              console.warn(key + ': ' + (view ? 'The found component do not support containPoint.' : 'No view mapping to the found component.'));\n            }\n          }\n        } else {\n          if (process.env.NODE_ENV !== 'production') {\n            console.warn(key + ': containPoint is not supported');\n          }\n        }\n      }, this);\n    }, this);\n    return !!result;\n  };\n\n  ECharts.prototype.getVisual = function (finder, visualType) {\n    var ecModel = this._model;\n    var parsedFinder = modelUtil.parseFinder(ecModel, finder, {\n      defaultMainType: 'series'\n    });\n    var seriesModel = parsedFinder.seriesModel;\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (!seriesModel) {\n        console.warn('There is no specified seires model');\n      }\n    }\n\n    var data = seriesModel.getData();\n    var dataIndexInside = parsedFinder.hasOwnProperty('dataIndexInside') ? parsedFinder.dataIndexInside : parsedFinder.hasOwnProperty('dataIndex') ? data.indexOfRawIndex(parsedFinder.dataIndex) : null;\n    return dataIndexInside != null ? getItemVisualFromData(data, dataIndexInside, visualType) : getVisualFromData(data, visualType);\n  };\n\n  ECharts.prototype.getViewOfComponentModel = function (componentModel) {\n    return this._componentsMap[componentModel.__viewId];\n  };\n\n  ECharts.prototype.getViewOfSeriesModel = function (seriesModel) {\n    return this._chartsMap[seriesModel.__viewId];\n  };\n\n  ECharts.prototype._initEvents = function () {\n    var _this = this;\n\n    each(MOUSE_EVENT_NAMES, function (eveName) {\n      var handler = function (e) {\n        var ecModel = _this.getModel();\n\n        var el = e.target;\n        var params;\n        var isGlobalOut = eveName === 'globalout';\n\n        if (isGlobalOut) {\n          params = {};\n        } else {\n          el && findEventDispatcher(el, function (parent) {\n            var ecData = getECData(parent);\n\n            if (ecData && ecData.dataIndex != null) {\n              var dataModel = ecData.dataModel || ecModel.getSeriesByIndex(ecData.seriesIndex);\n              params = dataModel && dataModel.getDataParams(ecData.dataIndex, ecData.dataType) || {};\n              return true;\n            } else if (ecData.eventData) {\n              params = zrUtil.extend({}, ecData.eventData);\n              return true;\n            }\n          }, true);\n        }\n\n        if (params) {\n          var componentType = params.componentType;\n          var componentIndex = params.componentIndex;\n\n          if (componentType === 'markLine' || componentType === 'markPoint' || componentType === 'markArea') {\n            componentType = 'series';\n            componentIndex = params.seriesIndex;\n          }\n\n          var model = componentType && componentIndex != null && ecModel.getComponent(componentType, componentIndex);\n          var view = model && _this[model.mainType === 'series' ? '_chartsMap' : '_componentsMap'][model.__viewId];\n\n          if (process.env.NODE_ENV !== 'production') {\n            if (!isGlobalOut && !(model && view)) {\n              console.warn('model or view can not be found by params');\n            }\n          }\n\n          params.event = e;\n          params.type = eveName;\n          _this._$eventProcessor.eventInfo = {\n            targetEl: el,\n            packedEvent: params,\n            model: model,\n            view: view\n          };\n\n          _this.trigger(eveName, params);\n        }\n      };\n\n      handler.zrEventfulCallAtLast = true;\n\n      _this._zr.on(eveName, handler, _this);\n    });\n    each(eventActionMap, function (actionType, eventType) {\n      _this._messageCenter.on(eventType, function (event) {\n        this.trigger(eventType, event);\n      }, _this);\n    });\n    each(['selectchanged'], function (eventType) {\n      _this._messageCenter.on(eventType, function (event) {\n        this.trigger(eventType, event);\n      }, _this);\n    });\n    handleLegacySelectEvents(this._messageCenter, this, this._model);\n  };\n\n  ECharts.prototype.isDisposed = function () {\n    return this._disposed;\n  };\n\n  ECharts.prototype.clear = function () {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n\n    this.setOption({\n      series: []\n    }, true);\n  };\n\n  ECharts.prototype.dispose = function () {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n\n    this._disposed = true;\n    modelUtil.setAttribute(this.getDom(), DOM_ATTRIBUTE_KEY, '');\n    var api = this._api;\n    var ecModel = this._model;\n    each(this._componentsViews, function (component) {\n      component.dispose(ecModel, api);\n    });\n    each(this._chartsViews, function (chart) {\n      chart.dispose(ecModel, api);\n    });\n\n    this._zr.dispose();\n\n    delete instances[this.id];\n  };\n\n  ECharts.prototype.resize = function (opts) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(!this[IN_MAIN_PROCESS_KEY], '`resize` should not be called during main process.');\n    }\n\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n\n    this._zr.resize(opts);\n\n    var ecModel = this._model;\n    this._loadingFX && this._loadingFX.resize();\n\n    if (!ecModel) {\n      return;\n    }\n\n    var optionChanged = ecModel.resetOption('media');\n    var silent = opts && opts.silent;\n    this[IN_MAIN_PROCESS_KEY] = true;\n    optionChanged && prepare(this);\n    updateMethods.update.call(this, {\n      type: 'resize',\n      animation: {\n        duration: 0\n      }\n    });\n    this[IN_MAIN_PROCESS_KEY] = false;\n    flushPendingActions.call(this, silent);\n    triggerUpdatedEvent.call(this, silent);\n  };\n\n  ECharts.prototype.showLoading = function (name, cfg) {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n\n    if (isObject(name)) {\n      cfg = name;\n      name = '';\n    }\n\n    name = name || 'default';\n    this.hideLoading();\n\n    if (!loadingEffects[name]) {\n      if (process.env.NODE_ENV !== 'production') {\n        console.warn('Loading effects ' + name + ' not exists.');\n      }\n\n      return;\n    }\n\n    var el = loadingEffects[name](this._api, cfg);\n    var zr = this._zr;\n    this._loadingFX = el;\n    zr.add(el);\n  };\n\n  ECharts.prototype.hideLoading = function () {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n\n    this._loadingFX && this._zr.remove(this._loadingFX);\n    this._loadingFX = null;\n  };\n\n  ECharts.prototype.makeActionFromEvent = function (eventObj) {\n    var payload = zrUtil.extend({}, eventObj);\n    payload.type = eventActionMap[eventObj.type];\n    return payload;\n  };\n\n  ECharts.prototype.dispatchAction = function (payload, opt) {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n\n    if (!isObject(opt)) {\n      opt = {\n        silent: !!opt\n      };\n    }\n\n    if (!actions[payload.type]) {\n      return;\n    }\n\n    if (!this._model) {\n      return;\n    }\n\n    if (this[IN_MAIN_PROCESS_KEY]) {\n      this._pendingActions.push(payload);\n\n      return;\n    }\n\n    var silent = opt.silent;\n    doDispatchAction.call(this, payload, silent);\n    var flush = opt.flush;\n\n    if (flush) {\n      this._zr.flush();\n    } else if (flush !== false && env.browser.weChat) {\n      this._throttledZrFlush();\n    }\n\n    flushPendingActions.call(this, silent);\n    triggerUpdatedEvent.call(this, silent);\n  };\n\n  ECharts.prototype.updateLabelLayout = function () {\n    var labelManager = this._labelManager;\n    labelManager.updateLayoutConfig(this._api);\n    labelManager.layout(this._api);\n    labelManager.processLabelsOverall();\n  };\n\n  ECharts.prototype.appendData = function (params) {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n\n    var seriesIndex = params.seriesIndex;\n    var ecModel = this.getModel();\n    var seriesModel = ecModel.getSeriesByIndex(seriesIndex);\n\n    if (process.env.NODE_ENV !== 'production') {\n      assert(params.data && seriesModel);\n    }\n\n    seriesModel.appendData(params);\n    this._scheduler.unfinished = true;\n    this.getZr().wakeUp();\n  };\n\n  ECharts.internalField = function () {\n    prepare = function (ecIns) {\n      var scheduler = ecIns._scheduler;\n      scheduler.restorePipelines(ecIns._model);\n      scheduler.prepareStageTasks();\n      prepareView(ecIns, true);\n      prepareView(ecIns, false);\n      scheduler.plan();\n    };\n\n    prepareView = function (ecIns, isComponent) {\n      var ecModel = ecIns._model;\n      var scheduler = ecIns._scheduler;\n      var viewList = isComponent ? ecIns._componentsViews : ecIns._chartsViews;\n      var viewMap = isComponent ? ecIns._componentsMap : ecIns._chartsMap;\n      var zr = ecIns._zr;\n      var api = ecIns._api;\n\n      for (var i = 0; i < viewList.length; i++) {\n        viewList[i].__alive = false;\n      }\n\n      isComponent ? ecModel.eachComponent(function (componentType, model) {\n        componentType !== 'series' && doPrepare(model);\n      }) : ecModel.eachSeries(doPrepare);\n\n      function doPrepare(model) {\n        var requireNewView = model.__requireNewView;\n        model.__requireNewView = false;\n        var viewId = '_ec_' + model.id + '_' + model.type;\n        var view = !requireNewView && viewMap[viewId];\n\n        if (!view) {\n          var classType = parseClassType(model.type);\n          var Clazz = isComponent ? ComponentView.getClass(classType.main, classType.sub) : ChartView.getClass(classType.sub);\n\n          if (process.env.NODE_ENV !== 'production') {\n            assert(Clazz, classType.sub + ' does not exist.');\n          }\n\n          view = new Clazz();\n          view.init(ecModel, api);\n          viewMap[viewId] = view;\n          viewList.push(view);\n          zr.add(view.group);\n        }\n\n        model.__viewId = view.__id = viewId;\n        view.__alive = true;\n        view.__model = model;\n        view.group.__ecComponentInfo = {\n          mainType: model.mainType,\n          index: model.componentIndex\n        };\n        !isComponent && scheduler.prepareView(view, model, ecModel, api);\n      }\n\n      for (var i = 0; i < viewList.length;) {\n        var view = viewList[i];\n\n        if (!view.__alive) {\n          !isComponent && view.renderTask.dispose();\n          zr.remove(view.group);\n          view.dispose(ecModel, api);\n          viewList.splice(i, 1);\n\n          if (viewMap[view.__id] === view) {\n            delete viewMap[view.__id];\n          }\n\n          view.__id = view.group.__ecComponentInfo = null;\n        } else {\n          i++;\n        }\n      }\n    };\n\n    updateDirectly = function (ecIns, method, payload, mainType, subType) {\n      var ecModel = ecIns._model;\n      ecModel.setUpdatePayload(payload);\n\n      if (!mainType) {\n        each([].concat(ecIns._componentsViews).concat(ecIns._chartsViews), callView);\n        return;\n      }\n\n      var query = {};\n      query[mainType + 'Id'] = payload[mainType + 'Id'];\n      query[mainType + 'Index'] = payload[mainType + 'Index'];\n      query[mainType + 'Name'] = payload[mainType + 'Name'];\n      var condition = {\n        mainType: mainType,\n        query: query\n      };\n      subType && (condition.subType = subType);\n      var excludeSeriesId = payload.excludeSeriesId;\n      var excludeSeriesIdMap;\n\n      if (excludeSeriesId != null) {\n        excludeSeriesIdMap = zrUtil.createHashMap();\n        each(modelUtil.normalizeToArray(excludeSeriesId), function (id) {\n          var modelId = modelUtil.convertOptionIdName(id, null);\n\n          if (modelId != null) {\n            excludeSeriesIdMap.set(modelId, true);\n          }\n        });\n      }\n\n      ecModel && ecModel.eachComponent(condition, function (model) {\n        if (!excludeSeriesIdMap || excludeSeriesIdMap.get(model.id) == null) {\n          if (isHighDownPayload(payload) && !payload.notBlur) {\n            if (model instanceof SeriesModel) {\n              toggleSeriesBlurStateFromPayload(model, payload, ecIns._api);\n            }\n          } else if (isSelectChangePayload(payload)) {\n            if (model instanceof SeriesModel) {\n              toggleSelectionFromPayload(model, payload, ecIns._api);\n              updateSeriesElementSelection(model);\n              markStatusToUpdate(ecIns);\n            }\n          }\n\n          callView(ecIns[mainType === 'series' ? '_chartsMap' : '_componentsMap'][model.__viewId]);\n        }\n      }, ecIns);\n\n      function callView(view) {\n        view && view.__alive && view[method] && view[method](view.__model, ecModel, ecIns._api, payload);\n      }\n    };\n\n    updateMethods = {\n      prepareAndUpdate: function (payload) {\n        prepare(this);\n        updateMethods.update.call(this, payload);\n      },\n      update: function (payload) {\n        var ecModel = this._model;\n        var api = this._api;\n        var zr = this._zr;\n        var coordSysMgr = this._coordSysMgr;\n        var scheduler = this._scheduler;\n\n        if (!ecModel) {\n          return;\n        }\n\n        ecModel.setUpdatePayload(payload);\n        scheduler.restoreData(ecModel, payload);\n        scheduler.performSeriesTasks(ecModel);\n        coordSysMgr.create(ecModel, api);\n        scheduler.performDataProcessorTasks(ecModel, payload);\n        updateStreamModes(this, ecModel);\n        coordSysMgr.update(ecModel, api);\n        clearColorPalette(ecModel);\n        scheduler.performVisualTasks(ecModel, payload);\n        render(this, ecModel, api, payload);\n        var backgroundColor = ecModel.get('backgroundColor') || 'transparent';\n        var darkMode = ecModel.get('darkMode');\n\n        if (!env.canvasSupported) {\n          var colorArr = colorTool.parse(backgroundColor);\n          backgroundColor = colorTool.stringify(colorArr, 'rgb');\n\n          if (colorArr[3] === 0) {\n            backgroundColor = 'transparent';\n          }\n        } else {\n          zr.setBackgroundColor(backgroundColor);\n\n          if (darkMode != null && darkMode !== 'auto') {\n            zr.setDarkMode(darkMode);\n          }\n        }\n\n        performPostUpdateFuncs(ecModel, api);\n      },\n      updateTransform: function (payload) {\n        var _this = this;\n\n        var ecModel = this._model;\n        var api = this._api;\n\n        if (!ecModel) {\n          return;\n        }\n\n        ecModel.setUpdatePayload(payload);\n        var componentDirtyList = [];\n        ecModel.eachComponent(function (componentType, componentModel) {\n          if (componentType === 'series') {\n            return;\n          }\n\n          var componentView = _this.getViewOfComponentModel(componentModel);\n\n          if (componentView && componentView.__alive) {\n            if (componentView.updateTransform) {\n              var result = componentView.updateTransform(componentModel, ecModel, api, payload);\n              result && result.update && componentDirtyList.push(componentView);\n            } else {\n              componentDirtyList.push(componentView);\n            }\n          }\n        });\n        var seriesDirtyMap = zrUtil.createHashMap();\n        ecModel.eachSeries(function (seriesModel) {\n          var chartView = _this._chartsMap[seriesModel.__viewId];\n\n          if (chartView.updateTransform) {\n            var result = chartView.updateTransform(seriesModel, ecModel, api, payload);\n            result && result.update && seriesDirtyMap.set(seriesModel.uid, 1);\n          } else {\n            seriesDirtyMap.set(seriesModel.uid, 1);\n          }\n        });\n        clearColorPalette(ecModel);\n\n        this._scheduler.performVisualTasks(ecModel, payload, {\n          setDirty: true,\n          dirtyMap: seriesDirtyMap\n        });\n\n        renderSeries(this, ecModel, api, payload, seriesDirtyMap);\n        performPostUpdateFuncs(ecModel, this._api);\n      },\n      updateView: function (payload) {\n        var ecModel = this._model;\n\n        if (!ecModel) {\n          return;\n        }\n\n        ecModel.setUpdatePayload(payload);\n        ChartView.markUpdateMethod(payload, 'updateView');\n        clearColorPalette(ecModel);\n\n        this._scheduler.performVisualTasks(ecModel, payload, {\n          setDirty: true\n        });\n\n        render(this, this._model, this._api, payload);\n        performPostUpdateFuncs(ecModel, this._api);\n      },\n      updateVisual: function (payload) {\n        var _this = this;\n\n        var ecModel = this._model;\n\n        if (!ecModel) {\n          return;\n        }\n\n        ecModel.setUpdatePayload(payload);\n        ecModel.eachSeries(function (seriesModel) {\n          seriesModel.getData().clearAllVisual();\n        });\n        ChartView.markUpdateMethod(payload, 'updateVisual');\n        clearColorPalette(ecModel);\n\n        this._scheduler.performVisualTasks(ecModel, payload, {\n          visualType: 'visual',\n          setDirty: true\n        });\n\n        ecModel.eachComponent(function (componentType, componentModel) {\n          if (componentType !== 'series') {\n            var componentView = _this.getViewOfComponentModel(componentModel);\n\n            componentView && componentView.__alive && componentView.updateVisual(componentModel, ecModel, _this._api, payload);\n          }\n        });\n        ecModel.eachSeries(function (seriesModel) {\n          var chartView = _this._chartsMap[seriesModel.__viewId];\n          chartView.updateVisual(seriesModel, ecModel, _this._api, payload);\n        });\n        performPostUpdateFuncs(ecModel, this._api);\n      },\n      updateLayout: function (payload) {\n        updateMethods.update.call(this, payload);\n      }\n    };\n\n    doConvertPixel = function (ecIns, methodName, finder, value) {\n      if (ecIns._disposed) {\n        disposedWarning(ecIns.id);\n        return;\n      }\n\n      var ecModel = ecIns._model;\n\n      var coordSysList = ecIns._coordSysMgr.getCoordinateSystems();\n\n      var result;\n      var parsedFinder = modelUtil.parseFinder(ecModel, finder);\n\n      for (var i = 0; i < coordSysList.length; i++) {\n        var coordSys = coordSysList[i];\n\n        if (coordSys[methodName] && (result = coordSys[methodName](ecModel, parsedFinder, value)) != null) {\n          return result;\n        }\n      }\n\n      if (process.env.NODE_ENV !== 'production') {\n        console.warn('No coordinate system that supports ' + methodName + ' found by the given finder.');\n      }\n    };\n\n    updateStreamModes = function (ecIns, ecModel) {\n      var chartsMap = ecIns._chartsMap;\n      var scheduler = ecIns._scheduler;\n      ecModel.eachSeries(function (seriesModel) {\n        scheduler.updateStreamModes(seriesModel, chartsMap[seriesModel.__viewId]);\n      });\n    };\n\n    doDispatchAction = function (payload, silent) {\n      var _this = this;\n\n      var ecModel = this.getModel();\n      var payloadType = payload.type;\n      var escapeConnect = payload.escapeConnect;\n      var actionWrap = actions[payloadType];\n      var actionInfo = actionWrap.actionInfo;\n      var cptTypeTmp = (actionInfo.update || 'update').split(':');\n      var updateMethod = cptTypeTmp.pop();\n      var cptType = cptTypeTmp[0] != null && parseClassType(cptTypeTmp[0]);\n      this[IN_MAIN_PROCESS_KEY] = true;\n      var payloads = [payload];\n      var batched = false;\n\n      if (payload.batch) {\n        batched = true;\n        payloads = zrUtil.map(payload.batch, function (item) {\n          item = zrUtil.defaults(zrUtil.extend({}, item), payload);\n          item.batch = null;\n          return item;\n        });\n      }\n\n      var eventObjBatch = [];\n      var eventObj;\n      var isSelectChange = isSelectChangePayload(payload);\n      var isStatusChange = isHighDownPayload(payload) || isSelectChange;\n      each(payloads, function (batchItem) {\n        eventObj = actionWrap.action(batchItem, _this._model, _this._api);\n        eventObj = eventObj || zrUtil.extend({}, batchItem);\n        eventObj.type = actionInfo.event || eventObj.type;\n        eventObjBatch.push(eventObj);\n\n        if (isStatusChange) {\n          updateDirectly(_this, updateMethod, batchItem, 'series');\n          markStatusToUpdate(_this);\n        } else if (cptType) {\n          updateDirectly(_this, updateMethod, batchItem, cptType.main, cptType.sub);\n        }\n      });\n\n      if (updateMethod !== 'none' && !isStatusChange && !cptType) {\n        if (this[OPTION_UPDATED_KEY]) {\n          prepare(this);\n          updateMethods.update.call(this, payload);\n          this[OPTION_UPDATED_KEY] = false;\n        } else {\n          updateMethods[updateMethod].call(this, payload);\n        }\n      }\n\n      if (batched) {\n        eventObj = {\n          type: actionInfo.event || payloadType,\n          escapeConnect: escapeConnect,\n          batch: eventObjBatch\n        };\n      } else {\n        eventObj = eventObjBatch[0];\n      }\n\n      this[IN_MAIN_PROCESS_KEY] = false;\n\n      if (!silent) {\n        var messageCenter = this._messageCenter;\n        messageCenter.trigger(eventObj.type, eventObj);\n\n        if (isSelectChange) {\n          var newObj = {\n            type: 'selectchanged',\n            escapeConnect: escapeConnect,\n            selected: getAllSelectedIndices(ecModel),\n            isFromClick: payload.isFromClick || false,\n            fromAction: payload.type,\n            fromActionPayload: payload\n          };\n          messageCenter.trigger(newObj.type, newObj);\n        }\n      }\n    };\n\n    flushPendingActions = function (silent) {\n      var pendingActions = this._pendingActions;\n\n      while (pendingActions.length) {\n        var payload = pendingActions.shift();\n        doDispatchAction.call(this, payload, silent);\n      }\n    };\n\n    triggerUpdatedEvent = function (silent) {\n      !silent && this.trigger('updated');\n    };\n\n    bindRenderedEvent = function (zr, ecIns) {\n      zr.on('rendered', function (params) {\n        ecIns.trigger('rendered', params);\n\n        if (zr.animation.isFinished() && !ecIns[OPTION_UPDATED_KEY] && !ecIns._scheduler.unfinished && !ecIns._pendingActions.length) {\n          ecIns.trigger('finished');\n        }\n      });\n    };\n\n    bindMouseEvent = function (zr, ecIns) {\n      zr.on('mouseover', function (e) {\n        var el = e.target;\n        var dispatcher = findEventDispatcher(el, isHighDownDispatcher);\n\n        if (dispatcher) {\n          var ecData = getECData(dispatcher);\n          toggleSeriesBlurState(ecData.seriesIndex, ecData.focus, ecData.blurScope, ecIns._api, true);\n          enterEmphasisWhenMouseOver(dispatcher, e);\n          markStatusToUpdate(ecIns);\n        }\n      }).on('mouseout', function (e) {\n        var el = e.target;\n        var dispatcher = findEventDispatcher(el, isHighDownDispatcher);\n\n        if (dispatcher) {\n          var ecData = getECData(dispatcher);\n          toggleSeriesBlurState(ecData.seriesIndex, ecData.focus, ecData.blurScope, ecIns._api, false);\n          leaveEmphasisWhenMouseOut(dispatcher, e);\n          markStatusToUpdate(ecIns);\n        }\n      }).on('click', function (e) {\n        var el = e.target;\n        var dispatcher = findEventDispatcher(el, function (target) {\n          return getECData(target).dataIndex != null;\n        }, true);\n\n        if (dispatcher) {\n          var actionType = dispatcher.selected ? 'unselect' : 'select';\n          var ecData = getECData(dispatcher);\n\n          ecIns._api.dispatchAction({\n            type: actionType,\n            dataType: ecData.dataType,\n            dataIndexInside: ecData.dataIndex,\n            seriesIndex: ecData.seriesIndex,\n            isFromClick: true\n          });\n        }\n      });\n    };\n\n    clearColorPalette = function (ecModel) {\n      ecModel.clearColorPalette();\n      ecModel.eachSeries(function (seriesModel) {\n        seriesModel.clearColorPalette();\n      });\n    };\n\n    render = function (ecIns, ecModel, api, payload) {\n      renderComponents(ecIns, ecModel, api, payload);\n      each(ecIns._chartsViews, function (chart) {\n        chart.__alive = false;\n      });\n      renderSeries(ecIns, ecModel, api, payload);\n      each(ecIns._chartsViews, function (chart) {\n        if (!chart.__alive) {\n          chart.remove(ecModel, api);\n        }\n      });\n    };\n\n    renderComponents = function (ecIns, ecModel, api, payload, dirtyList) {\n      each(dirtyList || ecIns._componentsViews, function (componentView) {\n        var componentModel = componentView.__model;\n        clearStates(componentModel, componentView);\n        componentView.render(componentModel, ecModel, api, payload);\n        updateZ(componentModel, componentView);\n        updateStates(componentModel, componentView);\n      });\n    };\n\n    renderSeries = function (ecIns, ecModel, api, payload, dirtyMap) {\n      var scheduler = ecIns._scheduler;\n      var labelManager = ecIns._labelManager;\n      labelManager.clearLabels();\n      var unfinished = false;\n      ecModel.eachSeries(function (seriesModel) {\n        var chartView = ecIns._chartsMap[seriesModel.__viewId];\n        chartView.__alive = true;\n        var renderTask = chartView.renderTask;\n        scheduler.updatePayload(renderTask, payload);\n        clearStates(seriesModel, chartView);\n\n        if (dirtyMap && dirtyMap.get(seriesModel.uid)) {\n          renderTask.dirty();\n        }\n\n        if (renderTask.perform(scheduler.getPerformArgs(renderTask))) {\n          unfinished = true;\n        }\n\n        seriesModel.__transientTransitionOpt = null;\n        chartView.group.silent = !!seriesModel.get('silent');\n        updateBlend(seriesModel, chartView);\n        updateSeriesElementSelection(seriesModel);\n        labelManager.addLabelsOfSeries(chartView);\n      });\n      scheduler.unfinished = unfinished || scheduler.unfinished;\n      labelManager.updateLayoutConfig(api);\n      labelManager.layout(api);\n      labelManager.processLabelsOverall();\n      ecModel.eachSeries(function (seriesModel) {\n        var chartView = ecIns._chartsMap[seriesModel.__viewId];\n        updateZ(seriesModel, chartView);\n        updateStates(seriesModel, chartView);\n      });\n      updateHoverLayerStatus(ecIns, ecModel);\n    };\n\n    performPostUpdateFuncs = function (ecModel, api) {\n      each(postUpdateFuncs, function (func) {\n        func(ecModel, api);\n      });\n    };\n\n    markStatusToUpdate = function (ecIns) {\n      ecIns[STATUS_NEEDS_UPDATE_KEY] = true;\n      ecIns.getZr().wakeUp();\n    };\n\n    applyChangedStates = function (ecIns) {\n      if (!ecIns[STATUS_NEEDS_UPDATE_KEY]) {\n        return;\n      }\n\n      ecIns.getZr().storage.traverse(function (el) {\n        if (graphic.isElementRemoved(el)) {\n          return;\n        }\n\n        applyElementStates(el);\n      });\n      ecIns[STATUS_NEEDS_UPDATE_KEY] = false;\n    };\n\n    function applyElementStates(el) {\n      var newStates = [];\n      var oldStates = el.currentStates;\n\n      for (var i = 0; i < oldStates.length; i++) {\n        var stateName = oldStates[i];\n\n        if (!(stateName === 'emphasis' || stateName === 'blur' || stateName === 'select')) {\n          newStates.push(stateName);\n        }\n      }\n\n      if (el.selected && el.states.select) {\n        newStates.push('select');\n      }\n\n      if (el.hoverState === HOVER_STATE_EMPHASIS && el.states.emphasis) {\n        newStates.push('emphasis');\n      } else if (el.hoverState === HOVER_STATE_BLUR && el.states.blur) {\n        newStates.push('blur');\n      }\n\n      el.useStates(newStates);\n    }\n\n    function updateHoverLayerStatus(ecIns, ecModel) {\n      var zr = ecIns._zr;\n      var storage = zr.storage;\n      var elCount = 0;\n      storage.traverse(function (el) {\n        if (!el.isGroup) {\n          elCount++;\n        }\n      });\n\n      if (elCount > ecModel.get('hoverLayerThreshold') && !env.node && !env.worker) {\n        ecModel.eachSeries(function (seriesModel) {\n          if (seriesModel.preventUsingHoverLayer) {\n            return;\n          }\n\n          var chartView = ecIns._chartsMap[seriesModel.__viewId];\n\n          if (chartView.__alive) {\n            chartView.group.traverse(function (el) {\n              if (el.states.emphasis) {\n                el.states.emphasis.hoverLayer = true;\n              }\n            });\n          }\n        });\n      }\n    }\n\n    ;\n\n    function updateBlend(seriesModel, chartView) {\n      var blendMode = seriesModel.get('blendMode') || null;\n\n      if (process.env.NODE_ENV !== 'production') {\n        if (!env.canvasSupported && blendMode && blendMode !== 'source-over') {\n          console.warn('Only canvas support blendMode');\n        }\n      }\n\n      chartView.group.traverse(function (el) {\n        if (!el.isGroup) {\n          el.style.blend = blendMode;\n        }\n\n        if (el.eachPendingDisplayable) {\n          el.eachPendingDisplayable(function (displayable) {\n            displayable.style.blend = blendMode;\n          });\n        }\n      });\n    }\n\n    ;\n\n    function updateZ(model, view) {\n      if (model.preventAutoZ) {\n        return;\n      }\n\n      var z = model.get('z');\n      var zlevel = model.get('zlevel');\n      view.group.traverse(function (el) {\n        if (!el.isGroup) {\n          z != null && (el.z = z);\n          zlevel != null && (el.zlevel = zlevel);\n          var label = el.getTextContent();\n          var labelLine = el.getTextGuideLine();\n\n          if (label) {\n            label.z = el.z;\n            label.zlevel = el.zlevel;\n            label.z2 = el.z2 + 2;\n          }\n\n          if (labelLine) {\n            var showAbove = el.textGuideLineConfig && el.textGuideLineConfig.showAbove;\n            labelLine.z = el.z;\n            labelLine.zlevel = el.zlevel;\n            labelLine.z2 = el.z2 + (showAbove ? 1 : -1);\n          }\n        }\n      });\n    }\n\n    ;\n\n    function clearStates(model, view) {\n      view.group.traverse(function (el) {\n        if (graphic.isElementRemoved(el)) {\n          return;\n        }\n\n        var textContent = el.getTextContent();\n        var textGuide = el.getTextGuideLine();\n\n        if (el.stateTransition) {\n          el.stateTransition = null;\n        }\n\n        if (textContent && textContent.stateTransition) {\n          textContent.stateTransition = null;\n        }\n\n        if (textGuide && textGuide.stateTransition) {\n          textGuide.stateTransition = null;\n        }\n\n        if (el.hasState()) {\n          el.prevStates = el.currentStates;\n          el.clearStates();\n        } else if (el.prevStates) {\n          el.prevStates = null;\n        }\n      });\n    }\n\n    function updateStates(model, view) {\n      var stateAnimationModel = model.getModel('stateAnimation');\n      var enableAnimation = model.isAnimationEnabled();\n      var duration = stateAnimationModel.get('duration');\n      var stateTransition = duration > 0 ? {\n        duration: duration,\n        delay: stateAnimationModel.get('delay'),\n        easing: stateAnimationModel.get('easing')\n      } : null;\n      view.group.traverse(function (el) {\n        if (el.states && el.states.emphasis) {\n          if (graphic.isElementRemoved(el)) {\n            return;\n          }\n\n          if (el instanceof graphic.Path) {\n            savePathStates(el);\n          }\n\n          if (el.__dirty) {\n            var prevStates = el.prevStates;\n\n            if (prevStates) {\n              el.useStates(prevStates);\n            }\n          }\n\n          if (enableAnimation) {\n            el.stateTransition = stateTransition;\n            var textContent = el.getTextContent();\n            var textGuide = el.getTextGuideLine();\n\n            if (textContent) {\n              textContent.stateTransition = stateTransition;\n            }\n\n            if (textGuide) {\n              textGuide.stateTransition = stateTransition;\n            }\n          }\n\n          if (el.__dirty) {\n            applyElementStates(el);\n          }\n        }\n      });\n    }\n\n    ;\n\n    createExtensionAPI = function (ecIns) {\n      return new (function (_super) {\n        __extends(class_1, _super);\n\n        function class_1() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        class_1.prototype.getCoordinateSystems = function () {\n          return ecIns._coordSysMgr.getCoordinateSystems();\n        };\n\n        class_1.prototype.getComponentByElement = function (el) {\n          while (el) {\n            var modelInfo = el.__ecComponentInfo;\n\n            if (modelInfo != null) {\n              return ecIns._model.getComponent(modelInfo.mainType, modelInfo.index);\n            }\n\n            el = el.parent;\n          }\n        };\n\n        class_1.prototype.enterEmphasis = function (el, highlightDigit) {\n          enterEmphasis(el, highlightDigit);\n          markStatusToUpdate(ecIns);\n        };\n\n        class_1.prototype.leaveEmphasis = function (el, highlightDigit) {\n          leaveEmphasis(el, highlightDigit);\n          markStatusToUpdate(ecIns);\n        };\n\n        class_1.prototype.enterBlur = function (el) {\n          enterBlur(el);\n          markStatusToUpdate(ecIns);\n        };\n\n        class_1.prototype.leaveBlur = function (el) {\n          leaveBlur(el);\n          markStatusToUpdate(ecIns);\n        };\n\n        class_1.prototype.enterSelect = function (el) {\n          enterSelect(el);\n          markStatusToUpdate(ecIns);\n        };\n\n        class_1.prototype.leaveSelect = function (el) {\n          leaveSelect(el);\n          markStatusToUpdate(ecIns);\n        };\n\n        class_1.prototype.getModel = function () {\n          return ecIns.getModel();\n        };\n\n        class_1.prototype.getViewOfComponentModel = function (componentModel) {\n          return ecIns.getViewOfComponentModel(componentModel);\n        };\n\n        class_1.prototype.getViewOfSeriesModel = function (seriesModel) {\n          return ecIns.getViewOfSeriesModel(seriesModel);\n        };\n\n        return class_1;\n      }(ExtensionAPI))(ecIns);\n    };\n\n    enableConnect = function (chart) {\n      function updateConnectedChartsStatus(charts, status) {\n        for (var i = 0; i < charts.length; i++) {\n          var otherChart = charts[i];\n          otherChart[CONNECT_STATUS_KEY] = status;\n        }\n      }\n\n      each(eventActionMap, function (actionType, eventType) {\n        chart._messageCenter.on(eventType, function (event) {\n          if (connectedGroups[chart.group] && chart[CONNECT_STATUS_KEY] !== CONNECT_STATUS_PENDING) {\n            if (event && event.escapeConnect) {\n              return;\n            }\n\n            var action_1 = chart.makeActionFromEvent(event);\n            var otherCharts_1 = [];\n            each(instances, function (otherChart) {\n              if (otherChart !== chart && otherChart.group === chart.group) {\n                otherCharts_1.push(otherChart);\n              }\n            });\n            updateConnectedChartsStatus(otherCharts_1, CONNECT_STATUS_PENDING);\n            each(otherCharts_1, function (otherChart) {\n              if (otherChart[CONNECT_STATUS_KEY] !== CONNECT_STATUS_UPDATING) {\n                otherChart.dispatchAction(action_1);\n              }\n            });\n            updateConnectedChartsStatus(otherCharts_1, CONNECT_STATUS_UPDATED);\n          }\n        });\n      });\n    };\n\n    setTransitionOpt = function (chart, transitionOpt) {\n      var ecModel = chart._model;\n      zrUtil.each(modelUtil.normalizeToArray(transitionOpt), function (transOpt) {\n        var errMsg;\n        var fromOpt = transOpt.from;\n        var toOpt = transOpt.to;\n\n        if (toOpt == null) {\n          if (process.env.NODE_ENV !== 'production') {\n            errMsg = '`transition.to` must be specified.';\n          }\n\n          throwError(errMsg);\n        }\n\n        var finderOpt = {\n          includeMainTypes: ['series'],\n          enableAll: false,\n          enableNone: false\n        };\n        var fromResult = fromOpt ? modelUtil.parseFinder(ecModel, fromOpt, finderOpt) : null;\n        var toResult = modelUtil.parseFinder(ecModel, toOpt, finderOpt);\n        var toSeries = toResult.seriesModel;\n\n        if (toSeries == null) {\n          errMsg = '';\n\n          if (process.env.NODE_ENV !== 'production') {\n            errMsg = '`transition` is only supported on series.';\n          }\n        }\n\n        if (fromResult && fromResult.seriesModel !== toSeries) {\n          errMsg = '';\n\n          if (process.env.NODE_ENV !== 'production') {\n            errMsg = '`transition.from` and `transition.to` must be specified to the same series.';\n          }\n        }\n\n        if (errMsg != null) {\n          throwError(errMsg);\n        }\n\n        toSeries.__transientTransitionOpt = {\n          from: fromOpt ? fromOpt.dimension : null,\n          to: toOpt.dimension,\n          dividingMethod: transOpt.dividingMethod\n        };\n      });\n    };\n  }();\n\n  return ECharts;\n}(Eventful);\n\nvar echartsProto = ECharts.prototype;\nechartsProto.on = createRegisterEventWithLowercaseECharts('on');\nechartsProto.off = createRegisterEventWithLowercaseECharts('off');\n\nechartsProto.one = function (eventName, cb, ctx) {\n  var self = this;\n  deprecateLog('ECharts#one is deprecated.');\n\n  function wrapped() {\n    var args2 = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args2[_i] = arguments[_i];\n    }\n\n    cb && cb.apply && cb.apply(this, args2);\n    self.off(eventName, wrapped);\n  }\n\n  ;\n  this.on.call(this, eventName, wrapped, ctx);\n};\n\nvar MOUSE_EVENT_NAMES = ['click', 'dblclick', 'mouseover', 'mouseout', 'mousemove', 'mousedown', 'mouseup', 'globalout', 'contextmenu'];\n\nfunction disposedWarning(id) {\n  if (process.env.NODE_ENV !== 'production') {\n    console.warn('Instance ' + id + ' has been disposed');\n  }\n}\n\nvar actions = {};\nvar eventActionMap = {};\nvar dataProcessorFuncs = [];\nvar optionPreprocessorFuncs = [];\nvar postInitFuncs = [];\nvar postUpdateFuncs = [];\nvar visualFuncs = [];\nvar themeStorage = {};\nvar loadingEffects = {};\nvar instances = {};\nvar connectedGroups = {};\nvar idBase = +new Date() - 0;\nvar groupIdBase = +new Date() - 0;\nvar DOM_ATTRIBUTE_KEY = '_echarts_instance_';\nexport function init(dom, theme, opts) {\n  if (process.env.NODE_ENV !== 'production') {\n    if (!dom) {\n      throw new Error('Initialize failed: invalid dom.');\n    }\n  }\n\n  var existInstance = getInstanceByDom(dom);\n\n  if (existInstance) {\n    if (process.env.NODE_ENV !== 'production') {\n      console.warn('There is a chart instance already initialized on the dom.');\n    }\n\n    return existInstance;\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (zrUtil.isDom(dom) && dom.nodeName.toUpperCase() !== 'CANVAS' && (!dom.clientWidth && (!opts || opts.width == null) || !dom.clientHeight && (!opts || opts.height == null))) {\n      console.warn('Can\\'t get DOM width or height. Please check ' + 'dom.clientWidth and dom.clientHeight. They should not be 0.' + 'For example, you may need to call this in the callback ' + 'of window.onload.');\n    }\n  }\n\n  var chart = new ECharts(dom, theme, opts);\n  chart.id = 'ec_' + idBase++;\n  instances[chart.id] = chart;\n  modelUtil.setAttribute(dom, DOM_ATTRIBUTE_KEY, chart.id);\n  enableConnect(chart);\n  each(postInitFuncs, function (postInitFunc) {\n    postInitFunc(chart);\n  });\n  return chart;\n}\nexport function connect(groupId) {\n  if (zrUtil.isArray(groupId)) {\n    var charts = groupId;\n    groupId = null;\n    each(charts, function (chart) {\n      if (chart.group != null) {\n        groupId = chart.group;\n      }\n    });\n    groupId = groupId || 'g_' + groupIdBase++;\n    each(charts, function (chart) {\n      chart.group = groupId;\n    });\n  }\n\n  connectedGroups[groupId] = true;\n  return groupId;\n}\nexport function disConnect(groupId) {\n  connectedGroups[groupId] = false;\n}\nexport var disconnect = disConnect;\nexport function dispose(chart) {\n  if (typeof chart === 'string') {\n    chart = instances[chart];\n  } else if (!(chart instanceof ECharts)) {\n    chart = getInstanceByDom(chart);\n  }\n\n  if (chart instanceof ECharts && !chart.isDisposed()) {\n    chart.dispose();\n  }\n}\nexport function getInstanceByDom(dom) {\n  return instances[modelUtil.getAttribute(dom, DOM_ATTRIBUTE_KEY)];\n}\nexport function getInstanceById(key) {\n  return instances[key];\n}\nexport function registerTheme(name, theme) {\n  themeStorage[name] = theme;\n}\nexport function registerPreprocessor(preprocessorFunc) {\n  optionPreprocessorFuncs.push(preprocessorFunc);\n}\nexport function registerProcessor(priority, processor) {\n  normalizeRegister(dataProcessorFuncs, priority, processor, PRIORITY_PROCESSOR_DEFAULT);\n}\nexport function registerPostInit(postInitFunc) {\n  postInitFunc && postInitFuncs.push(postInitFunc);\n}\nexport function registerPostUpdate(postUpdateFunc) {\n  postUpdateFunc && postUpdateFuncs.push(postUpdateFunc);\n}\nexport function registerAction(actionInfo, eventName, action) {\n  if (typeof eventName === 'function') {\n    action = eventName;\n    eventName = '';\n  }\n\n  var actionType = isObject(actionInfo) ? actionInfo.type : [actionInfo, actionInfo = {\n    event: eventName\n  }][0];\n  actionInfo.event = (actionInfo.event || actionType).toLowerCase();\n  eventName = actionInfo.event;\n  assert(ACTION_REG.test(actionType) && ACTION_REG.test(eventName));\n\n  if (!actions[actionType]) {\n    actions[actionType] = {\n      action: action,\n      actionInfo: actionInfo\n    };\n  }\n\n  eventActionMap[eventName] = actionType;\n}\nexport function registerCoordinateSystem(type, coordSysCreator) {\n  CoordinateSystemManager.register(type, coordSysCreator);\n}\nexport function getCoordinateSystemDimensions(type) {\n  var coordSysCreator = CoordinateSystemManager.get(type);\n\n  if (coordSysCreator) {\n    return coordSysCreator.getDimensionsInfo ? coordSysCreator.getDimensionsInfo() : coordSysCreator.dimensions.slice();\n  }\n}\nexport { registerLocale } from './locale';\n\nfunction registerLayout(priority, layoutTask) {\n  normalizeRegister(visualFuncs, priority, layoutTask, PRIORITY_VISUAL_LAYOUT, 'layout');\n}\n\nfunction registerVisual(priority, visualTask) {\n  normalizeRegister(visualFuncs, priority, visualTask, PRIORITY_VISUAL_CHART, 'visual');\n}\n\nexport { registerLayout, registerVisual };\n\nfunction normalizeRegister(targetList, priority, fn, defaultPriority, visualType) {\n  if (isFunction(priority) || isObject(priority)) {\n    fn = priority;\n    priority = defaultPriority;\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (isNaN(priority) || priority == null) {\n      throw new Error('Illegal priority');\n    }\n\n    each(targetList, function (wrap) {\n      assert(wrap.__raw !== fn);\n    });\n  }\n\n  var stageHandler = Scheduler.wrapStageHandler(fn, visualType);\n  stageHandler.__prio = priority;\n  stageHandler.__raw = fn;\n  targetList.push(stageHandler);\n}\n\nexport function registerLoading(name, loadingFx) {\n  loadingEffects[name] = loadingFx;\n}\nexport function extendComponentModel(proto) {\n  return ComponentModel.extend(proto);\n}\nexport function extendComponentView(proto) {\n  return ComponentView.extend(proto);\n}\nexport function extendSeriesModel(proto) {\n  return SeriesModel.extend(proto);\n}\nexport function extendChartView(proto) {\n  return ChartView.extend(proto);\n}\nexport function setCanvasCreator(creator) {\n  zrUtil.$override('createCanvas', creator);\n}\nexport function registerMap(mapName, geoJson, specialAreas) {\n  mapDataStorage.registerMap(mapName, geoJson, specialAreas);\n}\nexport function getMap(mapName) {\n  var records = mapDataStorage.retrieveMap(mapName);\n  return records && records[0] && {\n    geoJson: records[0].geoJSON,\n    specialAreas: records[0].specialAreas\n  };\n}\nexport var registerTransform = registerExternalTransform;\nregisterVisual(PRIORITY_VISUAL_GLOBAL, seriesStyleTask);\nregisterVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM, dataStyleTask);\nregisterVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM, dataColorPaletteTask);\nregisterVisual(PRIORITY_VISUAL_GLOBAL, seriesSymbolTask);\nregisterVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM, dataSymbolTask);\nregisterVisual(PRIORITY_VISUAL_DECAL, decal);\nregisterPreprocessor(backwardCompat);\nregisterProcessor(PRIORITY_PROCESSOR_DATASTACK, dataStack);\nregisterLoading('default', loadingDefault);\nregisterAction({\n  type: HIGHLIGHT_ACTION_TYPE,\n  event: HIGHLIGHT_ACTION_TYPE,\n  update: HIGHLIGHT_ACTION_TYPE\n}, zrUtil.noop);\nregisterAction({\n  type: DOWNPLAY_ACTION_TYPE,\n  event: DOWNPLAY_ACTION_TYPE,\n  update: DOWNPLAY_ACTION_TYPE\n}, zrUtil.noop);\nregisterAction({\n  type: SELECT_ACTION_TYPE,\n  event: SELECT_ACTION_TYPE,\n  update: SELECT_ACTION_TYPE\n}, zrUtil.noop);\nregisterAction({\n  type: UNSELECT_ACTION_TYPE,\n  event: UNSELECT_ACTION_TYPE,\n  update: UNSELECT_ACTION_TYPE\n}, zrUtil.noop);\nregisterAction({\n  type: TOGGLE_SELECT_ACTION_TYPE,\n  event: TOGGLE_SELECT_ACTION_TYPE,\n  update: TOGGLE_SELECT_ACTION_TYPE\n}, zrUtil.noop);\nregisterTheme('light', lightTheme);\nregisterTheme('dark', darkTheme);\nexport var dataTool = {};"]},"metadata":{},"sourceType":"module"}