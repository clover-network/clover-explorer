{"ast":null,"code":"/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\"use strict\";\n\nexports.__esModule = true;\n\nvar tslib_1 = require(\"tslib\");\n\nvar util_1 = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar states_1 = require(\"../../util/states\");\n\nvar Chart_1 = require(\"../../view/Chart\");\n\nvar labelLayout_1 = require(\"./labelLayout\");\n\nvar labelGuideHelper_1 = require(\"../../label/labelGuideHelper\");\n\nvar labelStyle_1 = require(\"../../label/labelStyle\");\n\nvar pieHelper_1 = require(\"../helper/pieHelper\");\n\nvar PiePiece = function (_super) {\n  tslib_1.__extends(PiePiece, _super);\n\n  function PiePiece(data, idx, startAngle) {\n    var _this = _super.call(this) || this;\n\n    _this.z2 = 2;\n    var polyline = new graphic.Polyline();\n    var text = new graphic.Text();\n\n    _this.setTextGuideLine(polyline);\n\n    _this.setTextContent(text);\n\n    _this.updateData(data, idx, startAngle, true);\n\n    return _this;\n  }\n\n  PiePiece.prototype.updateData = function (data, idx, startAngle, firstCreate) {\n    var sector = this;\n    var seriesModel = data.hostModel;\n    var itemModel = data.getItemModel(idx);\n    var emphasisModel = itemModel.getModel('emphasis');\n    var layout = data.getItemLayout(idx);\n    var sectorShape = util_1.extend(pieHelper_1.getSectorCornerRadius(itemModel.getModel('itemStyle'), layout) || {}, layout);\n\n    if (firstCreate) {\n      sector.setShape(sectorShape);\n      var animationType = seriesModel.getShallow('animationType');\n\n      if (animationType === 'scale') {\n        sector.shape.r = layout.r0;\n        graphic.initProps(sector, {\n          shape: {\n            r: layout.r\n          }\n        }, seriesModel, idx);\n      } else {\n        if (startAngle != null) {\n          sector.setShape({\n            startAngle: startAngle,\n            endAngle: startAngle\n          });\n          graphic.initProps(sector, {\n            shape: {\n              startAngle: layout.startAngle,\n              endAngle: layout.endAngle\n            }\n          }, seriesModel, idx);\n        } else {\n          sector.shape.endAngle = layout.startAngle;\n          graphic.updateProps(sector, {\n            shape: {\n              endAngle: layout.endAngle\n            }\n          }, seriesModel, idx);\n        }\n      }\n    } else {\n      graphic.updateProps(sector, {\n        shape: sectorShape\n      }, seriesModel, idx);\n    }\n\n    sector.useStyle(data.getItemVisual(idx, 'style'));\n    states_1.setStatesStylesFromModel(sector, itemModel);\n    var midAngle = (layout.startAngle + layout.endAngle) / 2;\n    var offset = seriesModel.get('selectedOffset');\n    var dx = Math.cos(midAngle) * offset;\n    var dy = Math.sin(midAngle) * offset;\n    var cursorStyle = itemModel.getShallow('cursor');\n    cursorStyle && sector.attr('cursor', cursorStyle);\n\n    this._updateLabel(seriesModel, data, idx);\n\n    sector.ensureState('emphasis').shape = tslib_1.__assign({\n      r: layout.r + (emphasisModel.get('scale') ? emphasisModel.get('scaleSize') || 0 : 0)\n    }, pieHelper_1.getSectorCornerRadius(emphasisModel.getModel('itemStyle'), layout));\n    util_1.extend(sector.ensureState('select'), {\n      x: dx,\n      y: dy,\n      shape: pieHelper_1.getSectorCornerRadius(itemModel.getModel(['select', 'itemStyle']), layout)\n    });\n    util_1.extend(sector.ensureState('blur'), {\n      shape: pieHelper_1.getSectorCornerRadius(itemModel.getModel(['blur', 'itemStyle']), layout)\n    });\n    var labelLine = sector.getTextGuideLine();\n    var labelText = sector.getTextContent();\n    util_1.extend(labelLine.ensureState('select'), {\n      x: dx,\n      y: dy\n    });\n    util_1.extend(labelText.ensureState('select'), {\n      x: dx,\n      y: dy\n    });\n    states_1.enableHoverEmphasis(this, emphasisModel.get('focus'), emphasisModel.get('blurScope'));\n  };\n\n  PiePiece.prototype._updateLabel = function (seriesModel, data, idx) {\n    var sector = this;\n    var itemModel = data.getItemModel(idx);\n    var labelLineModel = itemModel.getModel('labelLine');\n    var style = data.getItemVisual(idx, 'style');\n    var visualColor = style && style.fill;\n    var visualOpacity = style && style.opacity;\n    labelStyle_1.setLabelStyle(sector, labelStyle_1.getLabelStatesModels(itemModel), {\n      labelFetcher: data.hostModel,\n      labelDataIndex: idx,\n      inheritColor: visualColor,\n      defaultOpacity: visualOpacity,\n      defaultText: seriesModel.getFormattedLabel(idx, 'normal') || data.getName(idx)\n    });\n    var labelText = sector.getTextContent();\n    sector.setTextConfig({\n      position: null,\n      rotation: null\n    });\n    labelText.attr({\n      z2: 10\n    });\n    labelGuideHelper_1.setLabelLineStyle(this, labelGuideHelper_1.getLabelLineStatesModels(itemModel), {\n      stroke: visualColor,\n      opacity: util_1.retrieve3(labelLineModel.get(['lineStyle', 'opacity']), visualOpacity, 1)\n    });\n  };\n\n  return PiePiece;\n}(graphic.Sector);\n\nvar PieView = function (_super) {\n  tslib_1.__extends(PieView, _super);\n\n  function PieView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.ignoreLabelLineUpdate = true;\n    return _this;\n  }\n\n  PieView.prototype.init = function () {\n    var sectorGroup = new graphic.Group();\n    this._sectorGroup = sectorGroup;\n  };\n\n  PieView.prototype.render = function (seriesModel, ecModel, api, payload) {\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var group = this.group;\n    var startAngle;\n\n    if (!oldData && data.count() > 0) {\n      var shape = data.getItemLayout(0);\n\n      for (var s = 1; isNaN(shape && shape.startAngle) && s < data.count(); ++s) {\n        shape = data.getItemLayout(s);\n      }\n\n      if (shape) {\n        startAngle = shape.startAngle;\n      }\n    }\n\n    data.diff(oldData).add(function (idx) {\n      var piePiece = new PiePiece(data, idx, startAngle);\n      data.setItemGraphicEl(idx, piePiece);\n      group.add(piePiece);\n    }).update(function (newIdx, oldIdx) {\n      var piePiece = oldData.getItemGraphicEl(oldIdx);\n      piePiece.updateData(data, newIdx, startAngle);\n      piePiece.off('click');\n      group.add(piePiece);\n      data.setItemGraphicEl(newIdx, piePiece);\n    }).remove(function (idx) {\n      var piePiece = oldData.getItemGraphicEl(idx);\n      graphic.removeElementWithFadeOut(piePiece, seriesModel, idx);\n    }).execute();\n    labelLayout_1[\"default\"](seriesModel);\n\n    if (seriesModel.get('animationTypeUpdate') !== 'expansion') {\n      this._data = data;\n    }\n  };\n\n  PieView.prototype.dispose = function () {};\n\n  PieView.prototype.containPoint = function (point, seriesModel) {\n    var data = seriesModel.getData();\n    var itemLayout = data.getItemLayout(0);\n\n    if (itemLayout) {\n      var dx = point[0] - itemLayout.cx;\n      var dy = point[1] - itemLayout.cy;\n      var radius = Math.sqrt(dx * dx + dy * dy);\n      return radius <= itemLayout.r && radius >= itemLayout.r0;\n    }\n  };\n\n  PieView.type = 'pie';\n  return PieView;\n}(Chart_1[\"default\"]);\n\nChart_1[\"default\"].registerClass(PieView);\nexports[\"default\"] = PieView;","map":{"version":3,"sources":["/Users/wanglijie/wanglijie/clover-defi-wallet/node_modules/echarts/lib/chart/pie/PieView.js"],"names":["exports","__esModule","tslib_1","require","util_1","graphic","states_1","Chart_1","labelLayout_1","labelGuideHelper_1","labelStyle_1","pieHelper_1","PiePiece","_super","__extends","data","idx","startAngle","_this","call","z2","polyline","Polyline","text","Text","setTextGuideLine","setTextContent","updateData","prototype","firstCreate","sector","seriesModel","hostModel","itemModel","getItemModel","emphasisModel","getModel","layout","getItemLayout","sectorShape","extend","getSectorCornerRadius","setShape","animationType","getShallow","shape","r","r0","initProps","endAngle","updateProps","useStyle","getItemVisual","setStatesStylesFromModel","midAngle","offset","get","dx","Math","cos","dy","sin","cursorStyle","attr","_updateLabel","ensureState","__assign","x","y","labelLine","getTextGuideLine","labelText","getTextContent","enableHoverEmphasis","labelLineModel","style","visualColor","fill","visualOpacity","opacity","setLabelStyle","getLabelStatesModels","labelFetcher","labelDataIndex","inheritColor","defaultOpacity","defaultText","getFormattedLabel","getName","setTextConfig","position","rotation","setLabelLineStyle","getLabelLineStatesModels","stroke","retrieve3","Sector","PieView","apply","arguments","ignoreLabelLineUpdate","init","sectorGroup","Group","_sectorGroup","render","ecModel","api","payload","getData","oldData","_data","group","count","s","isNaN","diff","add","piePiece","setItemGraphicEl","update","newIdx","oldIdx","getItemGraphicEl","off","remove","removeElementWithFadeOut","execute","dispose","containPoint","point","itemLayout","cx","cy","radius","sqrt","type","registerClass"],"mappings":"AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAIA;AACA;AACA;AAEA;;AAEAA,OAAO,CAACC,UAAR,GAAqB,IAArB;;AAEA,IAAIC,OAAO,GAAGC,OAAO,CAAC,OAAD,CAArB;;AAEA,IAAIC,MAAM,GAAGD,OAAO,CAAC,uBAAD,CAApB;;AAEA,IAAIE,OAAO,GAAGF,OAAO,CAAC,oBAAD,CAArB;;AAEA,IAAIG,QAAQ,GAAGH,OAAO,CAAC,mBAAD,CAAtB;;AAEA,IAAII,OAAO,GAAGJ,OAAO,CAAC,kBAAD,CAArB;;AAEA,IAAIK,aAAa,GAAGL,OAAO,CAAC,eAAD,CAA3B;;AAEA,IAAIM,kBAAkB,GAAGN,OAAO,CAAC,8BAAD,CAAhC;;AAEA,IAAIO,YAAY,GAAGP,OAAO,CAAC,wBAAD,CAA1B;;AAEA,IAAIQ,WAAW,GAAGR,OAAO,CAAC,qBAAD,CAAzB;;AAEA,IAAIS,QAAQ,GAAG,UAAUC,MAAV,EAAkB;AAC/BX,EAAAA,OAAO,CAACY,SAAR,CAAkBF,QAAlB,EAA4BC,MAA5B;;AAEA,WAASD,QAAT,CAAkBG,IAAlB,EAAwBC,GAAxB,EAA6BC,UAA7B,EAAyC;AACvC,QAAIC,KAAK,GAAGL,MAAM,CAACM,IAAP,CAAY,IAAZ,KAAqB,IAAjC;;AAEAD,IAAAA,KAAK,CAACE,EAAN,GAAW,CAAX;AACA,QAAIC,QAAQ,GAAG,IAAIhB,OAAO,CAACiB,QAAZ,EAAf;AACA,QAAIC,IAAI,GAAG,IAAIlB,OAAO,CAACmB,IAAZ,EAAX;;AAEAN,IAAAA,KAAK,CAACO,gBAAN,CAAuBJ,QAAvB;;AAEAH,IAAAA,KAAK,CAACQ,cAAN,CAAqBH,IAArB;;AAEAL,IAAAA,KAAK,CAACS,UAAN,CAAiBZ,IAAjB,EAAuBC,GAAvB,EAA4BC,UAA5B,EAAwC,IAAxC;;AAEA,WAAOC,KAAP;AACD;;AAEDN,EAAAA,QAAQ,CAACgB,SAAT,CAAmBD,UAAnB,GAAgC,UAAUZ,IAAV,EAAgBC,GAAhB,EAAqBC,UAArB,EAAiCY,WAAjC,EAA8C;AAC5E,QAAIC,MAAM,GAAG,IAAb;AACA,QAAIC,WAAW,GAAGhB,IAAI,CAACiB,SAAvB;AACA,QAAIC,SAAS,GAAGlB,IAAI,CAACmB,YAAL,CAAkBlB,GAAlB,CAAhB;AACA,QAAImB,aAAa,GAAGF,SAAS,CAACG,QAAV,CAAmB,UAAnB,CAApB;AACA,QAAIC,MAAM,GAAGtB,IAAI,CAACuB,aAAL,CAAmBtB,GAAnB,CAAb;AACA,QAAIuB,WAAW,GAAGnC,MAAM,CAACoC,MAAP,CAAc7B,WAAW,CAAC8B,qBAAZ,CAAkCR,SAAS,CAACG,QAAV,CAAmB,WAAnB,CAAlC,EAAmEC,MAAnE,KAA8E,EAA5F,EAAgGA,MAAhG,CAAlB;;AAEA,QAAIR,WAAJ,EAAiB;AACfC,MAAAA,MAAM,CAACY,QAAP,CAAgBH,WAAhB;AACA,UAAII,aAAa,GAAGZ,WAAW,CAACa,UAAZ,CAAuB,eAAvB,CAApB;;AAEA,UAAID,aAAa,KAAK,OAAtB,EAA+B;AAC7Bb,QAAAA,MAAM,CAACe,KAAP,CAAaC,CAAb,GAAiBT,MAAM,CAACU,EAAxB;AACA1C,QAAAA,OAAO,CAAC2C,SAAR,CAAkBlB,MAAlB,EAA0B;AACxBe,UAAAA,KAAK,EAAE;AACLC,YAAAA,CAAC,EAAET,MAAM,CAACS;AADL;AADiB,SAA1B,EAIGf,WAJH,EAIgBf,GAJhB;AAKD,OAPD,MAOO;AACL,YAAIC,UAAU,IAAI,IAAlB,EAAwB;AACtBa,UAAAA,MAAM,CAACY,QAAP,CAAgB;AACdzB,YAAAA,UAAU,EAAEA,UADE;AAEdgC,YAAAA,QAAQ,EAAEhC;AAFI,WAAhB;AAIAZ,UAAAA,OAAO,CAAC2C,SAAR,CAAkBlB,MAAlB,EAA0B;AACxBe,YAAAA,KAAK,EAAE;AACL5B,cAAAA,UAAU,EAAEoB,MAAM,CAACpB,UADd;AAELgC,cAAAA,QAAQ,EAAEZ,MAAM,CAACY;AAFZ;AADiB,WAA1B,EAKGlB,WALH,EAKgBf,GALhB;AAMD,SAXD,MAWO;AACLc,UAAAA,MAAM,CAACe,KAAP,CAAaI,QAAb,GAAwBZ,MAAM,CAACpB,UAA/B;AACAZ,UAAAA,OAAO,CAAC6C,WAAR,CAAoBpB,MAApB,EAA4B;AAC1Be,YAAAA,KAAK,EAAE;AACLI,cAAAA,QAAQ,EAAEZ,MAAM,CAACY;AADZ;AADmB,WAA5B,EAIGlB,WAJH,EAIgBf,GAJhB;AAKD;AACF;AACF,KAhCD,MAgCO;AACLX,MAAAA,OAAO,CAAC6C,WAAR,CAAoBpB,MAApB,EAA4B;AAC1Be,QAAAA,KAAK,EAAEN;AADmB,OAA5B,EAEGR,WAFH,EAEgBf,GAFhB;AAGD;;AAEDc,IAAAA,MAAM,CAACqB,QAAP,CAAgBpC,IAAI,CAACqC,aAAL,CAAmBpC,GAAnB,EAAwB,OAAxB,CAAhB;AACAV,IAAAA,QAAQ,CAAC+C,wBAAT,CAAkCvB,MAAlC,EAA0CG,SAA1C;AACA,QAAIqB,QAAQ,GAAG,CAACjB,MAAM,CAACpB,UAAP,GAAoBoB,MAAM,CAACY,QAA5B,IAAwC,CAAvD;AACA,QAAIM,MAAM,GAAGxB,WAAW,CAACyB,GAAZ,CAAgB,gBAAhB,CAAb;AACA,QAAIC,EAAE,GAAGC,IAAI,CAACC,GAAL,CAASL,QAAT,IAAqBC,MAA9B;AACA,QAAIK,EAAE,GAAGF,IAAI,CAACG,GAAL,CAASP,QAAT,IAAqBC,MAA9B;AACA,QAAIO,WAAW,GAAG7B,SAAS,CAACW,UAAV,CAAqB,QAArB,CAAlB;AACAkB,IAAAA,WAAW,IAAIhC,MAAM,CAACiC,IAAP,CAAY,QAAZ,EAAsBD,WAAtB,CAAf;;AAEA,SAAKE,YAAL,CAAkBjC,WAAlB,EAA+BhB,IAA/B,EAAqCC,GAArC;;AAEAc,IAAAA,MAAM,CAACmC,WAAP,CAAmB,UAAnB,EAA+BpB,KAA/B,GAAuC3C,OAAO,CAACgE,QAAR,CAAiB;AACtDpB,MAAAA,CAAC,EAAET,MAAM,CAACS,CAAP,IAAYX,aAAa,CAACqB,GAAd,CAAkB,OAAlB,IAA6BrB,aAAa,CAACqB,GAAd,CAAkB,WAAlB,KAAkC,CAA/D,GAAmE,CAA/E;AADmD,KAAjB,EAEpC7C,WAAW,CAAC8B,qBAAZ,CAAkCN,aAAa,CAACC,QAAd,CAAuB,WAAvB,CAAlC,EAAuEC,MAAvE,CAFoC,CAAvC;AAGAjC,IAAAA,MAAM,CAACoC,MAAP,CAAcV,MAAM,CAACmC,WAAP,CAAmB,QAAnB,CAAd,EAA4C;AAC1CE,MAAAA,CAAC,EAAEV,EADuC;AAE1CW,MAAAA,CAAC,EAAER,EAFuC;AAG1Cf,MAAAA,KAAK,EAAElC,WAAW,CAAC8B,qBAAZ,CAAkCR,SAAS,CAACG,QAAV,CAAmB,CAAC,QAAD,EAAW,WAAX,CAAnB,CAAlC,EAA+EC,MAA/E;AAHmC,KAA5C;AAKAjC,IAAAA,MAAM,CAACoC,MAAP,CAAcV,MAAM,CAACmC,WAAP,CAAmB,MAAnB,CAAd,EAA0C;AACxCpB,MAAAA,KAAK,EAAElC,WAAW,CAAC8B,qBAAZ,CAAkCR,SAAS,CAACG,QAAV,CAAmB,CAAC,MAAD,EAAS,WAAT,CAAnB,CAAlC,EAA6EC,MAA7E;AADiC,KAA1C;AAGA,QAAIgC,SAAS,GAAGvC,MAAM,CAACwC,gBAAP,EAAhB;AACA,QAAIC,SAAS,GAAGzC,MAAM,CAAC0C,cAAP,EAAhB;AACApE,IAAAA,MAAM,CAACoC,MAAP,CAAc6B,SAAS,CAACJ,WAAV,CAAsB,QAAtB,CAAd,EAA+C;AAC7CE,MAAAA,CAAC,EAAEV,EAD0C;AAE7CW,MAAAA,CAAC,EAAER;AAF0C,KAA/C;AAIAxD,IAAAA,MAAM,CAACoC,MAAP,CAAc+B,SAAS,CAACN,WAAV,CAAsB,QAAtB,CAAd,EAA+C;AAC7CE,MAAAA,CAAC,EAAEV,EAD0C;AAE7CW,MAAAA,CAAC,EAAER;AAF0C,KAA/C;AAIAtD,IAAAA,QAAQ,CAACmE,mBAAT,CAA6B,IAA7B,EAAmCtC,aAAa,CAACqB,GAAd,CAAkB,OAAlB,CAAnC,EAA+DrB,aAAa,CAACqB,GAAd,CAAkB,WAAlB,CAA/D;AACD,GA/ED;;AAiFA5C,EAAAA,QAAQ,CAACgB,SAAT,CAAmBoC,YAAnB,GAAkC,UAAUjC,WAAV,EAAuBhB,IAAvB,EAA6BC,GAA7B,EAAkC;AAClE,QAAIc,MAAM,GAAG,IAAb;AACA,QAAIG,SAAS,GAAGlB,IAAI,CAACmB,YAAL,CAAkBlB,GAAlB,CAAhB;AACA,QAAI0D,cAAc,GAAGzC,SAAS,CAACG,QAAV,CAAmB,WAAnB,CAArB;AACA,QAAIuC,KAAK,GAAG5D,IAAI,CAACqC,aAAL,CAAmBpC,GAAnB,EAAwB,OAAxB,CAAZ;AACA,QAAI4D,WAAW,GAAGD,KAAK,IAAIA,KAAK,CAACE,IAAjC;AACA,QAAIC,aAAa,GAAGH,KAAK,IAAIA,KAAK,CAACI,OAAnC;AACArE,IAAAA,YAAY,CAACsE,aAAb,CAA2BlD,MAA3B,EAAmCpB,YAAY,CAACuE,oBAAb,CAAkChD,SAAlC,CAAnC,EAAiF;AAC/EiD,MAAAA,YAAY,EAAEnE,IAAI,CAACiB,SAD4D;AAE/EmD,MAAAA,cAAc,EAAEnE,GAF+D;AAG/EoE,MAAAA,YAAY,EAAER,WAHiE;AAI/ES,MAAAA,cAAc,EAAEP,aAJ+D;AAK/EQ,MAAAA,WAAW,EAAEvD,WAAW,CAACwD,iBAAZ,CAA8BvE,GAA9B,EAAmC,QAAnC,KAAgDD,IAAI,CAACyE,OAAL,CAAaxE,GAAb;AALkB,KAAjF;AAOA,QAAIuD,SAAS,GAAGzC,MAAM,CAAC0C,cAAP,EAAhB;AACA1C,IAAAA,MAAM,CAAC2D,aAAP,CAAqB;AACnBC,MAAAA,QAAQ,EAAE,IADS;AAEnBC,MAAAA,QAAQ,EAAE;AAFS,KAArB;AAIApB,IAAAA,SAAS,CAACR,IAAV,CAAe;AACb3C,MAAAA,EAAE,EAAE;AADS,KAAf;AAGAX,IAAAA,kBAAkB,CAACmF,iBAAnB,CAAqC,IAArC,EAA2CnF,kBAAkB,CAACoF,wBAAnB,CAA4C5D,SAA5C,CAA3C,EAAmG;AACjG6D,MAAAA,MAAM,EAAElB,WADyF;AAEjGG,MAAAA,OAAO,EAAE3E,MAAM,CAAC2F,SAAP,CAAiBrB,cAAc,CAAClB,GAAf,CAAmB,CAAC,WAAD,EAAc,SAAd,CAAnB,CAAjB,EAA+DsB,aAA/D,EAA8E,CAA9E;AAFwF,KAAnG;AAID,GA1BD;;AA4BA,SAAOlE,QAAP;AACD,CAjIc,CAiIbP,OAAO,CAAC2F,MAjIK,CAAf;;AAmIA,IAAIC,OAAO,GAAG,UAAUpF,MAAV,EAAkB;AAC9BX,EAAAA,OAAO,CAACY,SAAR,CAAkBmF,OAAlB,EAA2BpF,MAA3B;;AAEA,WAASoF,OAAT,GAAmB;AACjB,QAAI/E,KAAK,GAAGL,MAAM,KAAK,IAAX,IAAmBA,MAAM,CAACqF,KAAP,CAAa,IAAb,EAAmBC,SAAnB,CAAnB,IAAoD,IAAhE;;AAEAjF,IAAAA,KAAK,CAACkF,qBAAN,GAA8B,IAA9B;AACA,WAAOlF,KAAP;AACD;;AAED+E,EAAAA,OAAO,CAACrE,SAAR,CAAkByE,IAAlB,GAAyB,YAAY;AACnC,QAAIC,WAAW,GAAG,IAAIjG,OAAO,CAACkG,KAAZ,EAAlB;AACA,SAAKC,YAAL,GAAoBF,WAApB;AACD,GAHD;;AAKAL,EAAAA,OAAO,CAACrE,SAAR,CAAkB6E,MAAlB,GAA2B,UAAU1E,WAAV,EAAuB2E,OAAvB,EAAgCC,GAAhC,EAAqCC,OAArC,EAA8C;AACvE,QAAI7F,IAAI,GAAGgB,WAAW,CAAC8E,OAAZ,EAAX;AACA,QAAIC,OAAO,GAAG,KAAKC,KAAnB;AACA,QAAIC,KAAK,GAAG,KAAKA,KAAjB;AACA,QAAI/F,UAAJ;;AAEA,QAAI,CAAC6F,OAAD,IAAY/F,IAAI,CAACkG,KAAL,KAAe,CAA/B,EAAkC;AAChC,UAAIpE,KAAK,GAAG9B,IAAI,CAACuB,aAAL,CAAmB,CAAnB,CAAZ;;AAEA,WAAK,IAAI4E,CAAC,GAAG,CAAb,EAAgBC,KAAK,CAACtE,KAAK,IAAIA,KAAK,CAAC5B,UAAhB,CAAL,IAAoCiG,CAAC,GAAGnG,IAAI,CAACkG,KAAL,EAAxD,EAAsE,EAAEC,CAAxE,EAA2E;AACzErE,QAAAA,KAAK,GAAG9B,IAAI,CAACuB,aAAL,CAAmB4E,CAAnB,CAAR;AACD;;AAED,UAAIrE,KAAJ,EAAW;AACT5B,QAAAA,UAAU,GAAG4B,KAAK,CAAC5B,UAAnB;AACD;AACF;;AAEDF,IAAAA,IAAI,CAACqG,IAAL,CAAUN,OAAV,EAAmBO,GAAnB,CAAuB,UAAUrG,GAAV,EAAe;AACpC,UAAIsG,QAAQ,GAAG,IAAI1G,QAAJ,CAAaG,IAAb,EAAmBC,GAAnB,EAAwBC,UAAxB,CAAf;AACAF,MAAAA,IAAI,CAACwG,gBAAL,CAAsBvG,GAAtB,EAA2BsG,QAA3B;AACAN,MAAAA,KAAK,CAACK,GAAN,CAAUC,QAAV;AACD,KAJD,EAIGE,MAJH,CAIU,UAAUC,MAAV,EAAkBC,MAAlB,EAA0B;AAClC,UAAIJ,QAAQ,GAAGR,OAAO,CAACa,gBAAR,CAAyBD,MAAzB,CAAf;AACAJ,MAAAA,QAAQ,CAAC3F,UAAT,CAAoBZ,IAApB,EAA0B0G,MAA1B,EAAkCxG,UAAlC;AACAqG,MAAAA,QAAQ,CAACM,GAAT,CAAa,OAAb;AACAZ,MAAAA,KAAK,CAACK,GAAN,CAAUC,QAAV;AACAvG,MAAAA,IAAI,CAACwG,gBAAL,CAAsBE,MAAtB,EAA8BH,QAA9B;AACD,KAVD,EAUGO,MAVH,CAUU,UAAU7G,GAAV,EAAe;AACvB,UAAIsG,QAAQ,GAAGR,OAAO,CAACa,gBAAR,CAAyB3G,GAAzB,CAAf;AACAX,MAAAA,OAAO,CAACyH,wBAAR,CAAiCR,QAAjC,EAA2CvF,WAA3C,EAAwDf,GAAxD;AACD,KAbD,EAaG+G,OAbH;AAcAvH,IAAAA,aAAa,CAAC,SAAD,CAAb,CAAyBuB,WAAzB;;AAEA,QAAIA,WAAW,CAACyB,GAAZ,CAAgB,qBAAhB,MAA2C,WAA/C,EAA4D;AAC1D,WAAKuD,KAAL,GAAahG,IAAb;AACD;AACF,GArCD;;AAuCAkF,EAAAA,OAAO,CAACrE,SAAR,CAAkBoG,OAAlB,GAA4B,YAAY,CAAE,CAA1C;;AAEA/B,EAAAA,OAAO,CAACrE,SAAR,CAAkBqG,YAAlB,GAAiC,UAAUC,KAAV,EAAiBnG,WAAjB,EAA8B;AAC7D,QAAIhB,IAAI,GAAGgB,WAAW,CAAC8E,OAAZ,EAAX;AACA,QAAIsB,UAAU,GAAGpH,IAAI,CAACuB,aAAL,CAAmB,CAAnB,CAAjB;;AAEA,QAAI6F,UAAJ,EAAgB;AACd,UAAI1E,EAAE,GAAGyE,KAAK,CAAC,CAAD,CAAL,GAAWC,UAAU,CAACC,EAA/B;AACA,UAAIxE,EAAE,GAAGsE,KAAK,CAAC,CAAD,CAAL,GAAWC,UAAU,CAACE,EAA/B;AACA,UAAIC,MAAM,GAAG5E,IAAI,CAAC6E,IAAL,CAAU9E,EAAE,GAAGA,EAAL,GAAUG,EAAE,GAAGA,EAAzB,CAAb;AACA,aAAO0E,MAAM,IAAIH,UAAU,CAACrF,CAArB,IAA0BwF,MAAM,IAAIH,UAAU,CAACpF,EAAtD;AACD;AACF,GAVD;;AAYAkD,EAAAA,OAAO,CAACuC,IAAR,GAAe,KAAf;AACA,SAAOvC,OAAP;AACD,CAtEa,CAsEZ1F,OAAO,CAAC,SAAD,CAtEK,CAAd;;AAwEAA,OAAO,CAAC,SAAD,CAAP,CAAmBkI,aAAnB,CAAiCxC,OAAjC;AACAjG,OAAO,CAAC,SAAD,CAAP,GAAqBiG,OAArB","sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n\"use strict\";\n\nexports.__esModule = true;\n\nvar tslib_1 = require(\"tslib\");\n\nvar util_1 = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar states_1 = require(\"../../util/states\");\n\nvar Chart_1 = require(\"../../view/Chart\");\n\nvar labelLayout_1 = require(\"./labelLayout\");\n\nvar labelGuideHelper_1 = require(\"../../label/labelGuideHelper\");\n\nvar labelStyle_1 = require(\"../../label/labelStyle\");\n\nvar pieHelper_1 = require(\"../helper/pieHelper\");\n\nvar PiePiece = function (_super) {\n  tslib_1.__extends(PiePiece, _super);\n\n  function PiePiece(data, idx, startAngle) {\n    var _this = _super.call(this) || this;\n\n    _this.z2 = 2;\n    var polyline = new graphic.Polyline();\n    var text = new graphic.Text();\n\n    _this.setTextGuideLine(polyline);\n\n    _this.setTextContent(text);\n\n    _this.updateData(data, idx, startAngle, true);\n\n    return _this;\n  }\n\n  PiePiece.prototype.updateData = function (data, idx, startAngle, firstCreate) {\n    var sector = this;\n    var seriesModel = data.hostModel;\n    var itemModel = data.getItemModel(idx);\n    var emphasisModel = itemModel.getModel('emphasis');\n    var layout = data.getItemLayout(idx);\n    var sectorShape = util_1.extend(pieHelper_1.getSectorCornerRadius(itemModel.getModel('itemStyle'), layout) || {}, layout);\n\n    if (firstCreate) {\n      sector.setShape(sectorShape);\n      var animationType = seriesModel.getShallow('animationType');\n\n      if (animationType === 'scale') {\n        sector.shape.r = layout.r0;\n        graphic.initProps(sector, {\n          shape: {\n            r: layout.r\n          }\n        }, seriesModel, idx);\n      } else {\n        if (startAngle != null) {\n          sector.setShape({\n            startAngle: startAngle,\n            endAngle: startAngle\n          });\n          graphic.initProps(sector, {\n            shape: {\n              startAngle: layout.startAngle,\n              endAngle: layout.endAngle\n            }\n          }, seriesModel, idx);\n        } else {\n          sector.shape.endAngle = layout.startAngle;\n          graphic.updateProps(sector, {\n            shape: {\n              endAngle: layout.endAngle\n            }\n          }, seriesModel, idx);\n        }\n      }\n    } else {\n      graphic.updateProps(sector, {\n        shape: sectorShape\n      }, seriesModel, idx);\n    }\n\n    sector.useStyle(data.getItemVisual(idx, 'style'));\n    states_1.setStatesStylesFromModel(sector, itemModel);\n    var midAngle = (layout.startAngle + layout.endAngle) / 2;\n    var offset = seriesModel.get('selectedOffset');\n    var dx = Math.cos(midAngle) * offset;\n    var dy = Math.sin(midAngle) * offset;\n    var cursorStyle = itemModel.getShallow('cursor');\n    cursorStyle && sector.attr('cursor', cursorStyle);\n\n    this._updateLabel(seriesModel, data, idx);\n\n    sector.ensureState('emphasis').shape = tslib_1.__assign({\n      r: layout.r + (emphasisModel.get('scale') ? emphasisModel.get('scaleSize') || 0 : 0)\n    }, pieHelper_1.getSectorCornerRadius(emphasisModel.getModel('itemStyle'), layout));\n    util_1.extend(sector.ensureState('select'), {\n      x: dx,\n      y: dy,\n      shape: pieHelper_1.getSectorCornerRadius(itemModel.getModel(['select', 'itemStyle']), layout)\n    });\n    util_1.extend(sector.ensureState('blur'), {\n      shape: pieHelper_1.getSectorCornerRadius(itemModel.getModel(['blur', 'itemStyle']), layout)\n    });\n    var labelLine = sector.getTextGuideLine();\n    var labelText = sector.getTextContent();\n    util_1.extend(labelLine.ensureState('select'), {\n      x: dx,\n      y: dy\n    });\n    util_1.extend(labelText.ensureState('select'), {\n      x: dx,\n      y: dy\n    });\n    states_1.enableHoverEmphasis(this, emphasisModel.get('focus'), emphasisModel.get('blurScope'));\n  };\n\n  PiePiece.prototype._updateLabel = function (seriesModel, data, idx) {\n    var sector = this;\n    var itemModel = data.getItemModel(idx);\n    var labelLineModel = itemModel.getModel('labelLine');\n    var style = data.getItemVisual(idx, 'style');\n    var visualColor = style && style.fill;\n    var visualOpacity = style && style.opacity;\n    labelStyle_1.setLabelStyle(sector, labelStyle_1.getLabelStatesModels(itemModel), {\n      labelFetcher: data.hostModel,\n      labelDataIndex: idx,\n      inheritColor: visualColor,\n      defaultOpacity: visualOpacity,\n      defaultText: seriesModel.getFormattedLabel(idx, 'normal') || data.getName(idx)\n    });\n    var labelText = sector.getTextContent();\n    sector.setTextConfig({\n      position: null,\n      rotation: null\n    });\n    labelText.attr({\n      z2: 10\n    });\n    labelGuideHelper_1.setLabelLineStyle(this, labelGuideHelper_1.getLabelLineStatesModels(itemModel), {\n      stroke: visualColor,\n      opacity: util_1.retrieve3(labelLineModel.get(['lineStyle', 'opacity']), visualOpacity, 1)\n    });\n  };\n\n  return PiePiece;\n}(graphic.Sector);\n\nvar PieView = function (_super) {\n  tslib_1.__extends(PieView, _super);\n\n  function PieView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.ignoreLabelLineUpdate = true;\n    return _this;\n  }\n\n  PieView.prototype.init = function () {\n    var sectorGroup = new graphic.Group();\n    this._sectorGroup = sectorGroup;\n  };\n\n  PieView.prototype.render = function (seriesModel, ecModel, api, payload) {\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var group = this.group;\n    var startAngle;\n\n    if (!oldData && data.count() > 0) {\n      var shape = data.getItemLayout(0);\n\n      for (var s = 1; isNaN(shape && shape.startAngle) && s < data.count(); ++s) {\n        shape = data.getItemLayout(s);\n      }\n\n      if (shape) {\n        startAngle = shape.startAngle;\n      }\n    }\n\n    data.diff(oldData).add(function (idx) {\n      var piePiece = new PiePiece(data, idx, startAngle);\n      data.setItemGraphicEl(idx, piePiece);\n      group.add(piePiece);\n    }).update(function (newIdx, oldIdx) {\n      var piePiece = oldData.getItemGraphicEl(oldIdx);\n      piePiece.updateData(data, newIdx, startAngle);\n      piePiece.off('click');\n      group.add(piePiece);\n      data.setItemGraphicEl(newIdx, piePiece);\n    }).remove(function (idx) {\n      var piePiece = oldData.getItemGraphicEl(idx);\n      graphic.removeElementWithFadeOut(piePiece, seriesModel, idx);\n    }).execute();\n    labelLayout_1[\"default\"](seriesModel);\n\n    if (seriesModel.get('animationTypeUpdate') !== 'expansion') {\n      this._data = data;\n    }\n  };\n\n  PieView.prototype.dispose = function () {};\n\n  PieView.prototype.containPoint = function (point, seriesModel) {\n    var data = seriesModel.getData();\n    var itemLayout = data.getItemLayout(0);\n\n    if (itemLayout) {\n      var dx = point[0] - itemLayout.cx;\n      var dy = point[1] - itemLayout.cy;\n      var radius = Math.sqrt(dx * dx + dy * dy);\n      return radius <= itemLayout.r && radius >= itemLayout.r0;\n    }\n  };\n\n  PieView.type = 'pie';\n  return PieView;\n}(Chart_1[\"default\"]);\n\nChart_1[\"default\"].registerClass(PieView);\nexports[\"default\"] = PieView;"]},"metadata":{},"sourceType":"script"}