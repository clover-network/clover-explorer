{"ast":null,"code":"/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/esm/core/util';\nimport SeriesModel from '../../model/Series';\nimport Tree from '../../data/Tree';\nimport Model from '../../model/Model';\nimport { wrapTreePathInfo } from '../helper/treeHelper';\nimport { normalizeToArray } from '../../util/model';\nimport { createTooltipMarkup } from '../../component/tooltip/tooltipMarkup';\nimport enableAriaDecalForTree from '../helper/enableAriaDecalForTree';\n\nvar TreemapSeriesModel = function (_super) {\n  __extends(TreemapSeriesModel, _super);\n\n  function TreemapSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = TreemapSeriesModel.type;\n    _this.preventUsingHoverLayer = true;\n    return _this;\n  }\n\n  TreemapSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    var root = {\n      name: option.name,\n      children: option.data\n    };\n    completeTreeValue(root);\n    var levels = option.levels || [];\n    var designatedVisualItemStyle = this.designatedVisualItemStyle = {};\n    var designatedVisualModel = new Model({\n      itemStyle: designatedVisualItemStyle\n    }, this, ecModel);\n    levels = option.levels = setDefault(levels, ecModel);\n    var levelModels = zrUtil.map(levels || [], function (levelDefine) {\n      return new Model(levelDefine, designatedVisualModel, ecModel);\n    }, this);\n    var tree = Tree.createTree(root, this, beforeLink);\n\n    function beforeLink(nodeData) {\n      nodeData.wrapMethod('getItemModel', function (model, idx) {\n        var node = tree.getNodeByDataIndex(idx);\n        var levelModel = levelModels[node.depth];\n        model.parentModel = levelModel || designatedVisualModel;\n        return model;\n      });\n    }\n\n    return tree.data;\n  };\n\n  TreemapSeriesModel.prototype.optionUpdated = function () {\n    this.resetViewRoot();\n  };\n\n  TreemapSeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    var data = this.getData();\n    var value = this.getRawValue(dataIndex);\n    var name = data.getName(dataIndex);\n    return createTooltipMarkup('nameValue', {\n      name: name,\n      value: value\n    });\n  };\n\n  TreemapSeriesModel.prototype.getDataParams = function (dataIndex) {\n    var params = _super.prototype.getDataParams.apply(this, arguments);\n\n    var node = this.getData().tree.getNodeByDataIndex(dataIndex);\n    params.treePathInfo = wrapTreePathInfo(node, this);\n    return params;\n  };\n\n  TreemapSeriesModel.prototype.setLayoutInfo = function (layoutInfo) {\n    this.layoutInfo = this.layoutInfo || {};\n    zrUtil.extend(this.layoutInfo, layoutInfo);\n  };\n\n  TreemapSeriesModel.prototype.mapIdToIndex = function (id) {\n    var idIndexMap = this._idIndexMap;\n\n    if (!idIndexMap) {\n      idIndexMap = this._idIndexMap = zrUtil.createHashMap();\n      this._idIndexMapCount = 0;\n    }\n\n    var index = idIndexMap.get(id);\n\n    if (index == null) {\n      idIndexMap.set(id, index = this._idIndexMapCount++);\n    }\n\n    return index;\n  };\n\n  TreemapSeriesModel.prototype.getViewRoot = function () {\n    return this._viewRoot;\n  };\n\n  TreemapSeriesModel.prototype.resetViewRoot = function (viewRoot) {\n    viewRoot ? this._viewRoot = viewRoot : viewRoot = this._viewRoot;\n    var root = this.getRawData().tree.root;\n\n    if (!viewRoot || viewRoot !== root && !root.contains(viewRoot)) {\n      this._viewRoot = root;\n    }\n  };\n\n  TreemapSeriesModel.prototype.enableAriaDecal = function () {\n    enableAriaDecalForTree(this);\n  };\n\n  TreemapSeriesModel.type = 'series.treemap';\n  TreemapSeriesModel.layoutMode = 'box';\n  TreemapSeriesModel.defaultOption = {\n    progressive: 0,\n    left: 'center',\n    top: 'middle',\n    width: '80%',\n    height: '80%',\n    sort: true,\n    clipWindow: 'origin',\n    squareRatio: 0.5 * (1 + Math.sqrt(5)),\n    leafDepth: null,\n    drillDownIcon: 'â–¶',\n    zoomToNodeRatio: 0.32 * 0.32,\n    roam: true,\n    nodeClick: 'zoomToNode',\n    animation: true,\n    animationDurationUpdate: 900,\n    animationEasing: 'quinticInOut',\n    breadcrumb: {\n      show: true,\n      height: 22,\n      left: 'center',\n      top: 'bottom',\n      emptyItemWidth: 25,\n      itemStyle: {\n        color: 'rgba(0,0,0,0.7)',\n        textStyle: {\n          color: '#fff'\n        }\n      }\n    },\n    label: {\n      show: true,\n      distance: 0,\n      padding: 5,\n      position: 'inside',\n      color: '#fff',\n      overflow: 'truncate'\n    },\n    upperLabel: {\n      show: false,\n      position: [0, '50%'],\n      height: 20,\n      overflow: 'truncate',\n      verticalAlign: 'middle'\n    },\n    itemStyle: {\n      color: null,\n      colorAlpha: null,\n      colorSaturation: null,\n      borderWidth: 0,\n      gapWidth: 0,\n      borderColor: '#fff',\n      borderColorSaturation: null\n    },\n    emphasis: {\n      upperLabel: {\n        show: true,\n        position: [0, '50%'],\n        ellipsis: true,\n        verticalAlign: 'middle'\n      }\n    },\n    visualDimension: 0,\n    visualMin: null,\n    visualMax: null,\n    color: [],\n    colorAlpha: null,\n    colorSaturation: null,\n    colorMappingBy: 'index',\n    visibleMin: 10,\n    childrenVisibleMin: null,\n    levels: []\n  };\n  return TreemapSeriesModel;\n}(SeriesModel);\n\nfunction completeTreeValue(dataNode) {\n  var sum = 0;\n  zrUtil.each(dataNode.children, function (child) {\n    completeTreeValue(child);\n    var childValue = child.value;\n    zrUtil.isArray(childValue) && (childValue = childValue[0]);\n    sum += childValue;\n  });\n  var thisValue = dataNode.value;\n\n  if (zrUtil.isArray(thisValue)) {\n    thisValue = thisValue[0];\n  }\n\n  if (thisValue == null || isNaN(thisValue)) {\n    thisValue = sum;\n  }\n\n  if (thisValue < 0) {\n    thisValue = 0;\n  }\n\n  zrUtil.isArray(dataNode.value) ? dataNode.value[0] = thisValue : dataNode.value = thisValue;\n}\n\nfunction setDefault(levels, ecModel) {\n  var globalColorList = normalizeToArray(ecModel.get('color'));\n  var globalDecalList = normalizeToArray(ecModel.get('decals'));\n\n  if (!globalColorList) {\n    return;\n  }\n\n  levels = levels || [];\n  var hasColorDefine;\n  var hasDecalDefine;\n  zrUtil.each(levels, function (levelDefine) {\n    var model = new Model(levelDefine);\n    var modelColor = model.get('color');\n    var modelDecal = model.get('decal');\n\n    if (model.get(['itemStyle', 'color']) || modelColor && modelColor !== 'none') {\n      hasColorDefine = true;\n    }\n\n    if (model.get(['itemStyle', 'decal']) || modelDecal && modelDecal !== 'none') {\n      hasDecalDefine = true;\n    }\n  });\n  var level0 = levels[0] || (levels[0] = {});\n\n  if (!hasColorDefine) {\n    level0.color = globalColorList.slice();\n  }\n\n  if (!hasDecalDefine && globalDecalList) {\n    level0.decal = globalDecalList.slice();\n  }\n\n  return levels;\n}\n\nSeriesModel.registerClass(TreemapSeriesModel);\nexport default TreemapSeriesModel;","map":{"version":3,"sources":["/Users/wanglijie/wanglijie/clover-defi-wallet/node_modules/echarts/esm/chart/treemap/TreemapSeries.js"],"names":["__extends","zrUtil","SeriesModel","Tree","Model","wrapTreePathInfo","normalizeToArray","createTooltipMarkup","enableAriaDecalForTree","TreemapSeriesModel","_super","_this","apply","arguments","type","preventUsingHoverLayer","prototype","getInitialData","option","ecModel","root","name","children","data","completeTreeValue","levels","designatedVisualItemStyle","designatedVisualModel","itemStyle","setDefault","levelModels","map","levelDefine","tree","createTree","beforeLink","nodeData","wrapMethod","model","idx","node","getNodeByDataIndex","levelModel","depth","parentModel","optionUpdated","resetViewRoot","formatTooltip","dataIndex","multipleSeries","dataType","getData","value","getRawValue","getName","getDataParams","params","treePathInfo","setLayoutInfo","layoutInfo","extend","mapIdToIndex","id","idIndexMap","_idIndexMap","createHashMap","_idIndexMapCount","index","get","set","getViewRoot","_viewRoot","viewRoot","getRawData","contains","enableAriaDecal","layoutMode","defaultOption","progressive","left","top","width","height","sort","clipWindow","squareRatio","Math","sqrt","leafDepth","drillDownIcon","zoomToNodeRatio","roam","nodeClick","animation","animationDurationUpdate","animationEasing","breadcrumb","show","emptyItemWidth","color","textStyle","label","distance","padding","position","overflow","upperLabel","verticalAlign","colorAlpha","colorSaturation","borderWidth","gapWidth","borderColor","borderColorSaturation","emphasis","ellipsis","visualDimension","visualMin","visualMax","colorMappingBy","visibleMin","childrenVisibleMin","dataNode","sum","each","child","childValue","isArray","thisValue","isNaN","globalColorList","globalDecalList","hasColorDefine","hasDecalDefine","modelColor","modelDecal","level0","slice","decal","registerClass"],"mappings":"AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAIA;AACA;AACA;AAEA,SAASA,SAAT,QAA0B,OAA1B;AACA,OAAO,KAAKC,MAAZ,MAAwB,uBAAxB;AACA,OAAOC,WAAP,MAAwB,oBAAxB;AACA,OAAOC,IAAP,MAAiB,iBAAjB;AACA,OAAOC,KAAP,MAAkB,mBAAlB;AACA,SAASC,gBAAT,QAAiC,sBAAjC;AACA,SAASC,gBAAT,QAAiC,kBAAjC;AACA,SAASC,mBAAT,QAAoC,uCAApC;AACA,OAAOC,sBAAP,MAAmC,kCAAnC;;AAEA,IAAIC,kBAAkB,GAAG,UAAUC,MAAV,EAAkB;AACzCV,EAAAA,SAAS,CAACS,kBAAD,EAAqBC,MAArB,CAAT;;AAEA,WAASD,kBAAT,GAA8B;AAC5B,QAAIE,KAAK,GAAGD,MAAM,KAAK,IAAX,IAAmBA,MAAM,CAACE,KAAP,CAAa,IAAb,EAAmBC,SAAnB,CAAnB,IAAoD,IAAhE;;AAEAF,IAAAA,KAAK,CAACG,IAAN,GAAaL,kBAAkB,CAACK,IAAhC;AACAH,IAAAA,KAAK,CAACI,sBAAN,GAA+B,IAA/B;AACA,WAAOJ,KAAP;AACD;;AAEDF,EAAAA,kBAAkB,CAACO,SAAnB,CAA6BC,cAA7B,GAA8C,UAAUC,MAAV,EAAkBC,OAAlB,EAA2B;AACvE,QAAIC,IAAI,GAAG;AACTC,MAAAA,IAAI,EAAEH,MAAM,CAACG,IADJ;AAETC,MAAAA,QAAQ,EAAEJ,MAAM,CAACK;AAFR,KAAX;AAIAC,IAAAA,iBAAiB,CAACJ,IAAD,CAAjB;AACA,QAAIK,MAAM,GAAGP,MAAM,CAACO,MAAP,IAAiB,EAA9B;AACA,QAAIC,yBAAyB,GAAG,KAAKA,yBAAL,GAAiC,EAAjE;AACA,QAAIC,qBAAqB,GAAG,IAAIvB,KAAJ,CAAU;AACpCwB,MAAAA,SAAS,EAAEF;AADyB,KAAV,EAEzB,IAFyB,EAEnBP,OAFmB,CAA5B;AAGAM,IAAAA,MAAM,GAAGP,MAAM,CAACO,MAAP,GAAgBI,UAAU,CAACJ,MAAD,EAASN,OAAT,CAAnC;AACA,QAAIW,WAAW,GAAG7B,MAAM,CAAC8B,GAAP,CAAWN,MAAM,IAAI,EAArB,EAAyB,UAAUO,WAAV,EAAuB;AAChE,aAAO,IAAI5B,KAAJ,CAAU4B,WAAV,EAAuBL,qBAAvB,EAA8CR,OAA9C,CAAP;AACD,KAFiB,EAEf,IAFe,CAAlB;AAGA,QAAIc,IAAI,GAAG9B,IAAI,CAAC+B,UAAL,CAAgBd,IAAhB,EAAsB,IAAtB,EAA4Be,UAA5B,CAAX;;AAEA,aAASA,UAAT,CAAoBC,QAApB,EAA8B;AAC5BA,MAAAA,QAAQ,CAACC,UAAT,CAAoB,cAApB,EAAoC,UAAUC,KAAV,EAAiBC,GAAjB,EAAsB;AACxD,YAAIC,IAAI,GAAGP,IAAI,CAACQ,kBAAL,CAAwBF,GAAxB,CAAX;AACA,YAAIG,UAAU,GAAGZ,WAAW,CAACU,IAAI,CAACG,KAAN,CAA5B;AACAL,QAAAA,KAAK,CAACM,WAAN,GAAoBF,UAAU,IAAIf,qBAAlC;AACA,eAAOW,KAAP;AACD,OALD;AAMD;;AAED,WAAOL,IAAI,CAACV,IAAZ;AACD,GA3BD;;AA6BAd,EAAAA,kBAAkB,CAACO,SAAnB,CAA6B6B,aAA7B,GAA6C,YAAY;AACvD,SAAKC,aAAL;AACD,GAFD;;AAIArC,EAAAA,kBAAkB,CAACO,SAAnB,CAA6B+B,aAA7B,GAA6C,UAAUC,SAAV,EAAqBC,cAArB,EAAqCC,QAArC,EAA+C;AAC1F,QAAI3B,IAAI,GAAG,KAAK4B,OAAL,EAAX;AACA,QAAIC,KAAK,GAAG,KAAKC,WAAL,CAAiBL,SAAjB,CAAZ;AACA,QAAI3B,IAAI,GAAGE,IAAI,CAAC+B,OAAL,CAAaN,SAAb,CAAX;AACA,WAAOzC,mBAAmB,CAAC,WAAD,EAAc;AACtCc,MAAAA,IAAI,EAAEA,IADgC;AAEtC+B,MAAAA,KAAK,EAAEA;AAF+B,KAAd,CAA1B;AAID,GARD;;AAUA3C,EAAAA,kBAAkB,CAACO,SAAnB,CAA6BuC,aAA7B,GAA6C,UAAUP,SAAV,EAAqB;AAChE,QAAIQ,MAAM,GAAG9C,MAAM,CAACM,SAAP,CAAiBuC,aAAjB,CAA+B3C,KAA/B,CAAqC,IAArC,EAA2CC,SAA3C,CAAb;;AAEA,QAAI2B,IAAI,GAAG,KAAKW,OAAL,GAAelB,IAAf,CAAoBQ,kBAApB,CAAuCO,SAAvC,CAAX;AACAQ,IAAAA,MAAM,CAACC,YAAP,GAAsBpD,gBAAgB,CAACmC,IAAD,EAAO,IAAP,CAAtC;AACA,WAAOgB,MAAP;AACD,GAND;;AAQA/C,EAAAA,kBAAkB,CAACO,SAAnB,CAA6B0C,aAA7B,GAA6C,UAAUC,UAAV,EAAsB;AACjE,SAAKA,UAAL,GAAkB,KAAKA,UAAL,IAAmB,EAArC;AACA1D,IAAAA,MAAM,CAAC2D,MAAP,CAAc,KAAKD,UAAnB,EAA+BA,UAA/B;AACD,GAHD;;AAKAlD,EAAAA,kBAAkB,CAACO,SAAnB,CAA6B6C,YAA7B,GAA4C,UAAUC,EAAV,EAAc;AACxD,QAAIC,UAAU,GAAG,KAAKC,WAAtB;;AAEA,QAAI,CAACD,UAAL,EAAiB;AACfA,MAAAA,UAAU,GAAG,KAAKC,WAAL,GAAmB/D,MAAM,CAACgE,aAAP,EAAhC;AACA,WAAKC,gBAAL,GAAwB,CAAxB;AACD;;AAED,QAAIC,KAAK,GAAGJ,UAAU,CAACK,GAAX,CAAeN,EAAf,CAAZ;;AAEA,QAAIK,KAAK,IAAI,IAAb,EAAmB;AACjBJ,MAAAA,UAAU,CAACM,GAAX,CAAeP,EAAf,EAAmBK,KAAK,GAAG,KAAKD,gBAAL,EAA3B;AACD;;AAED,WAAOC,KAAP;AACD,GAfD;;AAiBA1D,EAAAA,kBAAkB,CAACO,SAAnB,CAA6BsD,WAA7B,GAA2C,YAAY;AACrD,WAAO,KAAKC,SAAZ;AACD,GAFD;;AAIA9D,EAAAA,kBAAkB,CAACO,SAAnB,CAA6B8B,aAA7B,GAA6C,UAAU0B,QAAV,EAAoB;AAC/DA,IAAAA,QAAQ,GAAG,KAAKD,SAAL,GAAiBC,QAApB,GAA+BA,QAAQ,GAAG,KAAKD,SAAvD;AACA,QAAInD,IAAI,GAAG,KAAKqD,UAAL,GAAkBxC,IAAlB,CAAuBb,IAAlC;;AAEA,QAAI,CAACoD,QAAD,IAAaA,QAAQ,KAAKpD,IAAb,IAAqB,CAACA,IAAI,CAACsD,QAAL,CAAcF,QAAd,CAAvC,EAAgE;AAC9D,WAAKD,SAAL,GAAiBnD,IAAjB;AACD;AACF,GAPD;;AASAX,EAAAA,kBAAkB,CAACO,SAAnB,CAA6B2D,eAA7B,GAA+C,YAAY;AACzDnE,IAAAA,sBAAsB,CAAC,IAAD,CAAtB;AACD,GAFD;;AAIAC,EAAAA,kBAAkB,CAACK,IAAnB,GAA0B,gBAA1B;AACAL,EAAAA,kBAAkB,CAACmE,UAAnB,GAAgC,KAAhC;AACAnE,EAAAA,kBAAkB,CAACoE,aAAnB,GAAmC;AACjCC,IAAAA,WAAW,EAAE,CADoB;AAEjCC,IAAAA,IAAI,EAAE,QAF2B;AAGjCC,IAAAA,GAAG,EAAE,QAH4B;AAIjCC,IAAAA,KAAK,EAAE,KAJ0B;AAKjCC,IAAAA,MAAM,EAAE,KALyB;AAMjCC,IAAAA,IAAI,EAAE,IAN2B;AAOjCC,IAAAA,UAAU,EAAE,QAPqB;AAQjCC,IAAAA,WAAW,EAAE,OAAO,IAAIC,IAAI,CAACC,IAAL,CAAU,CAAV,CAAX,CARoB;AASjCC,IAAAA,SAAS,EAAE,IATsB;AAUjCC,IAAAA,aAAa,EAAE,GAVkB;AAWjCC,IAAAA,eAAe,EAAE,OAAO,IAXS;AAYjCC,IAAAA,IAAI,EAAE,IAZ2B;AAajCC,IAAAA,SAAS,EAAE,YAbsB;AAcjCC,IAAAA,SAAS,EAAE,IAdsB;AAejCC,IAAAA,uBAAuB,EAAE,GAfQ;AAgBjCC,IAAAA,eAAe,EAAE,cAhBgB;AAiBjCC,IAAAA,UAAU,EAAE;AACVC,MAAAA,IAAI,EAAE,IADI;AAEVf,MAAAA,MAAM,EAAE,EAFE;AAGVH,MAAAA,IAAI,EAAE,QAHI;AAIVC,MAAAA,GAAG,EAAE,QAJK;AAKVkB,MAAAA,cAAc,EAAE,EALN;AAMVtE,MAAAA,SAAS,EAAE;AACTuE,QAAAA,KAAK,EAAE,iBADE;AAETC,QAAAA,SAAS,EAAE;AACTD,UAAAA,KAAK,EAAE;AADE;AAFF;AAND,KAjBqB;AA8BjCE,IAAAA,KAAK,EAAE;AACLJ,MAAAA,IAAI,EAAE,IADD;AAELK,MAAAA,QAAQ,EAAE,CAFL;AAGLC,MAAAA,OAAO,EAAE,CAHJ;AAILC,MAAAA,QAAQ,EAAE,QAJL;AAKLL,MAAAA,KAAK,EAAE,MALF;AAMLM,MAAAA,QAAQ,EAAE;AANL,KA9B0B;AAsCjCC,IAAAA,UAAU,EAAE;AACVT,MAAAA,IAAI,EAAE,KADI;AAEVO,MAAAA,QAAQ,EAAE,CAAC,CAAD,EAAI,KAAJ,CAFA;AAGVtB,MAAAA,MAAM,EAAE,EAHE;AAIVuB,MAAAA,QAAQ,EAAE,UAJA;AAKVE,MAAAA,aAAa,EAAE;AALL,KAtCqB;AA6CjC/E,IAAAA,SAAS,EAAE;AACTuE,MAAAA,KAAK,EAAE,IADE;AAETS,MAAAA,UAAU,EAAE,IAFH;AAGTC,MAAAA,eAAe,EAAE,IAHR;AAITC,MAAAA,WAAW,EAAE,CAJJ;AAKTC,MAAAA,QAAQ,EAAE,CALD;AAMTC,MAAAA,WAAW,EAAE,MANJ;AAOTC,MAAAA,qBAAqB,EAAE;AAPd,KA7CsB;AAsDjCC,IAAAA,QAAQ,EAAE;AACRR,MAAAA,UAAU,EAAE;AACVT,QAAAA,IAAI,EAAE,IADI;AAEVO,QAAAA,QAAQ,EAAE,CAAC,CAAD,EAAI,KAAJ,CAFA;AAGVW,QAAAA,QAAQ,EAAE,IAHA;AAIVR,QAAAA,aAAa,EAAE;AAJL;AADJ,KAtDuB;AA8DjCS,IAAAA,eAAe,EAAE,CA9DgB;AA+DjCC,IAAAA,SAAS,EAAE,IA/DsB;AAgEjCC,IAAAA,SAAS,EAAE,IAhEsB;AAiEjCnB,IAAAA,KAAK,EAAE,EAjE0B;AAkEjCS,IAAAA,UAAU,EAAE,IAlEqB;AAmEjCC,IAAAA,eAAe,EAAE,IAnEgB;AAoEjCU,IAAAA,cAAc,EAAE,OApEiB;AAqEjCC,IAAAA,UAAU,EAAE,EArEqB;AAsEjCC,IAAAA,kBAAkB,EAAE,IAtEa;AAuEjChG,IAAAA,MAAM,EAAE;AAvEyB,GAAnC;AAyEA,SAAOhB,kBAAP;AACD,CAjLwB,CAiLvBP,WAjLuB,CAAzB;;AAmLA,SAASsB,iBAAT,CAA2BkG,QAA3B,EAAqC;AACnC,MAAIC,GAAG,GAAG,CAAV;AACA1H,EAAAA,MAAM,CAAC2H,IAAP,CAAYF,QAAQ,CAACpG,QAArB,EAA+B,UAAUuG,KAAV,EAAiB;AAC9CrG,IAAAA,iBAAiB,CAACqG,KAAD,CAAjB;AACA,QAAIC,UAAU,GAAGD,KAAK,CAACzE,KAAvB;AACAnD,IAAAA,MAAM,CAAC8H,OAAP,CAAeD,UAAf,MAA+BA,UAAU,GAAGA,UAAU,CAAC,CAAD,CAAtD;AACAH,IAAAA,GAAG,IAAIG,UAAP;AACD,GALD;AAMA,MAAIE,SAAS,GAAGN,QAAQ,CAACtE,KAAzB;;AAEA,MAAInD,MAAM,CAAC8H,OAAP,CAAeC,SAAf,CAAJ,EAA+B;AAC7BA,IAAAA,SAAS,GAAGA,SAAS,CAAC,CAAD,CAArB;AACD;;AAED,MAAIA,SAAS,IAAI,IAAb,IAAqBC,KAAK,CAACD,SAAD,CAA9B,EAA2C;AACzCA,IAAAA,SAAS,GAAGL,GAAZ;AACD;;AAED,MAAIK,SAAS,GAAG,CAAhB,EAAmB;AACjBA,IAAAA,SAAS,GAAG,CAAZ;AACD;;AAED/H,EAAAA,MAAM,CAAC8H,OAAP,CAAeL,QAAQ,CAACtE,KAAxB,IAAiCsE,QAAQ,CAACtE,KAAT,CAAe,CAAf,IAAoB4E,SAArD,GAAiEN,QAAQ,CAACtE,KAAT,GAAiB4E,SAAlF;AACD;;AAED,SAASnG,UAAT,CAAoBJ,MAApB,EAA4BN,OAA5B,EAAqC;AACnC,MAAI+G,eAAe,GAAG5H,gBAAgB,CAACa,OAAO,CAACiD,GAAR,CAAY,OAAZ,CAAD,CAAtC;AACA,MAAI+D,eAAe,GAAG7H,gBAAgB,CAACa,OAAO,CAACiD,GAAR,CAAY,QAAZ,CAAD,CAAtC;;AAEA,MAAI,CAAC8D,eAAL,EAAsB;AACpB;AACD;;AAEDzG,EAAAA,MAAM,GAAGA,MAAM,IAAI,EAAnB;AACA,MAAI2G,cAAJ;AACA,MAAIC,cAAJ;AACApI,EAAAA,MAAM,CAAC2H,IAAP,CAAYnG,MAAZ,EAAoB,UAAUO,WAAV,EAAuB;AACzC,QAAIM,KAAK,GAAG,IAAIlC,KAAJ,CAAU4B,WAAV,CAAZ;AACA,QAAIsG,UAAU,GAAGhG,KAAK,CAAC8B,GAAN,CAAU,OAAV,CAAjB;AACA,QAAImE,UAAU,GAAGjG,KAAK,CAAC8B,GAAN,CAAU,OAAV,CAAjB;;AAEA,QAAI9B,KAAK,CAAC8B,GAAN,CAAU,CAAC,WAAD,EAAc,OAAd,CAAV,KAAqCkE,UAAU,IAAIA,UAAU,KAAK,MAAtE,EAA8E;AAC5EF,MAAAA,cAAc,GAAG,IAAjB;AACD;;AAED,QAAI9F,KAAK,CAAC8B,GAAN,CAAU,CAAC,WAAD,EAAc,OAAd,CAAV,KAAqCmE,UAAU,IAAIA,UAAU,KAAK,MAAtE,EAA8E;AAC5EF,MAAAA,cAAc,GAAG,IAAjB;AACD;AACF,GAZD;AAaA,MAAIG,MAAM,GAAG/G,MAAM,CAAC,CAAD,CAAN,KAAcA,MAAM,CAAC,CAAD,CAAN,GAAY,EAA1B,CAAb;;AAEA,MAAI,CAAC2G,cAAL,EAAqB;AACnBI,IAAAA,MAAM,CAACrC,KAAP,GAAe+B,eAAe,CAACO,KAAhB,EAAf;AACD;;AAED,MAAI,CAACJ,cAAD,IAAmBF,eAAvB,EAAwC;AACtCK,IAAAA,MAAM,CAACE,KAAP,GAAeP,eAAe,CAACM,KAAhB,EAAf;AACD;;AAED,SAAOhH,MAAP;AACD;;AAEDvB,WAAW,CAACyI,aAAZ,CAA0BlI,kBAA1B;AACA,eAAeA,kBAAf","sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/esm/core/util';\nimport SeriesModel from '../../model/Series';\nimport Tree from '../../data/Tree';\nimport Model from '../../model/Model';\nimport { wrapTreePathInfo } from '../helper/treeHelper';\nimport { normalizeToArray } from '../../util/model';\nimport { createTooltipMarkup } from '../../component/tooltip/tooltipMarkup';\nimport enableAriaDecalForTree from '../helper/enableAriaDecalForTree';\n\nvar TreemapSeriesModel = function (_super) {\n  __extends(TreemapSeriesModel, _super);\n\n  function TreemapSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = TreemapSeriesModel.type;\n    _this.preventUsingHoverLayer = true;\n    return _this;\n  }\n\n  TreemapSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    var root = {\n      name: option.name,\n      children: option.data\n    };\n    completeTreeValue(root);\n    var levels = option.levels || [];\n    var designatedVisualItemStyle = this.designatedVisualItemStyle = {};\n    var designatedVisualModel = new Model({\n      itemStyle: designatedVisualItemStyle\n    }, this, ecModel);\n    levels = option.levels = setDefault(levels, ecModel);\n    var levelModels = zrUtil.map(levels || [], function (levelDefine) {\n      return new Model(levelDefine, designatedVisualModel, ecModel);\n    }, this);\n    var tree = Tree.createTree(root, this, beforeLink);\n\n    function beforeLink(nodeData) {\n      nodeData.wrapMethod('getItemModel', function (model, idx) {\n        var node = tree.getNodeByDataIndex(idx);\n        var levelModel = levelModels[node.depth];\n        model.parentModel = levelModel || designatedVisualModel;\n        return model;\n      });\n    }\n\n    return tree.data;\n  };\n\n  TreemapSeriesModel.prototype.optionUpdated = function () {\n    this.resetViewRoot();\n  };\n\n  TreemapSeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    var data = this.getData();\n    var value = this.getRawValue(dataIndex);\n    var name = data.getName(dataIndex);\n    return createTooltipMarkup('nameValue', {\n      name: name,\n      value: value\n    });\n  };\n\n  TreemapSeriesModel.prototype.getDataParams = function (dataIndex) {\n    var params = _super.prototype.getDataParams.apply(this, arguments);\n\n    var node = this.getData().tree.getNodeByDataIndex(dataIndex);\n    params.treePathInfo = wrapTreePathInfo(node, this);\n    return params;\n  };\n\n  TreemapSeriesModel.prototype.setLayoutInfo = function (layoutInfo) {\n    this.layoutInfo = this.layoutInfo || {};\n    zrUtil.extend(this.layoutInfo, layoutInfo);\n  };\n\n  TreemapSeriesModel.prototype.mapIdToIndex = function (id) {\n    var idIndexMap = this._idIndexMap;\n\n    if (!idIndexMap) {\n      idIndexMap = this._idIndexMap = zrUtil.createHashMap();\n      this._idIndexMapCount = 0;\n    }\n\n    var index = idIndexMap.get(id);\n\n    if (index == null) {\n      idIndexMap.set(id, index = this._idIndexMapCount++);\n    }\n\n    return index;\n  };\n\n  TreemapSeriesModel.prototype.getViewRoot = function () {\n    return this._viewRoot;\n  };\n\n  TreemapSeriesModel.prototype.resetViewRoot = function (viewRoot) {\n    viewRoot ? this._viewRoot = viewRoot : viewRoot = this._viewRoot;\n    var root = this.getRawData().tree.root;\n\n    if (!viewRoot || viewRoot !== root && !root.contains(viewRoot)) {\n      this._viewRoot = root;\n    }\n  };\n\n  TreemapSeriesModel.prototype.enableAriaDecal = function () {\n    enableAriaDecalForTree(this);\n  };\n\n  TreemapSeriesModel.type = 'series.treemap';\n  TreemapSeriesModel.layoutMode = 'box';\n  TreemapSeriesModel.defaultOption = {\n    progressive: 0,\n    left: 'center',\n    top: 'middle',\n    width: '80%',\n    height: '80%',\n    sort: true,\n    clipWindow: 'origin',\n    squareRatio: 0.5 * (1 + Math.sqrt(5)),\n    leafDepth: null,\n    drillDownIcon: 'â–¶',\n    zoomToNodeRatio: 0.32 * 0.32,\n    roam: true,\n    nodeClick: 'zoomToNode',\n    animation: true,\n    animationDurationUpdate: 900,\n    animationEasing: 'quinticInOut',\n    breadcrumb: {\n      show: true,\n      height: 22,\n      left: 'center',\n      top: 'bottom',\n      emptyItemWidth: 25,\n      itemStyle: {\n        color: 'rgba(0,0,0,0.7)',\n        textStyle: {\n          color: '#fff'\n        }\n      }\n    },\n    label: {\n      show: true,\n      distance: 0,\n      padding: 5,\n      position: 'inside',\n      color: '#fff',\n      overflow: 'truncate'\n    },\n    upperLabel: {\n      show: false,\n      position: [0, '50%'],\n      height: 20,\n      overflow: 'truncate',\n      verticalAlign: 'middle'\n    },\n    itemStyle: {\n      color: null,\n      colorAlpha: null,\n      colorSaturation: null,\n      borderWidth: 0,\n      gapWidth: 0,\n      borderColor: '#fff',\n      borderColorSaturation: null\n    },\n    emphasis: {\n      upperLabel: {\n        show: true,\n        position: [0, '50%'],\n        ellipsis: true,\n        verticalAlign: 'middle'\n      }\n    },\n    visualDimension: 0,\n    visualMin: null,\n    visualMax: null,\n    color: [],\n    colorAlpha: null,\n    colorSaturation: null,\n    colorMappingBy: 'index',\n    visibleMin: 10,\n    childrenVisibleMin: null,\n    levels: []\n  };\n  return TreemapSeriesModel;\n}(SeriesModel);\n\nfunction completeTreeValue(dataNode) {\n  var sum = 0;\n  zrUtil.each(dataNode.children, function (child) {\n    completeTreeValue(child);\n    var childValue = child.value;\n    zrUtil.isArray(childValue) && (childValue = childValue[0]);\n    sum += childValue;\n  });\n  var thisValue = dataNode.value;\n\n  if (zrUtil.isArray(thisValue)) {\n    thisValue = thisValue[0];\n  }\n\n  if (thisValue == null || isNaN(thisValue)) {\n    thisValue = sum;\n  }\n\n  if (thisValue < 0) {\n    thisValue = 0;\n  }\n\n  zrUtil.isArray(dataNode.value) ? dataNode.value[0] = thisValue : dataNode.value = thisValue;\n}\n\nfunction setDefault(levels, ecModel) {\n  var globalColorList = normalizeToArray(ecModel.get('color'));\n  var globalDecalList = normalizeToArray(ecModel.get('decals'));\n\n  if (!globalColorList) {\n    return;\n  }\n\n  levels = levels || [];\n  var hasColorDefine;\n  var hasDecalDefine;\n  zrUtil.each(levels, function (levelDefine) {\n    var model = new Model(levelDefine);\n    var modelColor = model.get('color');\n    var modelDecal = model.get('decal');\n\n    if (model.get(['itemStyle', 'color']) || modelColor && modelColor !== 'none') {\n      hasColorDefine = true;\n    }\n\n    if (model.get(['itemStyle', 'decal']) || modelDecal && modelDecal !== 'none') {\n      hasDecalDefine = true;\n    }\n  });\n  var level0 = levels[0] || (levels[0] = {});\n\n  if (!hasColorDefine) {\n    level0.color = globalColorList.slice();\n  }\n\n  if (!hasDecalDefine && globalDecalList) {\n    level0.decal = globalDecalList.slice();\n  }\n\n  return levels;\n}\n\nSeriesModel.registerClass(TreemapSeriesModel);\nexport default TreemapSeriesModel;"]},"metadata":{},"sourceType":"module"}